/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => JournalingPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  journalFolder: "journals",
  dateFormat: "YYYY-MM-DD",
  sortDirection: "newest-first",
  defaultExpandEntries: true
};
var JournalingSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Continuous Journaling Settings" });
    new import_obsidian.Setting(containerEl).setName("Journal Folder").setDesc("Specify the folder where journal entries will be stored").addText((text) => text.setPlaceholder("journals").setValue(this.plugin.settings.journalFolder).onChange(async (value) => {
      this.plugin.settings.journalFolder = value.replace(/^\/+|\/+$/g, "");
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Date Format").setDesc("Format for journal filenames (YYYY-MM-DD recommended)").addText((text) => text.setPlaceholder("YYYY-MM-DD").setValue(this.plugin.settings.dateFormat).onChange(async (value) => {
      this.plugin.settings.dateFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Sort Direction").setDesc("How to sort journal entries in the continuous view").addDropdown((dropdown) => dropdown.addOption("newest-first", "Newest entries first").addOption("oldest-first", "Oldest entries first").setValue(this.plugin.settings.sortDirection).onChange(async (value) => {
      this.plugin.settings.sortDirection = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Default Expand Entries").setDesc("Automatically expand entries when opening the journals view").addToggle((toggle) => toggle.setValue(this.plugin.settings.defaultExpandEntries).onChange(async (value) => {
      this.plugin.settings.defaultExpandEntries = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/journal-view.ts
var import_obsidian3 = require("obsidian");

// src/utils/date-utils.ts
function getTodayDate() {
  const today = new Date();
  return formatDateString(today);
}
function formatDateString(date) {
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, "0");
  const day = String(date.getDate()).padStart(2, "0");
  return `${year}-${month}-${day}`;
}
function formatDateForDisplay(dateString) {
  const date = new Date(dateString);
  const dateFormatOptions = {
    month: "short",
    year: "numeric",
    day: "numeric"
  };
  const formattedDate = new Intl.DateTimeFormat("en-US", dateFormatOptions).format(date);
  const day = date.getDate();
  const daySuffix = getDaySuffix(day);
  const parts = formattedDate.split(" ");
  return `${parts[0]} ${day}${daySuffix}, ${parts[2]}`;
}
function getDaySuffix(day) {
  if (day > 3 && day < 21)
    return "th";
  switch (day % 10) {
    case 1:
      return "st";
    case 2:
      return "nd";
    case 3:
      return "rd";
    default:
      return "th";
  }
}
function isDateFormat(text) {
  return /^\d{4}-\d{2}-\d{2}$/.test(text);
}

// src/utils/file-utils.ts
var import_obsidian2 = require("obsidian");
async function ensureFolder(app, folderPath) {
  if (!folderPath) {
    return true;
  }
  const folderExists = app.vault.getAbstractFileByPath(folderPath);
  if (folderExists && !(folderExists instanceof import_obsidian2.TFolder)) {
    new import_obsidian2.Notice(`Cannot create journal folder: "${folderPath}" exists but is not a folder`);
    return false;
  }
  if (!folderExists) {
    try {
      await app.vault.createFolder(folderPath);
      new import_obsidian2.Notice(`Created journal folder: ${folderPath}`);
      return true;
    } catch (error) {
      new import_obsidian2.Notice(`Failed to create journal folder: ${error}`);
      console.error("Failed to create journal folder:", error);
      return false;
    }
  }
  return true;
}
function getFilePath(folder, filename) {
  if (folder) {
    return `${folder}/${filename}`;
  }
  return filename;
}
function isJournalFile(file, journalFolder) {
  const isDateBasename = isDateFormat(file.basename);
  if (journalFolder) {
    return isDateBasename && file.path.startsWith(journalFolder + "/");
  }
  return isDateBasename;
}
function getJournalFiles(app, journalFolder) {
  const files = app.vault.getMarkdownFiles();
  return files.filter((file) => isJournalFile(file, journalFolder));
}
function sortJournalFiles(files, sortDirection) {
  return files.sort((a, b) => {
    if (sortDirection === "newest-first") {
      return b.basename.localeCompare(a.basename);
    } else {
      return a.basename.localeCompare(b.basename);
    }
  });
}
async function getOrCreateJournalFile(app, journalFolder, filename, initialContent = "") {
  await ensureFolder(app, journalFolder);
  const filePath = getFilePath(journalFolder, filename);
  let file = app.vault.getAbstractFileByPath(filePath);
  if (file instanceof import_obsidian2.TFile) {
    return file;
  }
  try {
    file = await app.vault.create(filePath, initialContent);
    new import_obsidian2.Notice(`Created journal entry: ${filename}`);
    return file;
  } catch (error) {
    new import_obsidian2.Notice(`Failed to create journal entry: ${error}`);
    console.error("Failed to create journal entry:", error);
    return null;
  }
}

// src/journal-view.ts
var JournalView = class {
  constructor(plugin) {
    this.activeEditor = null;
    this.plugin = plugin;
    this.registerCleanup();
  }
  // Opens the continuous journal view in a new leaf
  async open() {
    const leaf = this.plugin.app.workspace.getLeaf(true);
    await leaf.setViewState({
      type: "markdown",
      active: true
    });
    const contentEl = leaf.view.containerEl;
    contentEl.empty();
    const panel = contentEl.createDiv({ cls: "custom-journal-panel" });
    const journalFiles = getJournalFiles(this.plugin.app, this.plugin.settings.journalFolder);
    if (journalFiles.length === 0) {
      new import_obsidian3.Notice("No journal entries found.");
      panel.createEl("div", {
        cls: "journal-empty-state",
        text: "No journal entries found. Create one by clicking the journals icon in the ribbon."
      });
      return;
    }
    const sortedFiles = sortJournalFiles(journalFiles, this.plugin.settings.sortDirection);
    for (const file of sortedFiles) {
      try {
        const fileContent = await this.plugin.app.vault.read(file);
        this.addJournalEntry(panel, file, fileContent);
      } catch (error) {
        console.error(`Error reading file ${file.path}:`, error);
        this.addErrorMessage(panel, file.basename, error);
      }
    }
  }
  // Adds an error message to the panel when file reading fails
  addErrorMessage(panel, filename, error) {
    const errorDiv = panel.createDiv({ cls: "journal-entry journal-error" });
    const errorHeader = errorDiv.createDiv({ cls: "journal-entry-header" });
    errorHeader.createEl("h3", {
      cls: "journal-entry-title",
      text: `${filename} - Error`
    });
    const errorContent = errorDiv.createDiv({ cls: "journal-error-content" });
    errorContent.textContent = `Failed to load journal: ${error.message || error}`;
  }
  // Adds a journal entry to the panel
  addJournalEntry(panel, file, content) {
    const journalDate = file.basename;
    const journalEntry = panel.createDiv({ cls: "journal-entry" });
    const header = journalEntry.createDiv({ cls: "journal-entry-header" });
    const toggleButton = header.createEl("button", { cls: "collapsible-toggle" });
    if (this.plugin.settings.defaultExpandEntries) {
      toggleButton.addClass("toggle-expanded");
    }
    const title = header.createEl("h3", { cls: "journal-entry-title" });
    const titleLink = title.createEl("a", {
      cls: "journal-entry-link",
      text: formatDateForDisplay(journalDate)
    });
    titleLink.addEventListener("click", (event) => {
      event.preventDefault();
      this.plugin.app.workspace.openLinkText(file.basename, file.path);
    });
    const contentArea = journalEntry.createDiv({
      cls: "collapsible-content" + (this.plugin.settings.defaultExpandEntries ? " content-expanded" : "")
    });
    let currentContent = content;
    let isEditing = false;
    const renderedContent = contentArea.createDiv({
      cls: "rendered-content active-view"
    });
    const editableContent = contentArea.createEl("textarea", {
      cls: "editable-content",
      value: currentContent
    });
    const closeButton = contentArea.createEl("button", {
      cls: "journal-close-button",
      text: "Close"
    });
    closeButton.style.display = "none";
    const saveIndicator = contentArea.createDiv({
      cls: "journal-save-indicator",
      text: "Saved"
    });
    saveIndicator.style.display = "none";
    window.requestAnimationFrame(() => {
      editableContent.style.height = editableContent.scrollHeight + "px";
    });
    const renderContent = () => {
      renderedContent.empty();
      import_obsidian3.MarkdownRenderer.render(this.plugin.app, currentContent, renderedContent, file.path, this.plugin);
    };
    renderContent();
    const enterEditMode = () => {
      isEditing = true;
      this.activeEditor = editableContent;
      editableContent.value = currentContent;
      renderedContent.classList.remove("active-view");
      editableContent.classList.add("active-view");
      closeButton.style.display = "block";
      editableContent.style.height = "auto";
      editableContent.style.height = editableContent.scrollHeight + "px";
      editableContent.focus();
    };
    const exitEditMode = async () => {
      if (isEditing) {
        currentContent = editableContent.value;
        await this.saveContentToFile(file, currentContent);
        renderContent();
        editableContent.classList.remove("active-view");
        closeButton.style.display = "none";
        renderedContent.classList.add("active-view");
        isEditing = false;
        if (this.activeEditor === editableContent) {
          this.activeEditor = null;
        }
      }
    };
    renderedContent.addEventListener("click", (event) => {
      const target = event.target;
      if (target.tagName === "A" || target.closest("a") || target.classList.contains("cm-hashtag") || target.closest(".cm-hashtag")) {
        return;
      }
      enterEditMode();
    });
    closeButton.addEventListener("click", () => {
      exitEditMode();
    });
    editableContent.addEventListener("keydown", (event) => {
      if (event.key === "Escape") {
        exitEditMode();
      }
    });
    editableContent.addEventListener("input", () => {
      editableContent.style.height = "auto";
      editableContent.style.height = editableContent.scrollHeight + "px";
      currentContent = editableContent.value;
    });
    let saveTimeout = null;
    editableContent.addEventListener("input", () => {
      saveIndicator.style.display = "block";
      saveIndicator.classList.remove("saved");
      saveIndicator.classList.add("saving");
      saveIndicator.textContent = "Saving...";
      if (saveTimeout) {
        clearTimeout(saveTimeout);
      }
      saveTimeout = setTimeout(async () => {
        await this.saveContentToFile(file, currentContent);
        saveIndicator.classList.remove("saving");
        saveIndicator.classList.add("saved");
        saveIndicator.textContent = "Saved";
        setTimeout(() => {
          if (saveIndicator.classList.contains("saved")) {
            saveIndicator.style.display = "none";
          }
        }, 2e3);
      }, 500);
    });
    toggleButton.addEventListener("click", () => {
      toggleButton.classList.toggle("toggle-expanded");
      contentArea.classList.toggle("content-expanded");
    });
  }
  /**
   * Saves the content to the file
   */
  async saveContentToFile(file, content) {
    try {
      await this.plugin.app.vault.modify(file, content);
    } catch (error) {
      new import_obsidian3.Notice(`Failed to save changes: ${error}`);
      console.error("Failed to save changes:", error);
    }
  }
  /**
   * Inserts a reference to a file into the active journal entry
   */
  insertFileReference(filePath) {
    if (!this.activeEditor) {
      new import_obsidian3.Notice("No active journal entry to insert file into");
      return;
    }
    const file = this.plugin.app.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian3.TFile)) {
      new import_obsidian3.Notice("Invalid file");
      return;
    }
    let fileReference;
    if (this.isImageFile(file)) {
      fileReference = `![[${file.name}]]`;
    } else if (this.isMarkdownFile(file)) {
      fileReference = `![[${file.name}]]`;
    } else {
      fileReference = `![[${file.name}]]`;
    }
    this.activeEditor.focus();
    const cursorPos = this.activeEditor.selectionStart;
    const textBefore = this.activeEditor.value.substring(0, cursorPos);
    const textAfter = this.activeEditor.value.substring(this.activeEditor.selectionEnd);
    const newText = textBefore + "\n\n" + fileReference + "\n\n" + textAfter;
    this.activeEditor.value = newText;
    const newCursorPos = cursorPos + fileReference.length + 4;
    this.activeEditor.setSelectionRange(newCursorPos, newCursorPos);
    const inputEvent = new Event("input", { bubbles: true, cancelable: true });
    this.activeEditor.dispatchEvent(inputEvent);
    new import_obsidian3.Notice(`Inserted reference to ${file.name}`);
  }
  /**
   * Check if a file is an image
   */
  isImageFile(file) {
    const imageExtensions = ["png", "jpg", "jpeg", "gif", "svg", "webp"];
    const ext = file.extension.toLowerCase();
    return imageExtensions.includes(ext);
  }
  /**
   * Check if a file is a markdown file
   */
  isMarkdownFile(file) {
    const ext = file.extension.toLowerCase();
    return ext === "md" || ext === "markdown";
  }
  registerCleanup() {
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("layout-change", () => {
        if (this.activeEditor) {
          const journalEntry = this.activeEditor.closest(".journal-entry");
          if (journalEntry) {
            const event = new KeyboardEvent("keydown", { key: "Escape" });
            this.activeEditor.dispatchEvent(event);
          }
          this.activeEditor = null;
        }
      })
    );
  }
};

// src/main.ts
var JournalingPlugin = class extends import_obsidian4.Plugin {
  async onload() {
    await this.loadSettings();
    this.journalView = new JournalView(this);
    const ribbonIconEl = this.addRibbonIcon(
      "notebook-text",
      "Open Journals",
      async (evt) => {
        await this.openJournalView();
      }
    );
    ribbonIconEl.addClass("journaling-ribbon-icon");
    this.addCommand({
      id: "open-journal-view",
      name: "Open Journal View",
      callback: () => {
        this.openJournalView();
      }
    });
    this.addCommand({
      id: "create-todays-journal",
      name: "Create/Open Today's Journal",
      callback: () => {
        this.createTodaysJournal();
      }
    });
    this.addSettingTab(new JournalingSettingTab(this.app, this));
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        if (file instanceof import_obsidian4.TFile) {
          menu.addItem((item) => {
            item.setTitle("Insert into Journal").setIcon("text-cursor-input").onClick(() => {
              const journalView = this.journalView;
              if (journalView) {
                journalView.insertFileReference(file.path);
              } else {
                new import_obsidian4.Notice("Open the journal view first to insert file reference");
              }
            });
          });
        }
      })
    );
  }
  /**
   * Opens the continuous journal view
   */
  async openJournalView() {
    await this.createTodaysJournal();
    await this.journalView.open();
  }
  /**
   * Creates or opens today's journal entry
   */
  async createTodaysJournal() {
    const date = getTodayDate();
    const fileName = `${date}.md`;
    const file = await getOrCreateJournalFile(
      this.app,
      this.settings.journalFolder,
      fileName
    );
    if (!file) {
      new import_obsidian4.Notice("Failed to create or open today's journal");
      return;
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9qb3VybmFsLXZpZXcudHMiLCAic3JjL3V0aWxzL2RhdGUtdXRpbHMudHMiLCAic3JjL3V0aWxzL2ZpbGUtdXRpbHMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgUGx1Z2luLCBOb3RpY2UsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUywgSm91cm5hbGluZ1NldHRpbmdzLCBKb3VybmFsaW5nU2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgSm91cm5hbFZpZXcgfSBmcm9tICcuL2pvdXJuYWwtdmlldyc7XG5pbXBvcnQgeyBnZXRUb2RheURhdGUgfSBmcm9tICcuL3V0aWxzL2RhdGUtdXRpbHMnO1xuaW1wb3J0IHsgZ2V0T3JDcmVhdGVKb3VybmFsRmlsZSB9IGZyb20gJy4vdXRpbHMvZmlsZS11dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEpvdXJuYWxpbmdQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBKb3VybmFsaW5nU2V0dGluZ3M7XG4gICAgam91cm5hbFZpZXc6IEpvdXJuYWxWaWV3O1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICAvLyBMb2FkIHNldHRpbmdzXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbml0aWFsaXplIGpvdXJuYWwgdmlld1xuICAgICAgICB0aGlzLmpvdXJuYWxWaWV3ID0gbmV3IEpvdXJuYWxWaWV3KHRoaXMpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHJpYmJvbiBpY29uXG4gICAgICAgIGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbihcbiAgICAgICAgICAgICdub3RlYm9vay10ZXh0JywgXG4gICAgICAgICAgICAnT3BlbiBKb3VybmFscycsIFxuICAgICAgICAgICAgYXN5bmMgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub3BlbkpvdXJuYWxWaWV3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHJpYmJvbkljb25FbC5hZGRDbGFzcygnam91cm5hbGluZy1yaWJib24taWNvbicpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIGNvbW1hbmQgdG8gb3BlbiBqb3VybmFsIHZpZXdcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnb3Blbi1qb3VybmFsLXZpZXcnLFxuICAgICAgICAgICAgbmFtZTogJ09wZW4gSm91cm5hbCBWaWV3JyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuSm91cm5hbFZpZXcoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIGNvbW1hbmQgZm9yIGNyZWF0aW5nIHRvZGF5J3Mgam91cm5hbFxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdjcmVhdGUtdG9kYXlzLWpvdXJuYWwnLFxuICAgICAgICAgICAgbmFtZTogJ0NyZWF0ZS9PcGVuIFRvZGF5XFwncyBKb3VybmFsJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUb2RheXNKb3VybmFsKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlZ2lzdGVyIHNldHRpbmdzIHRhYlxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEpvdXJuYWxpbmdTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cbiAgICAgICAgLy8gQWRkIGNvbnRleHQgbWVudSBvcHRpb24gZm9yIGZpbGVzIHRvIGluc2VydCBpbnRvIGpvdXJuYWxzXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1tZW51JywgKG1lbnUsIGZpbGUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgZmlsZSBpcyBhIFRGaWxlIChhY3R1YWwgZmlsZSlcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZSgnSW5zZXJ0IGludG8gSm91cm5hbCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ3RleHQtY3Vyc29yLWlucHV0JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIGFjdGl2ZSBqb3VybmFsIHZpZXcgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGpvdXJuYWxWaWV3ID0gdGhpcy5qb3VybmFsVmlldztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpvdXJuYWxWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGZpbGUgcmVmZXJlbmNlIGludG8gdGhlIGFjdGl2ZSBlZGl0b3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvdXJuYWxWaWV3Lmluc2VydEZpbGVSZWZlcmVuY2UoZmlsZS5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ09wZW4gdGhlIGpvdXJuYWwgdmlldyBmaXJzdCB0byBpbnNlcnQgZmlsZSByZWZlcmVuY2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBjb250aW51b3VzIGpvdXJuYWwgdmlld1xuICAgICAqL1xuICAgIGFzeW5jIG9wZW5Kb3VybmFsVmlldygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gRmlyc3QsIGVuc3VyZSB0b2RheSdzIGpvdXJuYWwgZXhpc3RzXG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlVG9kYXlzSm91cm5hbCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gVGhlbiBvcGVuIHRoZSBjb250aW51b3VzIHZpZXdcbiAgICAgICAgYXdhaXQgdGhpcy5qb3VybmFsVmlldy5vcGVuKCk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgb3Igb3BlbnMgdG9kYXkncyBqb3VybmFsIGVudHJ5XG4gICAgICovXG4gICAgYXN5bmMgY3JlYXRlVG9kYXlzSm91cm5hbCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IGdldFRvZGF5RGF0ZSgpO1xuICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke2RhdGV9Lm1kYDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZpbGUgPSBhd2FpdCBnZXRPckNyZWF0ZUpvdXJuYWxGaWxlKFxuICAgICAgICAgICAgdGhpcy5hcHAsIFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5qb3VybmFsRm9sZGVyLCBcbiAgICAgICAgICAgIGZpbGVOYW1lXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBjcmVhdGUgb3Igb3BlbiB0b2RheVxcJ3Mgam91cm5hbCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEpvdXJuYWxpbmdQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBKb3VybmFsaW5nU2V0dGluZ3Mge1xuICAgIGpvdXJuYWxGb2xkZXI6IHN0cmluZztcbiAgICBkYXRlRm9ybWF0OiBzdHJpbmc7XG4gICAgc29ydERpcmVjdGlvbjogJ25ld2VzdC1maXJzdCcgfCAnb2xkZXN0LWZpcnN0JztcbiAgICBkZWZhdWx0RXhwYW5kRW50cmllczogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEpvdXJuYWxpbmdTZXR0aW5ncyA9IHtcbiAgICBqb3VybmFsRm9sZGVyOiAnam91cm5hbHMnLFxuICAgIGRhdGVGb3JtYXQ6ICdZWVlZLU1NLUREJyxcbiAgICBzb3J0RGlyZWN0aW9uOiAnbmV3ZXN0LWZpcnN0JyxcbiAgICBkZWZhdWx0RXhwYW5kRW50cmllczogdHJ1ZSxcbn07XG5cbmV4cG9ydCBjbGFzcyBKb3VybmFsaW5nU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogSm91cm5hbGluZ1BsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEpvdXJuYWxpbmdQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0NvbnRpbnVvdXMgSm91cm5hbGluZyBTZXR0aW5ncycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnSm91cm5hbCBGb2xkZXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ1NwZWNpZnkgdGhlIGZvbGRlciB3aGVyZSBqb3VybmFsIGVudHJpZXMgd2lsbCBiZSBzdG9yZWQnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdqb3VybmFscycpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmpvdXJuYWxGb2xkZXIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlcyBmb3IgY29uc2lzdGVuY3lcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbEZvbGRlciA9IHZhbHVlLnJlcGxhY2UoL15cXC8rfFxcLyskL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RhdGUgRm9ybWF0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdGb3JtYXQgZm9yIGpvdXJuYWwgZmlsZW5hbWVzIChZWVlZLU1NLUREIHJlY29tbWVuZGVkKScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1lZWVktTU0tREQnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF0ZUZvcm1hdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU29ydCBEaXJlY3Rpb24nKVxuICAgICAgICAgICAgLnNldERlc2MoJ0hvdyB0byBzb3J0IGpvdXJuYWwgZW50cmllcyBpbiB0aGUgY29udGludW91cyB2aWV3JylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ25ld2VzdC1maXJzdCcsICdOZXdlc3QgZW50cmllcyBmaXJzdCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignb2xkZXN0LWZpcnN0JywgJ09sZGVzdCBlbnRyaWVzIGZpcnN0JylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydERpcmVjdGlvbilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiAnbmV3ZXN0LWZpcnN0JyB8ICdvbGRlc3QtZmlyc3QnKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNvcnREaXJlY3Rpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgRXhwYW5kIEVudHJpZXMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgZXhwYW5kIGVudHJpZXMgd2hlbiBvcGVuaW5nIHRoZSBqb3VybmFscyB2aWV3JylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0RXhwYW5kRW50cmllcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRFeHBhbmRFbnRyaWVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICB9XG59IiwgImltcG9ydCB7IE1hcmtkb3duUmVuZGVyZXIsIE5vdGljZSwgVEZpbGUsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgSm91cm5hbGluZ1BsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgZm9ybWF0RGF0ZUZvckRpc3BsYXkgfSBmcm9tICcuL3V0aWxzL2RhdGUtdXRpbHMnO1xuaW1wb3J0IHsgZ2V0Sm91cm5hbEZpbGVzLCBzb3J0Sm91cm5hbEZpbGVzIH0gZnJvbSAnLi91dGlscy9maWxlLXV0aWxzJztcblxuZXhwb3J0IGNsYXNzIEpvdXJuYWxWaWV3IHtcbiAgICBwbHVnaW46IEpvdXJuYWxpbmdQbHVnaW47XG4gICAgYWN0aXZlRWRpdG9yOiBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gICAgXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBKb3VybmFsaW5nUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyQ2xlYW51cCgpO1xuICAgIH1cbiAgICBcbiAgICAvLyBPcGVucyB0aGUgY29udGludW91cyBqb3VybmFsIHZpZXcgaW4gYSBuZXcgbGVhZlxuICAgIGFzeW5jIG9wZW4oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBsZWFmIChvcGVucyBhIG5ldyB0YWIpXG4gICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgdGhlIHZpZXcgc3RhdGUgdG8gTWFya2Rvd24gdG8gYWNjZXNzIGNvbnRhaW5lckVsXG4gICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgIHR5cGU6IFwibWFya2Rvd25cIixcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIG1haW4gY29udGFpbmVyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IGxlYWYudmlldy5jb250YWluZXJFbDtcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgYSBzY3JvbGxhYmxlIHBhbmVsIGZvciBqb3VybmFsIGVudHJpZXNcbiAgICAgICAgY29uc3QgcGFuZWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY3VzdG9tLWpvdXJuYWwtcGFuZWwnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IGFsbCBqb3VybmFsIGZpbGVzXG4gICAgICAgIGNvbnN0IGpvdXJuYWxGaWxlcyA9IGdldEpvdXJuYWxGaWxlcyh0aGlzLnBsdWdpbi5hcHAsIHRoaXMucGx1Z2luLnNldHRpbmdzLmpvdXJuYWxGb2xkZXIpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGpvdXJuYWxGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGpvdXJuYWwgZW50cmllcyBmb3VuZC4nKTtcbiAgICAgICAgICAgIHBhbmVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgICAgICAgICAgIGNsczogJ2pvdXJuYWwtZW1wdHktc3RhdGUnLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdObyBqb3VybmFsIGVudHJpZXMgZm91bmQuIENyZWF0ZSBvbmUgYnkgY2xpY2tpbmcgdGhlIGpvdXJuYWxzIGljb24gaW4gdGhlIHJpYmJvbi4nIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNvcnQgdGhlIGZpbGVzIGFjY29yZGluZyB0byB1c2VyIHByZWZlcmVuY2VcbiAgICAgICAgY29uc3Qgc29ydGVkRmlsZXMgPSBzb3J0Sm91cm5hbEZpbGVzKGpvdXJuYWxGaWxlcywgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydERpcmVjdGlvbik7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgZWFjaCBmaWxlIHRvIHRoZSBwYW5lbFxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2Ygc29ydGVkRmlsZXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEpvdXJuYWxFbnRyeShwYW5lbCwgZmlsZSwgZmlsZUNvbnRlbnQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciByZWFkaW5nIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEVycm9yTWVzc2FnZShwYW5lbCwgZmlsZS5iYXNlbmFtZSwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZHMgYW4gZXJyb3IgbWVzc2FnZSB0byB0aGUgcGFuZWwgd2hlbiBmaWxlIHJlYWRpbmcgZmFpbHNcbiAgICBwcml2YXRlIGFkZEVycm9yTWVzc2FnZShwYW5lbDogSFRNTEVsZW1lbnQsIGZpbGVuYW1lOiBzdHJpbmcsIGVycm9yOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZXJyb3JEaXYgPSBwYW5lbC5jcmVhdGVEaXYoeyBjbHM6ICdqb3VybmFsLWVudHJ5IGpvdXJuYWwtZXJyb3InIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXJyb3JIZWFkZXIgPSBlcnJvckRpdi5jcmVhdGVEaXYoeyBjbHM6ICdqb3VybmFsLWVudHJ5LWhlYWRlcicgfSk7XG4gICAgICAgIGVycm9ySGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgXG4gICAgICAgICAgICBjbHM6ICdqb3VybmFsLWVudHJ5LXRpdGxlJyxcbiAgICAgICAgICAgIHRleHQ6IGAke2ZpbGVuYW1lfSAtIEVycm9yYCBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBlcnJvckNvbnRlbnQgPSBlcnJvckRpdi5jcmVhdGVEaXYoeyBjbHM6ICdqb3VybmFsLWVycm9yLWNvbnRlbnQnIH0pO1xuICAgICAgICBlcnJvckNvbnRlbnQudGV4dENvbnRlbnQgPSBgRmFpbGVkIHRvIGxvYWQgam91cm5hbDogJHtlcnJvci5tZXNzYWdlIHx8IGVycm9yfWA7XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZHMgYSBqb3VybmFsIGVudHJ5IHRvIHRoZSBwYW5lbFxuICAgIHByaXZhdGUgYWRkSm91cm5hbEVudHJ5KHBhbmVsOiBIVE1MRWxlbWVudCwgZmlsZTogVEZpbGUsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBqb3VybmFsRGF0ZSA9IGZpbGUuYmFzZW5hbWU7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIG1haW4gY29udGFpbmVyIGZvciB0aGlzIGVudHJ5XG4gICAgICAgIGNvbnN0IGpvdXJuYWxFbnRyeSA9IHBhbmVsLmNyZWF0ZURpdih7IGNsczogJ2pvdXJuYWwtZW50cnknIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBoZWFkZXIgc2VjdGlvblxuICAgICAgICBjb25zdCBoZWFkZXIgPSBqb3VybmFsRW50cnkuY3JlYXRlRGl2KHsgY2xzOiAnam91cm5hbC1lbnRyeS1oZWFkZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHRvZ2dsZSBidXR0b24gZm9yIGNvbGxhcHNpbmcvZXhwYW5kaW5nXG4gICAgICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbiA9IGhlYWRlci5jcmVhdGVFbCgnYnV0dG9uJywgeyBjbHM6ICdjb2xsYXBzaWJsZS10b2dnbGUnIH0pO1xuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEV4cGFuZEVudHJpZXMpIHtcbiAgICAgICAgICAgIHRvZ2dsZUJ1dHRvbi5hZGRDbGFzcygndG9nZ2xlLWV4cGFuZGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0aXRsZSB3aXRoIGxpbmsgdG8gdGhlIG9yaWdpbmFsIGZpbGVcbiAgICAgICAgY29uc3QgdGl0bGUgPSBoZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyBjbHM6ICdqb3VybmFsLWVudHJ5LXRpdGxlJyB9KTtcbiAgICAgICAgY29uc3QgdGl0bGVMaW5rID0gdGl0bGUuY3JlYXRlRWwoJ2EnLCB7IFxuICAgICAgICAgICAgY2xzOiAnam91cm5hbC1lbnRyeS1saW5rJyxcbiAgICAgICAgICAgIHRleHQ6IGZvcm1hdERhdGVGb3JEaXNwbGF5KGpvdXJuYWxEYXRlKVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBjbGljayBvbiB0aGUgdGl0bGUgdG8gb3BlbiB0aGUgZmlsZVxuICAgICAgICB0aXRsZUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChmaWxlLmJhc2VuYW1lLCBmaWxlLnBhdGgpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgY29udGVudCBhcmVhXG4gICAgICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gam91cm5hbEVudHJ5LmNyZWF0ZURpdih7IFxuICAgICAgICAgICAgY2xzOiAnY29sbGFwc2libGUtY29udGVudCcgKyAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEV4cGFuZEVudHJpZXMgPyAnIGNvbnRlbnQtZXhwYW5kZWQnIDogJycpXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVHJhY2sgdGhlIGN1cnJlbnQgY29udGVudFxuICAgICAgICBsZXQgY3VycmVudENvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICBcbiAgICAgICAgLy8gRmxhZyB0byB0cmFjayBpZiB0aGUgZW50cnkgaXMgaW4gZWRpdCBtb2RlXG4gICAgICAgIGxldCBpc0VkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgcmVuZGVyZWQgY29udGVudCB2aWV3XG4gICAgICAgIGNvbnN0IHJlbmRlcmVkQ29udGVudCA9IGNvbnRlbnRBcmVhLmNyZWF0ZURpdih7IFxuICAgICAgICAgICAgY2xzOiAncmVuZGVyZWQtY29udGVudCBhY3RpdmUtdmlldycgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBlZGl0YWJsZSB0ZXh0YXJlYVxuICAgICAgICBjb25zdCBlZGl0YWJsZUNvbnRlbnQgPSBjb250ZW50QXJlYS5jcmVhdGVFbCgndGV4dGFyZWEnLCB7IFxuICAgICAgICAgICAgY2xzOiAnZWRpdGFibGUtY29udGVudCcsXG4gICAgICAgICAgICB2YWx1ZTogY3VycmVudENvbnRlbnRcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgY2xvc2UgYnV0dG9uIChuZXcgcmVxdWlyZW1lbnQpXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gY29udGVudEFyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIGNsczogJ2pvdXJuYWwtY2xvc2UtYnV0dG9uJyxcbiAgICAgICAgICAgIHRleHQ6ICdDbG9zZSdcbiAgICAgICAgfSk7XG4gICAgICAgIGNsb3NlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEhpZGUgaW5pdGlhbGx5XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgc2F2ZSBpbmRpY2F0b3JcbiAgICAgICAgY29uc3Qgc2F2ZUluZGljYXRvciA9IGNvbnRlbnRBcmVhLmNyZWF0ZURpdih7IFxuICAgICAgICAgICAgY2xzOiAnam91cm5hbC1zYXZlLWluZGljYXRvcicsXG4gICAgICAgICAgICB0ZXh0OiAnU2F2ZWQnXG4gICAgICAgIH0pO1xuICAgICAgICBzYXZlSW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEhpZGUgaW5pdGlhbGx5XG4gICAgICAgIFxuICAgICAgICAvLyBBZGp1c3QgdGV4dGFyZWEgaGVpZ2h0IHRvIGNvbnRlbnRcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gZWRpdGFibGVDb250ZW50LnNjcm9sbEhlaWdodCArICdweCc7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gcmVuZGVyIHRoZSBtYXJrZG93biBjb250ZW50XG4gICAgICAgIGNvbnN0IHJlbmRlckNvbnRlbnQgPSAoKSA9PiB7XG4gICAgICAgICAgICByZW5kZXJlZENvbnRlbnQuZW1wdHkoKTtcbiAgICAgICAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKHRoaXMucGx1Z2luLmFwcCwgY3VycmVudENvbnRlbnQsIHJlbmRlcmVkQ29udGVudCwgZmlsZS5wYXRoLCB0aGlzLnBsdWdpbik7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBJbml0aWFsIHJlbmRlclxuICAgICAgICByZW5kZXJDb250ZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBGdW5jdGlvbiB0byBlbnRlciBlZGl0IG1vZGVcbiAgICAgICAgY29uc3QgZW50ZXJFZGl0TW9kZSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIFNldCBlZGl0aW5nIGZsYWdcbiAgICAgICAgICAgIGlzRWRpdGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUVkaXRvciA9IGVkaXRhYmxlQ29udGVudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRleHRhcmVhIGhhcyBjdXJyZW50IGNvbnRlbnRcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC52YWx1ZSA9IGN1cnJlbnRDb250ZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIaWRlIHJlbmRlcmVkIHZpZXcsIHNob3cgZWRpdGFibGUgdmlldyBhbmQgY2xvc2UgYnV0dG9uXG4gICAgICAgICAgICByZW5kZXJlZENvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLXZpZXcnKTtcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtdmlldycpO1xuICAgICAgICAgICAgY2xvc2VCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFkanVzdCB0ZXh0YXJlYSBoZWlnaHRcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gZWRpdGFibGVDb250ZW50LnNjcm9sbEhlaWdodCArICdweCc7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZ1bmN0aW9uIHRvIGV4aXQgZWRpdCBtb2RlXG4gICAgICAgIGNvbnN0IGV4aXRFZGl0TW9kZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBjb250ZW50IGlzIHNhdmVkIGJlZm9yZSBleGl0aW5nXG4gICAgICAgICAgICBpZiAoaXNFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IGN1cnJlbnQgY29udGVudCBmcm9tIHRleHRhcmVhXG4gICAgICAgICAgICAgICAgY3VycmVudENvbnRlbnQgPSBlZGl0YWJsZUNvbnRlbnQudmFsdWU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQ29udGVudFRvRmlsZShmaWxlLCBjdXJyZW50Q29udGVudCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gUmUtcmVuZGVyIGNvbnRlbnRcbiAgICAgICAgICAgICAgICByZW5kZXJDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSGlkZSBlZGl0YWJsZSB2aWV3IGFuZCBjbG9zZSBidXR0b24sIHNob3cgcmVuZGVyZWQgdmlld1xuICAgICAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtdmlldycpO1xuICAgICAgICAgICAgICAgIGNsb3NlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgcmVuZGVyZWRDb250ZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS12aWV3Jyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgZWRpdGluZyBmbGFnIGFuZCBhY3RpdmUgZWRpdG9yIHJlZmVyZW5jZVxuICAgICAgICAgICAgICAgIGlzRWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUVkaXRvciA9PT0gZWRpdGFibGVDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRWRpdG9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ2xpY2sgb24gcmVuZGVyZWQgY29udGVudCB0byBlZGl0XG4gICAgICAgIHJlbmRlcmVkQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEb24ndCBlbnRlciBlZGl0IG1vZGUgaWYgY2xpY2tpbmcgb24gbGlua3Mgb3IgaGFzaHRhZ3NcbiAgICAgICAgICAgIGlmICh0YXJnZXQudGFnTmFtZSA9PT0gJ0EnIHx8IHRhcmdldC5jbG9zZXN0KCdhJykgfHwgXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY20taGFzaHRhZycpIHx8IHRhcmdldC5jbG9zZXN0KCcuY20taGFzaHRhZycpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBlbnRlckVkaXRNb2RlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xvc2UgYnV0dG9uIHRvIGV4aXQgZWRpdCBtb2RlXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgZXhpdEVkaXRNb2RlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFudWFsIHNhdmUvZXhpdCB3aGVuIHByZXNzaW5nIEVzY2FwZVxuICAgICAgICBlZGl0YWJsZUNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgICBleGl0RWRpdE1vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBdXRvLWFkanVzdCB0ZXh0YXJlYSBoZWlnaHQgd2hpbGUgdHlwaW5nXG4gICAgICAgIGVkaXRhYmxlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gZWRpdGFibGVDb250ZW50LnNjcm9sbEhlaWdodCArICdweCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IGNvbnRlbnQgd2hpbGUgdHlwaW5nXG4gICAgICAgICAgICBjdXJyZW50Q29udGVudCA9IGVkaXRhYmxlQ29udGVudC52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQXV0by1zYXZlIGNvbnRlbnQgd2hpbGUgdHlwaW5nXG4gICAgICAgIGxldCBzYXZlVGltZW91dDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgICAgICAgZWRpdGFibGVDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2hvdyAnU2F2aW5nLi4uJyBpbmRpY2F0b3JcbiAgICAgICAgICAgIHNhdmVJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBzYXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3NhdmVkJyk7XG4gICAgICAgICAgICBzYXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ3NhdmluZycpO1xuICAgICAgICAgICAgc2F2ZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdTYXZpbmcuLi4nO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDbGVhciBwcmV2aW91cyB0aW1lb3V0XG4gICAgICAgICAgICBpZiAoc2F2ZVRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2F2ZVRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZXQgYSBuZXcgdGltZW91dCB0byBzYXZlIGFmdGVyIDUwMG1zIG9mIGluYWN0aXZpdHlcbiAgICAgICAgICAgIHNhdmVUaW1lb3V0ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQ29udGVudFRvRmlsZShmaWxlLCBjdXJyZW50Q29udGVudCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvciB0byAnU2F2ZWQnXG4gICAgICAgICAgICAgICAgc2F2ZUluZGljYXRvci5jbGFzc0xpc3QucmVtb3ZlKCdzYXZpbmcnKTtcbiAgICAgICAgICAgICAgICBzYXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ3NhdmVkJyk7XG4gICAgICAgICAgICAgICAgc2F2ZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdTYXZlZCc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSGlkZSB0aGUgaW5kaWNhdG9yIGFmdGVyIGEgZGVsYXlcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNhdmVJbmRpY2F0b3IuY2xhc3NMaXN0LmNvbnRhaW5zKCdzYXZlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlSW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVG9nZ2xlIGV4cGFuZC9jb2xsYXBzZSBvbiBidXR0b24gY2xpY2tcbiAgICAgICAgdG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdG9nZ2xlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3RvZ2dsZS1leHBhbmRlZCcpO1xuICAgICAgICAgICAgY29udGVudEFyZWEuY2xhc3NMaXN0LnRvZ2dsZSgnY29udGVudC1leHBhbmRlZCcpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogU2F2ZXMgdGhlIGNvbnRlbnQgdG8gdGhlIGZpbGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHNhdmVDb250ZW50VG9GaWxlKGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgY29udGVudCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gc2F2ZSBjaGFuZ2VzOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgY2hhbmdlczonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIGEgcmVmZXJlbmNlIHRvIGEgZmlsZSBpbnRvIHRoZSBhY3RpdmUgam91cm5hbCBlbnRyeVxuICAgICAqL1xuICAgIGluc2VydEZpbGVSZWZlcmVuY2UoZmlsZVBhdGg6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICAvLyBGaW5kIHRoZSBhY3RpdmUgZWRpdG9yXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVFZGl0b3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBqb3VybmFsIGVudHJ5IHRvIGluc2VydCBmaWxlIGludG8nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBHZXQgdGhlIGZpbGVcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdJbnZhbGlkIGZpbGUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIGFwcHJvcHJpYXRlIGZpbGUgcmVmZXJlbmNlXG4gICAgICAgIGxldCBmaWxlUmVmZXJlbmNlOiBzdHJpbmc7XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IGZpbGUgdHlwZXNcbiAgICAgICAgaWYgKHRoaXMuaXNJbWFnZUZpbGUoZmlsZSkpIHtcbiAgICAgICAgICAgIGZpbGVSZWZlcmVuY2UgPSBgIVtbJHtmaWxlLm5hbWV9XV1gO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNNYXJrZG93bkZpbGUoZmlsZSkpIHtcbiAgICAgICAgICAgIGZpbGVSZWZlcmVuY2UgPSBgIVtbJHtmaWxlLm5hbWV9XV1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmlsZVJlZmVyZW5jZSA9IGAhW1ske2ZpbGUubmFtZX1dXWA7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gRm9jdXMgdGhlIGFjdGl2ZSBlZGl0b3JcbiAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3IuZm9jdXMoKTtcbiAgICBcbiAgICAgICAgLy8gR2V0IGN1cnNvciBwb3NpdGlvblxuICAgICAgICBjb25zdCBjdXJzb3JQb3MgPSB0aGlzLmFjdGl2ZUVkaXRvci5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgY29uc3QgdGV4dEJlZm9yZSA9IHRoaXMuYWN0aXZlRWRpdG9yLnZhbHVlLnN1YnN0cmluZygwLCBjdXJzb3JQb3MpO1xuICAgICAgICBjb25zdCB0ZXh0QWZ0ZXIgPSB0aGlzLmFjdGl2ZUVkaXRvci52YWx1ZS5zdWJzdHJpbmcodGhpcy5hY3RpdmVFZGl0b3Iuc2VsZWN0aW9uRW5kKTtcbiAgICBcbiAgICAgICAgLy8gSW5zZXJ0IHRleHQgd2l0aCBuZXdsaW5lc1xuICAgICAgICBjb25zdCBuZXdUZXh0ID0gdGV4dEJlZm9yZSArICdcXG5cXG4nICsgZmlsZVJlZmVyZW5jZSArICdcXG5cXG4nICsgdGV4dEFmdGVyO1xuICAgICAgICB0aGlzLmFjdGl2ZUVkaXRvci52YWx1ZSA9IG5ld1RleHQ7XG4gICAgXG4gICAgICAgIC8vIFNldCBjdXJzb3IgcG9zaXRpb24gYWZ0ZXIgdGhlIGluc2VydGVkIHRleHRcbiAgICAgICAgY29uc3QgbmV3Q3Vyc29yUG9zID0gY3Vyc29yUG9zICsgZmlsZVJlZmVyZW5jZS5sZW5ndGggKyA0OyAvLyArNCBmb3IgdGhlIG5ld2xpbmVzXG4gICAgICAgIHRoaXMuYWN0aXZlRWRpdG9yLnNldFNlbGVjdGlvblJhbmdlKG5ld0N1cnNvclBvcywgbmV3Q3Vyc29yUG9zKTtcbiAgICBcbiAgICAgICAgLy8gVHJpZ2dlciBpbnB1dCBldmVudCB0byBlbnN1cmUgY29udGVudCBpcyBzYXZlZFxuICAgICAgICBjb25zdCBpbnB1dEV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3IuZGlzcGF0Y2hFdmVudChpbnB1dEV2ZW50KTtcbiAgICBcbiAgICAgICAgbmV3IE5vdGljZShgSW5zZXJ0ZWQgcmVmZXJlbmNlIHRvICR7ZmlsZS5uYW1lfWApO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIGZpbGUgaXMgYW4gaW1hZ2VcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzSW1hZ2VGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGltYWdlRXh0ZW5zaW9ucyA9IFsncG5nJywgJ2pwZycsICdqcGVnJywgJ2dpZicsICdzdmcnLCAnd2VicCddO1xuICAgICAgICBjb25zdCBleHQgPSBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXR1cm4gaW1hZ2VFeHRlbnNpb25zLmluY2x1ZGVzKGV4dCk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgZmlsZSBpcyBhIG1hcmtkb3duIGZpbGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzTWFya2Rvd25GaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHJldHVybiBleHQgPT09ICdtZCcgfHwgZXh0ID09PSAnbWFya2Rvd24nO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0ZXJDbGVhbnVwKCk6IHZvaWQge1xuICAgICAgICAvLyBXYXRjaCBmb3Igd29ya3NwYWNlIGxheW91dCBjaGFuZ2VzICh3aGljaCBoYXBwZW4gd2hlbiBjaGFuZ2luZyBwYWdlcy90YWJzKVxuICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFuIGFjdGl2ZSBlZGl0b3JcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVFZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgam91cm5hbCBlbnRyeSBjb250YWluaW5nIHRoaXMgZWRpdG9yXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpvdXJuYWxFbnRyeSA9IHRoaXMuYWN0aXZlRWRpdG9yLmNsb3Nlc3QoJy5qb3VybmFsLWVudHJ5Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChqb3VybmFsRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIGV4aXQgZWRpdCBtb2RlIGZ1bmN0aW9uIGZvciB0aGlzIGVudHJ5XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBLZXlib2FyZEV2ZW50KCdrZXlkb3duJywgeyBrZXk6ICdFc2NhcGUnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3IuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoZSBhY3RpdmUgZWRpdG9yIHJlZmVyZW5jZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVkaXRvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG59IiwgIi8qKlxuICogRm9ybWF0cyB0aGUgY3VycmVudCBkYXRlIGluIFlZWVktTU0tREQgZm9ybWF0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb2RheURhdGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgcmV0dXJuIGZvcm1hdERhdGVTdHJpbmcodG9kYXkpO1xufVxuXG4vKipcbiAqIEZvcm1hdHMgYSBkYXRlIGFzIFlZWVktTU0tRERcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGVTdHJpbmcoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcbn1cblxuLyoqXG4gKiBGb3JtYXRzIGEgZGF0ZSBzdHJpbmcgaW4gYSBodW1hbi1yZWFkYWJsZSBmb3JtYXQgd2l0aCBvcmRpbmFsIHN1ZmZpeFxuICogQHBhcmFtIGRhdGVTdHJpbmcgU3RyaW5nIGluIFlZWVktTU0tREQgZm9ybWF0XG4gKiBAcmV0dXJucyBGb3JtYXR0ZWQgZGF0ZSBzdHJpbmcgKGUuZy4sIFwiRmViIDE1dGgsIDIwMjNcIilcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGVGb3JEaXNwbGF5KGRhdGVTdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xuICAgIGNvbnN0IGRhdGVGb3JtYXRPcHRpb25zOiBJbnRsLkRhdGVUaW1lRm9ybWF0T3B0aW9ucyA9IHsgXG4gICAgICAgIG1vbnRoOiAnc2hvcnQnLCBcbiAgICAgICAgeWVhcjogJ251bWVyaWMnLCBcbiAgICAgICAgZGF5OiAnbnVtZXJpYycgXG4gICAgfTtcblxuICAgIC8vIEZvcm1hdCBkYXRlIHVzaW5nIEludGwuRGF0ZVRpbWVGb3JtYXRcbiAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuLVVTJywgZGF0ZUZvcm1hdE9wdGlvbnMpLmZvcm1hdChkYXRlKTtcblxuICAgIC8vIEV4dHJhY3QgZGF5IGFuZCBhZGQgb3JkaW5hbCBzdWZmaXggKGUuZy4sICdzdCcsICduZCcsICdyZCcsICd0aCcpXG4gICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgY29uc3QgZGF5U3VmZml4ID0gZ2V0RGF5U3VmZml4KGRheSk7XG5cbiAgICAvLyBCdWlsZCB0aGUgZmluYWwgZm9ybWF0dGVkIHN0cmluZ1xuICAgIGNvbnN0IHBhcnRzID0gZm9ybWF0dGVkRGF0ZS5zcGxpdCgnICcpO1xuICAgIHJldHVybiBgJHtwYXJ0c1swXX0gJHtkYXl9JHtkYXlTdWZmaXh9LCAke3BhcnRzWzJdfWA7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgYXBwcm9wcmlhdGUgb3JkaW5hbCBzdWZmaXggZm9yIGEgZGF5IG51bWJlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF5U3VmZml4KGRheTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoZGF5ID4gMyAmJiBkYXkgPCAyMSkgcmV0dXJuICd0aCc7IC8vIFNwZWNpYWwgY2FzZSBmb3IgMTF0aC0xOXRoXG4gICAgc3dpdGNoIChkYXkgJSAxMCkge1xuICAgICAgICBjYXNlIDE6IHJldHVybiAnc3QnO1xuICAgICAgICBjYXNlIDI6IHJldHVybiAnbmQnO1xuICAgICAgICBjYXNlIDM6IHJldHVybiAncmQnO1xuICAgICAgICBkZWZhdWx0OiByZXR1cm4gJ3RoJztcbiAgICB9XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgc3RyaW5nIG1hdGNoZXMgdGhlIFlZWVktTU0tREQgcGF0dGVyblxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEYXRlRm9ybWF0KHRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9JC8udGVzdCh0ZXh0KTtcbn0iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgaXNEYXRlRm9ybWF0IH0gZnJvbSAnLi9kYXRlLXV0aWxzJztcblxuLyoqXG4gKiBFbnN1cmVzIHRoYXQgdGhlIHNwZWNpZmllZCBmb2xkZXIgZXhpc3RzLCBjcmVhdGluZyBpdCBpZiBuZWNlc3NhcnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlcihhcHA6IEFwcCwgZm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgLy8gSWYgbm8gZm9sZGVyIGlzIHNwZWNpZmllZCwgbm90aGluZyB0byBjcmVhdGVcbiAgICBpZiAoIWZvbGRlclBhdGgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgZm9sZGVyIGV4aXN0c1xuICAgIGNvbnN0IGZvbGRlckV4aXN0cyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgXG4gICAgLy8gSWYgaXQgZXhpc3RzLCBtYWtlIHN1cmUgaXQncyBhIGZvbGRlclxuICAgIGlmIChmb2xkZXJFeGlzdHMgJiYgIShmb2xkZXJFeGlzdHMgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuICAgICAgICBuZXcgTm90aWNlKGBDYW5ub3QgY3JlYXRlIGpvdXJuYWwgZm9sZGVyOiBcIiR7Zm9sZGVyUGF0aH1cIiBleGlzdHMgYnV0IGlzIG5vdCBhIGZvbGRlcmApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBmb2xkZXIgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIGlmICghZm9sZGVyRXhpc3RzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgQ3JlYXRlZCBqb3VybmFsIGZvbGRlcjogJHtmb2xkZXJQYXRofWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gY3JlYXRlIGpvdXJuYWwgZm9sZGVyOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBqb3VybmFsIGZvbGRlcjonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgZnVsbCBwYXRoIGZvciBhIGZpbGUgd2l0aGluIHRoZSBzcGVjaWZpZWQgZm9sZGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlUGF0aChmb2xkZXI6IHN0cmluZywgZmlsZW5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKGZvbGRlcikge1xuICAgICAgICByZXR1cm4gYCR7Zm9sZGVyfS8ke2ZpbGVuYW1lfWA7XG4gICAgfVxuICAgIHJldHVybiBmaWxlbmFtZTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBmaWxlIGlzIGEgam91cm5hbCBmaWxlIGJhc2VkIG9uIGl0cyBuYW1lIHBhdHRlcm4gYW5kIGxvY2F0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0pvdXJuYWxGaWxlKGZpbGU6IFRGaWxlLCBqb3VybmFsRm9sZGVyPzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgLy8gQ2hlY2sgaWYgYmFzZW5hbWUgbWF0Y2hlcyBZWVlZLU1NLUREIHBhdHRlcm5cbiAgICBjb25zdCBpc0RhdGVCYXNlbmFtZSA9IGlzRGF0ZUZvcm1hdChmaWxlLmJhc2VuYW1lKTtcbiAgICBcbiAgICAvLyBJZiBmb2xkZXIgaXMgc3BlY2lmaWVkLCBhbHNvIGNoZWNrIGlmIHRoZSBmaWxlIGlzIGluIHRoYXQgZm9sZGVyXG4gICAgaWYgKGpvdXJuYWxGb2xkZXIpIHtcbiAgICAgICAgcmV0dXJuIGlzRGF0ZUJhc2VuYW1lICYmIGZpbGUucGF0aC5zdGFydHNXaXRoKGpvdXJuYWxGb2xkZXIgKyAnLycpO1xuICAgIH1cbiAgICBcbiAgICAvLyBJZiBubyBmb2xkZXIgaXMgc3BlY2lmaWVkLCBqdXN0IGNoZWNrIHRoZSBiYXNlbmFtZVxuICAgIHJldHVybiBpc0RhdGVCYXNlbmFtZTtcbn1cblxuLyoqXG4gKiBHZXRzIGFsbCBqb3VybmFsIGZpbGVzIGluIHRoZSB2YXVsdFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Sm91cm5hbEZpbGVzKGFwcDogQXBwLCBqb3VybmFsRm9sZGVyPzogc3RyaW5nKTogVEZpbGVbXSB7XG4gICAgLy8gR2V0IGFsbCBtYXJrZG93biBmaWxlcyBpbiB0aGUgdmF1bHRcbiAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICAvLyBGaWx0ZXIgZmlsZXMgdGhhdCBmb2xsb3cgYSBkYWlseSBub3RlIHBhdHRlcm4gYW5kIGFyZSBpbiB0aGUgY29ycmVjdCBmb2xkZXJcbiAgICByZXR1cm4gZmlsZXMuZmlsdGVyKChmaWxlKSA9PiBpc0pvdXJuYWxGaWxlKGZpbGUsIGpvdXJuYWxGb2xkZXIpKTtcbn1cblxuLyoqXG4gKiBTb3J0cyBqb3VybmFsIGZpbGVzIGJ5IGRhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvcnRKb3VybmFsRmlsZXMoZmlsZXM6IFRGaWxlW10sIHNvcnREaXJlY3Rpb246ICduZXdlc3QtZmlyc3QnIHwgJ29sZGVzdC1maXJzdCcpOiBURmlsZVtdIHtcbiAgICByZXR1cm4gZmlsZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoc29ydERpcmVjdGlvbiA9PT0gJ25ld2VzdC1maXJzdCcpIHtcbiAgICAgICAgICAgIHJldHVybiBiLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYS5iYXNlbmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYS5iYXNlbmFtZS5sb2NhbGVDb21wYXJlKGIuYmFzZW5hbWUpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBvciBnZXRzIGEgam91cm5hbCBmaWxlIGZvciB0aGUgc3BlY2lmaWVkIGRhdGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9yQ3JlYXRlSm91cm5hbEZpbGUoXG4gICAgYXBwOiBBcHAsIFxuICAgIGpvdXJuYWxGb2xkZXI6IHN0cmluZywgXG4gICAgZmlsZW5hbWU6IHN0cmluZyxcbiAgICBpbml0aWFsQ29udGVudDogc3RyaW5nID0gJydcbik6IFByb21pc2U8VEZpbGUgfCBudWxsPiB7XG4gICAgYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgam91cm5hbEZvbGRlcik7XG4gICAgXG4gICAgY29uc3QgZmlsZVBhdGggPSBnZXRGaWxlUGF0aChqb3VybmFsRm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGZpbGUgYWxyZWFkeSBleGlzdHNcbiAgICBsZXQgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgIFxuICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgcmV0dXJuIGZpbGU7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSB0aGUgZmlsZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgdHJ5IHtcbiAgICAgICAgZmlsZSA9IGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGluaXRpYWxDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZShgQ3JlYXRlZCBqb3VybmFsIGVudHJ5OiAke2ZpbGVuYW1lfWApO1xuICAgICAgICByZXR1cm4gZmlsZSBhcyBURmlsZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gY3JlYXRlIGpvdXJuYWwgZW50cnk6ICR7ZXJyb3J9YCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgam91cm5hbCBlbnRyeTonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQTJDOzs7QUNBM0Msc0JBQStDO0FBVXhDLElBQU0sbUJBQXVDO0FBQUEsRUFDaEQsZUFBZTtBQUFBLEVBQ2YsWUFBWTtBQUFBLEVBQ1osZUFBZTtBQUFBLEVBQ2Ysc0JBQXNCO0FBQzFCO0FBRU8sSUFBTSx1QkFBTixjQUFtQyxpQ0FBaUI7QUFBQSxFQUd2RCxZQUFZLEtBQVUsUUFBMEI7QUFDNUMsVUFBTSxLQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDbEI7QUFBQSxFQUVBLFVBQWdCO0FBQ1osVUFBTSxFQUFFLFlBQVksSUFBSTtBQUN4QixnQkFBWSxNQUFNO0FBRWxCLGdCQUFZLFNBQVMsTUFBTSxFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFFckUsUUFBSSx3QkFBUSxXQUFXLEVBQ2xCLFFBQVEsZ0JBQWdCLEVBQ3hCLFFBQVEseURBQXlELEVBQ2pFLFFBQVEsVUFBUSxLQUNaLGVBQWUsVUFBVSxFQUN6QixTQUFTLEtBQUssT0FBTyxTQUFTLGFBQWEsRUFDM0MsU0FBUyxPQUFPLFVBQVU7QUFFdkIsV0FBSyxPQUFPLFNBQVMsZ0JBQWdCLE1BQU0sUUFBUSxjQUFjLEVBQUU7QUFDbkUsWUFBTSxLQUFLLE9BQU8sYUFBYTtBQUFBLElBQ25DLENBQUMsQ0FBQztBQUVWLFFBQUksd0JBQVEsV0FBVyxFQUNsQixRQUFR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S0FBSyxJQUFJO0FBQUEsY0FDN0MsT0FBTztBQUNILG9CQUFJLHdCQUFPLHNEQUFzRDtBQUFBLGNBQ3JFO0FBQUEsWUFDSixDQUFDO0FBQUEsVUFDVCxDQUFDO0FBQUEsUUFDTDtBQUFBLE1BQ0osQ0FBQztBQUFBLElBQ0w7QUFBQSxFQUNKO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLGtCQUFpQztBQUVuQyxVQUFNLEtBQUssb0JBQW9CO0FBRy9CLFVBQU0sS0FBSyxZQUFZLEtBQUs7QUFBQSxFQUNoQztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxzQkFBcUM7QUFDdkMsVUFBTSxPQUFPLGFBQWE7QUFDMUIsVUFBTSxXQUFXLEdBQUc7QUFFcEIsVUFBTSxPQUFPLE1BQU07QUFBQSxNQUNmLEtBQUs7QUFBQSxNQUNMLEtBQUssU0FBUztBQUFBLE1BQ2Q7QUFBQSxJQUNKO0FBRUEsUUFBSSxDQUFDLE1BQU07QUFDUCxVQUFJLHdCQUFPLDBDQUEyQztBQUN0RDtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDakIsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUM3RTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ2pCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ3JDO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIl0KfQo=
