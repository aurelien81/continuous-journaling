/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => journalingPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  journalingPluginSetting: "default"
};
var journalingPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    const ribbonIconEl = this.addRibbonIcon("notebook-text", "Journals", async (evt) => {
      await this.showJournalsInLeaf();
    });
    ribbonIconEl.addClass("my-plugin-ribbon-class");
    const statusBarItemEl = this.addStatusBarItem();
    statusBarItemEl.setText("Status Bar Text");
    this.addCommand({
      id: "open-journal-page",
      name: "Open Journal Page",
      callback: () => {
        this.showJournalsInLeaf();
      }
    });
    this.addCommand({
      id: "sample-editor-command",
      name: "Sample editor command",
      editorCallback: (editor, view) => {
        editor.replaceSelection("Sample Editor Command");
      }
    });
    this.addCommand({
      id: "open-sample-modal-complex",
      name: "Open sample modal (complex)",
      checkCallback: (checking) => {
        const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if (markdownView) {
          if (!checking) {
            new SampleModal(this.app).open();
          }
          return true;
        }
      }
    });
  }
  // || --- journal files management ---
  // Find all journal/daily note files
  getJournalFiles() {
    const files = this.app.vault.getMarkdownFiles();
    const journalFiles = files.filter((file) => this.isJournalFile(file));
    return journalFiles;
  }
  // Check if a file is a journal file (based on file name or folder)
  isJournalFile(file) {
    const dailyNotePattern = /^\d{4}-\d{2}-\d{2}$/;
    return dailyNotePattern.test(file.basename);
  }
  // || --- Panel creation inside new tab ---
  async showJournalsInLeaf() {
    const journalFiles = this.getJournalFiles();
    if (journalFiles.length === 0) {
      new import_obsidian.Notice("No journal files found.");
      return;
    }
    const leaf = this.app.workspace.getLeaf(true);
    await leaf.setViewState({
      type: "markdown",
      // Set to markdown view type
      active: true
    });
    const contentElement = leaf.view.containerEl;
    contentElement.empty();
    const panel = document.createElement("div");
    panel.classList.add("custom-journal-panel");
    for (const file of journalFiles) {
      const fileContent = await this.app.vault.read(file);
      this.addJournalToPanel(panel, file, fileContent);
    }
    contentElement.appendChild(panel);
  }
  // || --- Detailed UI creation/update ---
  // Helper function to add each journal entry to the panel
  addJournalToPanel(panel, file, content) {
    const journalContainer = document.createElement("div");
    journalContainer.classList.add("journal-entry");
    const journalEntryHeader = document.createElement("div");
    journalEntryHeader.classList.add("journal-entry-header");
    panel.appendChild(journalEntryHeader);
    const toggleButton = document.createElement("button");
    toggleButton.classList.add("collapsible-toggle");
    toggleButton.classList.add("toggle-expanded");
    journalEntryHeader.appendChild(toggleButton);
    const journalEntryTitle = document.createElement("h3");
    const journalEntryLink = document.createElement("a");
    journalEntryLink.textContent = file.basename;
    journalEntryLink.style.cursor = "pointer";
    journalEntryLink.addEventListener("click", () => {
      this.app.workspace.openLinkText(file.basename, file.path);
    });
    journalEntryTitle.appendChild(journalEntryLink);
    journalEntryHeader.appendChild(journalEntryTitle);
    const collapsibleContent = document.createElement("div");
    collapsibleContent.classList.add("collapsible-content");
    collapsibleContent.classList.add("content-expanded");
    panel.appendChild(collapsibleContent);
    const editableContent = document.createElement("textarea");
    editableContent.classList.add("editable-content");
    editableContent.value = content;
    collapsibleContent.appendChild(editableContent);
    toggleButton.addEventListener("click", () => {
      toggleButton.classList.toggle("toggle-expanded");
      collapsibleContent.classList.toggle("content-expanded");
      console.log("editable content scroll height:", editableContent.scrollHeight);
    });
    editableContent.addEventListener("input", async () => {
      await this.app.vault.modify(file, editableContent.value);
    });
    journalContainer.appendChild(editableContent);
    collapsibleContent.appendChild(journalContainer);
    const horizontalRule = document.createElement("hr");
    horizontalRule.classList.add("journal-horizontal-hr");
    panel.appendChild(horizontalRule);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var SampleModal = class extends import_obsidian.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.setText("Woah!");
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBURmlsZSwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHRleHQgfSBmcm9tICdzdHJlYW0vY29uc3VtZXJzJztcblxuaW50ZXJmYWNlIGpvdXJuYWxpbmdQbHVnaW5TZXR0aW5ncyB7XG5cdGpvdXJuYWxpbmdQbHVnaW5TZXR0aW5nOiBzdHJpbmc7XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IGpvdXJuYWxpbmdQbHVnaW5TZXR0aW5ncyA9IHtcblx0am91cm5hbGluZ1BsdWdpblNldHRpbmc6ICdkZWZhdWx0J1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBqb3VybmFsaW5nUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IGpvdXJuYWxpbmdQbHVnaW5TZXR0aW5ncztcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdC8vIFRoaXMgY3JlYXRlcyBhbiBpY29uIGluIHRoZSBsZWZ0IHJpYmJvbi5cblx0XHRjb25zdCByaWJib25JY29uRWwgPSB0aGlzLmFkZFJpYmJvbkljb24oJ25vdGVib29rLXRleHQnLCAnSm91cm5hbHMnLCBhc3luYyAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLnNob3dKb3VybmFsc0luTGVhZigpO1xuXHRcdH0pO1xuXHRcdC8vIFBlcmZvcm0gYWRkaXRpb25hbCB0aGluZ3Mgd2l0aCB0aGUgcmliYm9uXG5cdFx0cmliYm9uSWNvbkVsLmFkZENsYXNzKCdteS1wbHVnaW4tcmliYm9uLWNsYXNzJyk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzdGF0dXMgYmFyIGl0ZW0gdG8gdGhlIGJvdHRvbSBvZiB0aGUgYXBwLiBEb2VzIG5vdCB3b3JrIG9uIG1vYmlsZSBhcHBzLlxuXHRcdGNvbnN0IHN0YXR1c0Jhckl0ZW1FbCA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuXHRcdHN0YXR1c0Jhckl0ZW1FbC5zZXRUZXh0KCdTdGF0dXMgQmFyIFRleHQnKTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHNpbXBsZSBjb21tYW5kIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBhbnl3aGVyZVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ29wZW4tam91cm5hbC1wYWdlJyxcblx0XHRcdG5hbWU6ICdPcGVuIEpvdXJuYWwgUGFnZScsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dKb3VybmFsc0luTGVhZigpO1xuXHRcdFx0fSxcblx0XHR9KTtcblx0XHQvLyBUaGlzIGFkZHMgYW4gZWRpdG9yIGNvbW1hbmQgdGhhdCBjYW4gcGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvbiB0aGUgY3VycmVudCBlZGl0b3IgaW5zdGFuY2Vcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdzYW1wbGUtZWRpdG9yLWNvbW1hbmQnLFxuXHRcdFx0bmFtZTogJ1NhbXBsZSBlZGl0b3IgY29tbWFuZCcsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oJ1NhbXBsZSBFZGl0b3IgQ29tbWFuZCcpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdC8vIFRoaXMgYWRkcyBhIGNvbXBsZXggY29tbWFuZCB0aGF0IGNhbiBjaGVjayB3aGV0aGVyIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBhcHAgYWxsb3dzIGV4ZWN1dGlvbiBvZiB0aGUgY29tbWFuZFxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ29wZW4tc2FtcGxlLW1vZGFsLWNvbXBsZXgnLFxuXHRcdFx0bmFtZTogJ09wZW4gc2FtcGxlIG1vZGFsIChjb21wbGV4KScsXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0Ly8gQ29uZGl0aW9ucyB0byBjaGVja1xuXHRcdFx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdFx0XHRpZiAobWFya2Rvd25WaWV3KSB7XG5cdFx0XHRcdFx0Ly8gSWYgY2hlY2tpbmcgaXMgdHJ1ZSwgd2UncmUgc2ltcGx5IFwiY2hlY2tpbmdcIiBpZiB0aGUgY29tbWFuZCBjYW4gYmUgcnVuLlxuXHRcdFx0XHRcdC8vIElmIGNoZWNraW5nIGlzIGZhbHNlLCB0aGVuIHdlIHdhbnQgdG8gYWN0dWFsbHkgcGVyZm9ybSB0aGUgb3BlcmF0aW9uLlxuXHRcdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHRcdG5ldyBTYW1wbGVNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFRoaXMgY29tbWFuZCB3aWxsIG9ubHkgc2hvdyB1cCBpbiBDb21tYW5kIFBhbGV0dGUgd2hlbiB0aGUgY2hlY2sgZnVuY3Rpb24gcmV0dXJucyB0cnVlXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIHx8IC0tLSBqb3VybmFsIGZpbGVzIG1hbmFnZW1lbnQgLS0tXG5cblx0Ly8gRmluZCBhbGwgam91cm5hbC9kYWlseSBub3RlIGZpbGVzXG5cdGdldEpvdXJuYWxGaWxlcygpOiBURmlsZVtdIHtcblx0XHQvLyBHZXQgYWxsIG1hcmtkb3duIGZpbGVzIGluIHRoZSB2YXVsdFxuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG5cdFx0Ly8gRmlsdGVyIGZpbGVzIHRoYXQgZm9sbG93IGEgZGFpbHkgbm90ZSBwYXR0ZXJuXG5cdFx0Y29uc3Qgam91cm5hbEZpbGVzID0gZmlsZXMuZmlsdGVyKChmaWxlKSA9PiB0aGlzLmlzSm91cm5hbEZpbGUoZmlsZSkpO1xuXHRcdHJldHVybiBqb3VybmFsRmlsZXM7XG5cdH1cblxuXHQvLyBDaGVjayBpZiBhIGZpbGUgaXMgYSBqb3VybmFsIGZpbGUgKGJhc2VkIG9uIGZpbGUgbmFtZSBvciBmb2xkZXIpXG5cdGlzSm91cm5hbEZpbGUoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcblx0XHQvLyBBZGp1c3QgdGhlIHBhdHRlcm4gb3IgZm9sZGVyIGNoZWNrIGRlcGVuZGluZyBvbiB5b3VyIGRhaWx5IG5vdGUgc2V0dXBcblx0XHRjb25zdCBkYWlseU5vdGVQYXR0ZXJuID0gL15cXGR7NH0tXFxkezJ9LVxcZHsyfSQvOyAvLyBNYXRjaGVzIFlZWVktTU0tRERcblx0XHRyZXR1cm4gZGFpbHlOb3RlUGF0dGVybi50ZXN0KGZpbGUuYmFzZW5hbWUpO1xuXHR9XG5cblx0Ly8gfHwgLS0tIFBhbmVsIGNyZWF0aW9uIGluc2lkZSBuZXcgdGFiIC0tLVxuXG5cdGFzeW5jIHNob3dKb3VybmFsc0luTGVhZigpIHtcblx0XHRjb25zdCBqb3VybmFsRmlsZXMgPSB0aGlzLmdldEpvdXJuYWxGaWxlcygpO1xuXHRcblx0XHRpZiAoam91cm5hbEZpbGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0bmV3IE5vdGljZSgnTm8gam91cm5hbCBmaWxlcyBmb3VuZC4nKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFxuXHRcdC8vIENyZWF0ZSBhIG5ldyBsZWFmIChvcGVucyBhIG5ldyB0YWIpXG5cdFx0Y29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xuXHRcblx0XHQvLyBTZXQgdGhlIHZpZXcgc3RhdGUgdG8gTWFya2Rvd24gdG8gYWNjZXNzIGNvbnRhaW5lckVsXG5cdFx0YXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuXHRcdFx0dHlwZTogXCJtYXJrZG93blwiLCAvLyBTZXQgdG8gbWFya2Rvd24gdmlldyB0eXBlXG5cdFx0XHRhY3RpdmU6IHRydWVcblx0XHR9KTtcblxuXHRcdC8vIEFjY2VzcyB0aGUgY29udGFpbmVyIGVsZW1lbnQgb2YgdGhlIG1hcmtkb3duIHZpZXdcblx0XHRjb25zdCBjb250ZW50RWxlbWVudCA9IGxlYWYudmlldy5jb250YWluZXJFbDsgLy8gVXNlIGNvbnRhaW5lckVsIHRvIGFjY2VzcyB0aGUgZWxlbWVudFxuXHRcblx0XHRjb250ZW50RWxlbWVudC5lbXB0eSgpOyAvLyBDbGVhciB0aGUgY29udGVudCBhcmVhIGlmIG5lY2Vzc2FyeVxuXHRcblx0XHQvLyBDcmVhdGUgYSBzY3JvbGxhYmxlIHBhbmVsIGZvciBqb3VybmFsIGVudHJpZXNcblx0XHRjb25zdCBwYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHBhbmVsLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1qb3VybmFsLXBhbmVsJyk7XG5cblx0XG5cdFx0Ly8gQWRkIGNvbnRlbnQgZm9yIGVhY2ggam91cm5hbCBmaWxlXG5cdFx0Zm9yIChjb25zdCBmaWxlIG9mIGpvdXJuYWxGaWxlcykge1xuXHRcdFx0Y29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdFx0dGhpcy5hZGRKb3VybmFsVG9QYW5lbChwYW5lbCwgZmlsZSwgZmlsZUNvbnRlbnQpO1xuXHRcdH1cblx0XG5cdFx0Ly8gQXBwZW5kIHRoZSBjdXN0b20gcGFuZWwgdG8gdGhlIGxlYWYncyBjb250YWluZXIgZWxlbWVudFxuXHRcdGNvbnRlbnRFbGVtZW50LmFwcGVuZENoaWxkKHBhbmVsKTtcblx0fVxuXG5cdC8vIHx8IC0tLSBEZXRhaWxlZCBVSSBjcmVhdGlvbi91cGRhdGUgLS0tXG5cdFxuXHQvLyBIZWxwZXIgZnVuY3Rpb24gdG8gYWRkIGVhY2ggam91cm5hbCBlbnRyeSB0byB0aGUgcGFuZWxcblx0YWRkSm91cm5hbFRvUGFuZWwocGFuZWw6IEhUTUxFbGVtZW50LCBmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nKSB7XG5cdFx0Y29uc3Qgam91cm5hbENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdGpvdXJuYWxDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnam91cm5hbC1lbnRyeScpO1xuXG5cdFx0Ly8gQWRkIGEgaGVhZGVyIGZvciB0aGUgam91cm5hbCBlbnRyeVxuXHRcdGNvbnN0IGpvdXJuYWxFbnRyeUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdGpvdXJuYWxFbnRyeUhlYWRlci5jbGFzc0xpc3QuYWRkKCdqb3VybmFsLWVudHJ5LWhlYWRlcicpO1xuXHRcdHBhbmVsLmFwcGVuZENoaWxkKGpvdXJuYWxFbnRyeUhlYWRlcik7XG5cblx0XHQvLyBDcmVhdGUgdGhlIHRvZ2dsZSBidXR0b25cblx0XHRjb25zdCB0b2dnbGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcblx0XHR0b2dnbGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnY29sbGFwc2libGUtdG9nZ2xlJyk7XG5cdFx0dG9nZ2xlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3RvZ2dsZS1leHBhbmRlZCcpO1xuXHRcdGpvdXJuYWxFbnRyeUhlYWRlci5hcHBlbmRDaGlsZCh0b2dnbGVCdXR0b24pO1xuXG5cdFx0Ly8gQWRkIGEgbGluayBmb3IgdGhlIGpvdXJuYWwgZW50cnkgdGl0bGUgbGVhZGluZyB0byB0aGUgb3JpZ2luYWwgZmlsZVxuXHRcdGNvbnN0IGpvdXJuYWxFbnRyeVRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcblx0XHRjb25zdCBqb3VybmFsRW50cnlMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG5cdFx0am91cm5hbEVudHJ5TGluay50ZXh0Q29udGVudCA9IGZpbGUuYmFzZW5hbWU7XG5cdFx0am91cm5hbEVudHJ5TGluay5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG5cblx0XHQvLyBPcGVuIGZpbGUgd2hlbiBjbGlja2luZyBvbiB0aXRsZVxuXHRcdGpvdXJuYWxFbnRyeUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGUuYmFzZW5hbWUsIGZpbGUucGF0aCk7XG5cdFx0fSk7XG5cblx0XHRqb3VybmFsRW50cnlUaXRsZS5hcHBlbmRDaGlsZChqb3VybmFsRW50cnlMaW5rKTtcblx0XHRqb3VybmFsRW50cnlIZWFkZXIuYXBwZW5kQ2hpbGQoam91cm5hbEVudHJ5VGl0bGUpO1xuXG5cdFx0Ly8gQ3JlYXRlIHRoZSBjb2xsYXBzaWJsZSBjb250ZW50IGFyZWFcblx0XHRjb25zdCBjb2xsYXBzaWJsZUNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRjb2xsYXBzaWJsZUNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnY29sbGFwc2libGUtY29udGVudCcpO1xuXHRcdGNvbGxhcHNpYmxlQ29udGVudC5jbGFzc0xpc3QuYWRkKCdjb250ZW50LWV4cGFuZGVkJyk7XG5cblx0XHRwYW5lbC5hcHBlbmRDaGlsZChjb2xsYXBzaWJsZUNvbnRlbnQpO1xuXG5cdFx0Ly8gQ3JlYXRlIGFuIGVkaXRhYmxlIHRleHRhcmVhIGZvciB0aGUgZmlsZSBjb250ZW50XG5cdFx0Y29uc3QgZWRpdGFibGVDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcblx0XHRlZGl0YWJsZUNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnZWRpdGFibGUtY29udGVudCcpO1xuXHRcdGVkaXRhYmxlQ29udGVudC52YWx1ZSA9IGNvbnRlbnQ7XG5cblx0XHRjb2xsYXBzaWJsZUNvbnRlbnQuYXBwZW5kQ2hpbGQoZWRpdGFibGVDb250ZW50KTtcblxuXHRcdC8vIEFkZCBldmVudCBsaXN0ZW5lciB0byB0b2dnbGUgdGhlIHBhbmVsIG9uIGJ1dHRvbiBjbGlja1xuXHRcdHRvZ2dsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRvZ2dsZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCd0b2dnbGUtZXhwYW5kZWQnKTtcblx0XHRcdGNvbGxhcHNpYmxlQ29udGVudC5jbGFzc0xpc3QudG9nZ2xlKCdjb250ZW50LWV4cGFuZGVkJyk7XG5cdFx0XHRjb25zb2xlLmxvZygnZWRpdGFibGUgY29udGVudCBzY3JvbGwgaGVpZ2h0OicsIGVkaXRhYmxlQ29udGVudC5zY3JvbGxIZWlnaHQpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gU2F2ZSBlZGl0cyB0byB0aGUgb3JpZ2luYWwgZmlsZSB3aGVuIHRoZSBjb250ZW50IGNoYW5nZXNcblx0XHRlZGl0YWJsZUNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBhc3luYyAoKSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgZWRpdGFibGVDb250ZW50LnZhbHVlKTtcblx0XHR9KTtcblxuXHRcdGpvdXJuYWxDb250YWluZXIuYXBwZW5kQ2hpbGQoZWRpdGFibGVDb250ZW50KTtcblx0XHRjb2xsYXBzaWJsZUNvbnRlbnQuYXBwZW5kQ2hpbGQoam91cm5hbENvbnRhaW5lcik7ICAvLyBBcHBlbmQgam91cm5hbCBlbnRyeSB0byB0aGUgY29sbGFwc2libGUgcGFuZWxcblxuXHRcdGNvbnN0IGhvcml6b250YWxSdWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaHInKTtcblx0XHRob3Jpem9udGFsUnVsZS5jbGFzc0xpc3QuYWRkKCdqb3VybmFsLWhvcml6b250YWwtaHInKTtcblx0XHRwYW5lbC5hcHBlbmRDaGlsZChob3Jpem9udGFsUnVsZSk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblx0fVxuXG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn1cblxuY2xhc3MgU2FtcGxlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLnNldFRleHQoJ1dvYWghJyk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5jbGFzcyBTYW1wbGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogam91cm5hbGluZ1BsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBqb3VybmFsaW5nUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdTZXR0aW5nICMxJylcblx0XHRcdC5zZXREZXNjKCdJdFxcJ3MgYSBzZWNyZXQnKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBzZWNyZXQnKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbGluZ1BsdWdpblNldHRpbmcpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5qb3VybmFsaW5nUGx1Z2luU2V0dGluZyA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cdH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFBbUc7QUFPbkcsSUFBTSxtQkFBNkM7QUFBQSxFQUNsRCx5QkFBeUI7QUFDMUI7QUFFQSxJQUFxQixtQkFBckIsY0FBOEMsdUJBQU87QUFBQSxFQUdwRCxNQUFNLFNBQVM7QUFDZCxVQUFNLEtBQUssYUFBYTtBQUd4QixVQUFNLGVBQWUsS0FBSyxjQUFjLGlCQUFpQixZQUFZLE9BQU8sUUFBb0I7QUFDL0YsWUFBTSxLQUFLLG1CQUFtQjtBQUFBLElBQy9CLENBQUM7QUFFRCxpQkFBYSxTQUFTLHdCQUF3QjtBQUc5QyxVQUFNLGtCQUFrQixLQUFLLGlCQUFpQjtBQUM5QyxvQkFBZ0IsUUFBUSxpQkFBaUI7QUFHekMsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU07QUFDZixhQUFLLG1CQUFtQjtBQUFBLE1BQ3pCO0FBQUEsSUFDRCxDQUFDO0FBRUQsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixnQkFBZ0IsQ0FBQyxRQUFnQixTQUF1QjtBQUN2RCxlQUFPLGlCQUFpQix1QkFBdUI7QUFBQSxNQUNoRDtBQUFBLElBQ0QsQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ2YsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sZUFBZSxDQUFDLGFBQXNCO0FBRXJDLGNBQU0sZUFBZSxLQUFL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
