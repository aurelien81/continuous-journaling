/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => journalingPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  journalingPluginSetting: "default"
};
var journalingPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    const ribbonIconEl = this.addRibbonIcon("notebook-text", "Journals", async (evt) => {
      await this.showJournalsInLeaf();
    });
    ribbonIconEl.addClass("my-plugin-ribbon-class");
    const statusBarItemEl = this.addStatusBarItem();
    statusBarItemEl.setText("Status Bar Text");
    this.addCommand({
      id: "open-journal-page",
      name: "Open Journal Page",
      callback: () => {
        this.showJournalsInLeaf();
      }
    });
    this.addCommand({
      id: "sample-editor-command",
      name: "Sample editor command",
      editorCallback: (editor, view) => {
        editor.replaceSelection("Sample Editor Command");
      }
    });
    this.addCommand({
      id: "open-sample-modal-complex",
      name: "Open sample modal (complex)",
      checkCallback: (checking) => {
        const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
        if (markdownView) {
          if (!checking) {
            new SampleModal(this.app).open();
          }
          return true;
        }
      }
    });
  }
  // || --- journal files management ---
  // Find all journal/daily note files
  getJournalFiles() {
    const files = this.app.vault.getMarkdownFiles();
    const journalFiles = files.filter((file) => this.isJournalFile(file));
    return journalFiles;
  }
  // Check if a file is a journal file (based on file name or folder)
  isJournalFile(file) {
    const dailyNotePattern = /^\d{4}-\d{2}-\d{2}$/;
    return dailyNotePattern.test(file.basename);
  }
  // || --- Panel creation inside new tab ---
  async showJournalsInLeaf() {
    const journalFiles = this.getJournalFiles();
    if (journalFiles.length === 0) {
      new import_obsidian.Notice("No journal files found.");
      return;
    }
    const leaf = this.app.workspace.getLeaf(true);
    await leaf.setViewState({
      type: "markdown",
      // Set to markdown view type
      active: true
    });
    const contentElement = leaf.view.containerEl;
    contentElement.empty();
    const panel = document.createElement("div");
    panel.classList.add("custom-journal-panel");
    for (const file of journalFiles) {
      const fileContent = await this.app.vault.read(file);
      this.addJournalToPanel(panel, file, fileContent);
    }
    contentElement.appendChild(panel);
  }
  // || --- Detailed UI creation/update ---
  // Helper function to add each journal entry to the panel
  addJournalToPanel(panel, file, content) {
    const journalEntryHeader = document.createElement("div");
    journalEntryHeader.classList.add("journal-entry-header");
    panel.appendChild(journalEntryHeader);
    const toggleButton = document.createElement("button");
    toggleButton.classList.add("collapsible-toggle");
    toggleButton.classList.add("toggle-expanded");
    journalEntryHeader.appendChild(toggleButton);
    const journalEntryTitle = document.createElement("h3");
    const journalEntryLink = document.createElement("a");
    journalEntryLink.textContent = file.basename;
    journalEntryLink.style.cursor = "pointer";
    journalEntryTitle.appendChild(journalEntryLink);
    journalEntryHeader.appendChild(journalEntryTitle);
    journalEntryLink.addEventListener("click", () => {
      this.app.workspace.openLinkText(file.basename, file.path);
    });
    const collapsibleContent = document.createElement("div");
    collapsibleContent.classList.add("collapsible-content");
    collapsibleContent.classList.add("content-expanded");
    panel.appendChild(collapsibleContent);
    const editableContent = document.createElement("textarea");
    editableContent.classList.add("editable-content");
    editableContent.value = content;
    collapsibleContent.appendChild(editableContent);
    requestAnimationFrame(() => {
      editableContent.style.height = editableContent.scrollHeight + "px";
    });
    editableContent.addEventListener("input", (e) => {
      editableContent.style.height = "auto";
      editableContent.style.height = editableContent.scrollHeight + "px";
    });
    toggleButton.addEventListener("click", () => {
      toggleButton.classList.toggle("toggle-expanded");
      collapsibleContent.classList.toggle("content-expanded");
    });
    editableContent.addEventListener("input", async () => {
      await this.app.vault.modify(file, editableContent.value);
    });
    const horizontalRule = document.createElement("hr");
    horizontalRule.classList.add("journal-horizontal-hr");
    panel.appendChild(horizontalRule);
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var SampleModal = class extends import_obsidian.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.setText("Woah!");
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgUGx1Z2luLCBURmlsZSwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IHRleHQgfSBmcm9tICdzdHJlYW0vY29uc3VtZXJzJztcblxuaW50ZXJmYWNlIGpvdXJuYWxpbmdQbHVnaW5TZXR0aW5ncyB7XG5cdGpvdXJuYWxpbmdQbHVnaW5TZXR0aW5nOiBzdHJpbmc7XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IGpvdXJuYWxpbmdQbHVnaW5TZXR0aW5ncyA9IHtcblx0am91cm5hbGluZ1BsdWdpblNldHRpbmc6ICdkZWZhdWx0J1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBqb3VybmFsaW5nUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IGpvdXJuYWxpbmdQbHVnaW5TZXR0aW5ncztcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdC8vIFRoaXMgY3JlYXRlcyBhbiBpY29uIGluIHRoZSBsZWZ0IHJpYmJvbi5cblx0XHRjb25zdCByaWJib25JY29uRWwgPSB0aGlzLmFkZFJpYmJvbkljb24oJ25vdGVib29rLXRleHQnLCAnSm91cm5hbHMnLCBhc3luYyAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG5cdFx0XHRhd2FpdCB0aGlzLnNob3dKb3VybmFsc0luTGVhZigpO1xuXHRcdH0pO1xuXHRcdC8vIFBlcmZvcm0gYWRkaXRpb25hbCB0aGluZ3Mgd2l0aCB0aGUgcmliYm9uXG5cdFx0cmliYm9uSWNvbkVsLmFkZENsYXNzKCdteS1wbHVnaW4tcmliYm9uLWNsYXNzJyk7XG5cblx0XHQvLyBUaGlzIGFkZHMgYSBzdGF0dXMgYmFyIGl0ZW0gdG8gdGhlIGJvdHRvbSBvZiB0aGUgYXBwLiBEb2VzIG5vdCB3b3JrIG9uIG1vYmlsZSBhcHBzLlxuXHRcdGNvbnN0IHN0YXR1c0Jhckl0ZW1FbCA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuXHRcdHN0YXR1c0Jhckl0ZW1FbC5zZXRUZXh0KCdTdGF0dXMgQmFyIFRleHQnKTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHNpbXBsZSBjb21tYW5kIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBhbnl3aGVyZVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ29wZW4tam91cm5hbC1wYWdlJyxcblx0XHRcdG5hbWU6ICdPcGVuIEpvdXJuYWwgUGFnZScsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHR0aGlzLnNob3dKb3VybmFsc0luTGVhZigpO1xuXHRcdFx0fSxcblx0XHR9KTtcblx0XHQvLyBUaGlzIGFkZHMgYW4gZWRpdG9yIGNvbW1hbmQgdGhhdCBjYW4gcGVyZm9ybSBzb21lIG9wZXJhdGlvbiBvbiB0aGUgY3VycmVudCBlZGl0b3IgaW5zdGFuY2Vcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdzYW1wbGUtZWRpdG9yLWNvbW1hbmQnLFxuXHRcdFx0bmFtZTogJ1NhbXBsZSBlZGl0b3IgY29tbWFuZCcsXG5cdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oJ1NhbXBsZSBFZGl0b3IgQ29tbWFuZCcpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdC8vIFRoaXMgYWRkcyBhIGNvbXBsZXggY29tbWFuZCB0aGF0IGNhbiBjaGVjayB3aGV0aGVyIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBhcHAgYWxsb3dzIGV4ZWN1dGlvbiBvZiB0aGUgY29tbWFuZFxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ29wZW4tc2FtcGxlLW1vZGFsLWNvbXBsZXgnLFxuXHRcdFx0bmFtZTogJ09wZW4gc2FtcGxlIG1vZGFsIChjb21wbGV4KScsXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0Ly8gQ29uZGl0aW9ucyB0byBjaGVja1xuXHRcdFx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdFx0XHRpZiAobWFya2Rvd25WaWV3KSB7XG5cdFx0XHRcdFx0Ly8gSWYgY2hlY2tpbmcgaXMgdHJ1ZSwgd2UncmUgc2ltcGx5IFwiY2hlY2tpbmdcIiBpZiB0aGUgY29tbWFuZCBjYW4gYmUgcnVuLlxuXHRcdFx0XHRcdC8vIElmIGNoZWNraW5nIGlzIGZhbHNlLCB0aGVuIHdlIHdhbnQgdG8gYWN0dWFsbHkgcGVyZm9ybSB0aGUgb3BlcmF0aW9uLlxuXHRcdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHRcdG5ldyBTYW1wbGVNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFRoaXMgY29tbWFuZCB3aWxsIG9ubHkgc2hvdyB1cCBpbiBDb21tYW5kIFBhbGV0dGUgd2hlbiB0aGUgY2hlY2sgZnVuY3Rpb24gcmV0dXJucyB0cnVlXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIHx8IC0tLSBqb3VybmFsIGZpbGVzIG1hbmFnZW1lbnQgLS0tXG5cblx0Ly8gRmluZCBhbGwgam91cm5hbC9kYWlseSBub3RlIGZpbGVzXG5cdGdldEpvdXJuYWxGaWxlcygpOiBURmlsZVtdIHtcblx0XHQvLyBHZXQgYWxsIG1hcmtkb3duIGZpbGVzIGluIHRoZSB2YXVsdFxuXHRcdGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG5cdFx0Ly8gRmlsdGVyIGZpbGVzIHRoYXQgZm9sbG93IGEgZGFpbHkgbm90ZSBwYXR0ZXJuXG5cdFx0Y29uc3Qgam91cm5hbEZpbGVzID0gZmlsZXMuZmlsdGVyKChmaWxlKSA9PiB0aGlzLmlzSm91cm5hbEZpbGUoZmlsZSkpO1xuXHRcdHJldHVybiBqb3VybmFsRmlsZXM7XG5cdH1cblxuXHQvLyBDaGVjayBpZiBhIGZpbGUgaXMgYSBqb3VybmFsIGZpbGUgKGJhc2VkIG9uIGZpbGUgbmFtZSBvciBmb2xkZXIpXG5cdGlzSm91cm5hbEZpbGUoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcblx0XHQvLyBBZGp1c3QgdGhlIHBhdHRlcm4gb3IgZm9sZGVyIGNoZWNrIGRlcGVuZGluZyBvbiB5b3VyIGRhaWx5IG5vdGUgc2V0dXBcblx0XHRjb25zdCBkYWlseU5vdGVQYXR0ZXJuID0gL15cXGR7NH0tXFxkezJ9LVxcZHsyfSQvOyAvLyBNYXRjaGVzIFlZWVktTU0tRERcblx0XHRyZXR1cm4gZGFpbHlOb3RlUGF0dGVybi50ZXN0KGZpbGUuYmFzZW5hbWUpO1xuXHR9XG5cblx0Ly8gfHwgLS0tIFBhbmVsIGNyZWF0aW9uIGluc2lkZSBuZXcgdGFiIC0tLVxuXG5cdGFzeW5jIHNob3dKb3VybmFsc0luTGVhZigpIHtcblx0XHRjb25zdCBqb3VybmFsRmlsZXMgPSB0aGlzLmdldEpvdXJuYWxGaWxlcygpO1xuXHRcblx0XHRpZiAoam91cm5hbEZpbGVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0bmV3IE5vdGljZSgnTm8gam91cm5hbCBmaWxlcyBmb3VuZC4nKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFxuXHRcdC8vIENyZWF0ZSBhIG5ldyBsZWFmIChvcGVucyBhIG5ldyB0YWIpXG5cdFx0Y29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xuXHRcblx0XHQvLyBTZXQgdGhlIHZpZXcgc3RhdGUgdG8gTWFya2Rvd24gdG8gYWNjZXNzIGNvbnRhaW5lckVsXG5cdFx0YXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuXHRcdFx0dHlwZTogXCJtYXJrZG93blwiLCAvLyBTZXQgdG8gbWFya2Rvd24gdmlldyB0eXBlXG5cdFx0XHRhY3RpdmU6IHRydWVcblx0XHR9KTtcblxuXHRcdC8vIEFjY2VzcyB0aGUgY29udGFpbmVyIGVsZW1lbnQgb2YgdGhlIG1hcmtkb3duIHZpZXdcblx0XHRjb25zdCBjb250ZW50RWxlbWVudCA9IGxlYWYudmlldy5jb250YWluZXJFbDsgLy8gVXNlIGNvbnRhaW5lckVsIHRvIGFjY2VzcyB0aGUgZWxlbWVudFxuXHRcblx0XHRjb250ZW50RWxlbWVudC5lbXB0eSgpOyAvLyBDbGVhciB0aGUgY29udGVudCBhcmVhIGlmIG5lY2Vzc2FyeVxuXHRcblx0XHQvLyBDcmVhdGUgYSBzY3JvbGxhYmxlIHBhbmVsIGZvciBqb3VybmFsIGVudHJpZXNcblx0XHRjb25zdCBwYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHBhbmVsLmNsYXNzTGlzdC5hZGQoJ2N1c3RvbS1qb3VybmFsLXBhbmVsJyk7XG5cblx0XG5cdFx0Ly8gQWRkIGNvbnRlbnQgZm9yIGVhY2ggam91cm5hbCBmaWxlXG5cdFx0Zm9yIChjb25zdCBmaWxlIG9mIGpvdXJuYWxGaWxlcykge1xuXHRcdFx0Y29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuXHRcdFx0dGhpcy5hZGRKb3VybmFsVG9QYW5lbChwYW5lbCwgZmlsZSwgZmlsZUNvbnRlbnQpO1xuXHRcdH1cblx0XG5cdFx0Ly8gQXBwZW5kIHRoZSBjdXN0b20gcGFuZWwgdG8gdGhlIGxlYWYncyBjb250YWluZXIgZWxlbWVudFxuXHRcdGNvbnRlbnRFbGVtZW50LmFwcGVuZENoaWxkKHBhbmVsKTtcblx0fVxuXG5cdC8vIHx8IC0tLSBEZXRhaWxlZCBVSSBjcmVhdGlvbi91cGRhdGUgLS0tXG5cdFxuXHQvLyBIZWxwZXIgZnVuY3Rpb24gdG8gYWRkIGVhY2ggam91cm5hbCBlbnRyeSB0byB0aGUgcGFuZWxcblx0YWRkSm91cm5hbFRvUGFuZWwocGFuZWw6IEhUTUxFbGVtZW50LCBmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nKSB7XG5cdFx0Ly8gQWRkIGEgaGVhZGVyIGZvciB0aGUgam91cm5hbCBlbnRyeVxuXHRcdGNvbnN0IGpvdXJuYWxFbnRyeUhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdGpvdXJuYWxFbnRyeUhlYWRlci5jbGFzc0xpc3QuYWRkKCdqb3VybmFsLWVudHJ5LWhlYWRlcicpO1xuXHRcdHBhbmVsLmFwcGVuZENoaWxkKGpvdXJuYWxFbnRyeUhlYWRlcik7XG5cblx0XHQvLyBDcmVhdGUgdGhlIHRvZ2dsZSBidXR0b25cblx0XHRjb25zdCB0b2dnbGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcblx0XHR0b2dnbGVCdXR0b24uY2xhc3NMaXN0LmFkZCgnY29sbGFwc2libGUtdG9nZ2xlJyk7XG5cdFx0dG9nZ2xlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3RvZ2dsZS1leHBhbmRlZCcpO1xuXHRcdGpvdXJuYWxFbnRyeUhlYWRlci5hcHBlbmRDaGlsZCh0b2dnbGVCdXR0b24pO1xuXG5cdFx0Ly8gQWRkIGEgbGluayBmb3IgdGhlIGpvdXJuYWwgZW50cnkgdGl0bGUgbGVhZGluZyB0byB0aGUgb3JpZ2luYWwgZmlsZVxuXHRcdGNvbnN0IGpvdXJuYWxFbnRyeVRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcblx0XHRjb25zdCBqb3VybmFsRW50cnlMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG5cdFx0am91cm5hbEVudHJ5TGluay50ZXh0Q29udGVudCA9IGZpbGUuYmFzZW5hbWU7XG5cdFx0am91cm5hbEVudHJ5TGluay5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG5cdFx0am91cm5hbEVudHJ5VGl0bGUuYXBwZW5kQ2hpbGQoam91cm5hbEVudHJ5TGluayk7XG5cdFx0am91cm5hbEVudHJ5SGVhZGVyLmFwcGVuZENoaWxkKGpvdXJuYWxFbnRyeVRpdGxlKTtcblxuXHRcdC8vIE9wZW4gZmlsZSB3aGVuIGNsaWNraW5nIG9uIHRpdGxlXG5cdFx0am91cm5hbEVudHJ5TGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZmlsZS5iYXNlbmFtZSwgZmlsZS5wYXRoKTtcblx0XHR9KTtcblxuXHRcdC8vIENyZWF0ZSB0aGUgY29sbGFwc2libGUgY29udGVudCBhcmVhXG5cdFx0Y29uc3QgY29sbGFwc2libGVDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0Y29sbGFwc2libGVDb250ZW50LmNsYXNzTGlzdC5hZGQoJ2NvbGxhcHNpYmxlLWNvbnRlbnQnKTtcblx0XHRjb2xsYXBzaWJsZUNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnY29udGVudC1leHBhbmRlZCcpO1xuXHRcdHBhbmVsLmFwcGVuZENoaWxkKGNvbGxhcHNpYmxlQ29udGVudCk7XG5cblx0XHQvLyBDcmVhdGUgYW4gZWRpdGFibGUgdGV4dGFyZWEgZm9yIHRoZSBmaWxlIGNvbnRlbnRcblx0XHRjb25zdCBlZGl0YWJsZUNvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuXHRcdGVkaXRhYmxlQ29udGVudC5jbGFzc0xpc3QuYWRkKCdlZGl0YWJsZS1jb250ZW50Jyk7XG5cdFx0ZWRpdGFibGVDb250ZW50LnZhbHVlID0gY29udGVudDtcblx0XHRjb2xsYXBzaWJsZUNvbnRlbnQuYXBwZW5kQ2hpbGQoZWRpdGFibGVDb250ZW50KTtcblxuXHRcdC8vIFVzZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgdG8gZW5zdXJlIHJlbmRlcmluZyBpcyBkb25lIGZvciBlYWNoIGVsZW1lbnRcblx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0ZWRpdGFibGVDb250ZW50LnN0eWxlLmhlaWdodCA9IGVkaXRhYmxlQ29udGVudC5zY3JvbGxIZWlnaHQgKyAncHgnO1xuXHRcdH0pO1xuXG5cdFx0Ly8gRXZlbnQgbGlzdGVuZXIgdG8gYWRqdXN0IHRoZSBoZWlnaHQgb2YgdGhlIHRleHRhcmVhIG9uIGlucHV0XG5cdFx0ZWRpdGFibGVDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZSA9PiB7XG5cdFx0XHRlZGl0YWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuXHRcdFx0ZWRpdGFibGVDb250ZW50LnN0eWxlLmhlaWdodCA9IGVkaXRhYmxlQ29udGVudC5zY3JvbGxIZWlnaHQgKyAncHgnO1xuXHRcdH0pO1xuXG5cdFx0Ly8gQWRkIGV2ZW50IGxpc3RlbmVyIHRvIHRvZ2dsZSB0aGUgcGFuZWwgb24gYnV0dG9uIGNsaWNrXG5cdFx0dG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0dG9nZ2xlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3RvZ2dsZS1leHBhbmRlZCcpO1xuXHRcdFx0Y29sbGFwc2libGVDb250ZW50LmNsYXNzTGlzdC50b2dnbGUoJ2NvbnRlbnQtZXhwYW5kZWQnKTtcblx0XHR9KTtcblxuXHRcdC8vIFNhdmUgZWRpdHMgdG8gdGhlIG9yaWdpbmFsIGZpbGUgd2hlbiB0aGUgY29udGVudCBjaGFuZ2VzXG5cdFx0ZWRpdGFibGVDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGVkaXRhYmxlQ29udGVudC52YWx1ZSk7XG5cdFx0fSk7XG5cblx0XHRjb25zdCBob3Jpem9udGFsUnVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hyJyk7XG5cdFx0aG9yaXpvbnRhbFJ1bGUuY2xhc3NMaXN0LmFkZCgnam91cm5hbC1ob3Jpem9udGFsLWhyJyk7XG5cdFx0cGFuZWwuYXBwZW5kQ2hpbGQoaG9yaXpvbnRhbFJ1bGUpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdH1cblxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59XG5cbmNsYXNzIFNhbXBsZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5zZXRUZXh0KCdXb2FoIScpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuY2xhc3MgU2FtcGxlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IGpvdXJuYWxpbmdQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogam91cm5hbGluZ1BsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnU2V0dGluZyAjMScpXG5cdFx0XHQuc2V0RGVzYygnSXRcXCdzIGEgc2VjcmV0Jylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHlvdXIgc2VjcmV0Jylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmpvdXJuYWxpbmdQbHVnaW5TZXR0aW5nKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbGluZ1BsdWdpblNldHRpbmcgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXHR9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsc0JBQW1HO0FBT25HLElBQU0sbUJBQTZDO0FBQUEsRUFDbEQseUJBQXlCO0FBQzFCO0FBRUEsSUFBcUIsbUJBQXJCLGNBQThDLHVCQUFPO0FBQUEsRUFHcEQsTUFBTSxTQUFTO0FBQ2QsVUFBTSxLQUFLLGFBQWE7QUFHeEIsVUFBTSxlQUFlLEtBQUssY0FBYyxpQkFBaUIsWUFBWSxPQUFPLFFBQW9CO0FBQy9GLFlBQU0sS0FBSyxtQkFBbUI7QUFBQSxJQUMvQixDQUFDO0FBRUQsaUJBQWEsU0FBUyx3QkFBd0I7QUFHOUMsVUFBTSxrQkFBa0IsS0FBSyxpQkFBaUI7QUFDOUMsb0JBQWdCLFFBQVEsaUJBQWlCO0FBR3pDLFNBQUssV0FBVztBQUFBLE1BQ2YsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sVUFBVSxNQUFNO0FBQ2YsYUFBSyxtQkFBbUI7QUFBQSxNQUN6QjtBQUFBLElBQ0QsQ0FBQztBQUVELFNBQUssV0FBVztBQUFBLE1BQ2YsSUFBSTtBQUFBLE1BQ0osTUFBTTtBQUFBLE1BQ04sZ0JBQWdCLENBQUMsUUFBZ0IsU0FBdUI7QUFDdkQsZUFBTyxpQkFBaUIsdUJBQXVCO0FBQUEsTUFDaEQ7QUFBQSxJQUNELENBQUM7QUFF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
