/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => JournalingPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  journalFolder: "journals",
  dateFormat: "YYYY-MM-DD",
  sortDirection: "newest-first",
  defaultExpandEntries: true,
  folderFormat: "",
  entriesPerBatch: 10
};
var JournalingSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Continuous Journaling Settings" });
    new import_obsidian.Setting(containerEl).setName("Journal Folder").setDesc("Specify the folder where journal entries will be stored").addText((text) => text.setPlaceholder("journals").setValue(this.plugin.settings.journalFolder).onChange(async (value) => {
      this.plugin.settings.journalFolder = value.replace(/^\/+|\/+$/g, "");
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Date Format").setDesc("Format for journal filenames (YYYY-MM-DD recommended)").addText((text) => text.setPlaceholder("YYYY-MM-DD").setValue(this.plugin.settings.dateFormat).onChange(async (value) => {
      this.plugin.settings.dateFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Sort Direction").setDesc("How to sort journal entries in the continuous view").addDropdown((dropdown) => dropdown.addOption("newest-first", "Newest entries first").addOption("oldest-first", "Oldest entries first").setValue(this.plugin.settings.sortDirection).onChange(async (value) => {
      this.plugin.settings.sortDirection = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Default Expand Entries").setDesc("Automatically expand entries when opening the journals view").addToggle((toggle) => toggle.setValue(this.plugin.settings.defaultExpandEntries).onChange(async (value) => {
      this.plugin.settings.defaultExpandEntries = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Folder Structure Format (Optional)").setDesc('Format pattern for organizing journal entries in subfolders.\nExamples: empty for flat structure, "YYYY" for yearly folders, "YYYY/MM" for monthly folders.').addText((text) => text.setPlaceholder("YYYY/MM").setValue(this.plugin.settings.folderFormat).onChange(async (value) => {
      this.plugin.settings.folderFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Entries Per Page").setDesc("Number of journal entries to load at once").addDropdown((dropdown) => dropdown.addOption("10", "10 entries").addOption("25", "25 entries").addOption("50", "50 entries").setValue(this.plugin.settings.entriesPerBatch.toString()).onChange(async (value) => {
      this.plugin.settings.entriesPerBatch = parseInt(value);
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Migrate Journal Entries").setDesc("Move existing journal entries to the folder structure defined by the folder format pattern.").addButton((button) => button.setButtonText("Migrate Entries").setCta().onClick(async () => {
      await this.plugin.migrateJournalEntries();
    }));
    new import_obsidian.Setting(containerEl).setName("Delete Empty Journal Entries").setDesc("Delete all EMPTY journal entries. This action cannot be undone.").addButton((button) => button.setButtonText("Delete Empty Entries").setCta().setClass("journal-delete-button").onClick(async () => {
      await this.plugin.deleteEmptyJournalEntries();
    }));
  }
};

// src/journal-view.ts
var import_obsidian3 = require("obsidian");

// src/utils/date-utils.ts
function getTodayDate() {
  const today = new Date();
  return formatDateString(today);
}
function formatDateString(date) {
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, "0");
  const day = String(date.getDate()).padStart(2, "0");
  return `${year}-${month}-${day}`;
}
function formatDateForDisplay(dateString) {
  const date = new Date(dateString);
  const dateFormatOptions = {
    month: "short",
    year: "numeric",
    day: "numeric"
  };
  const formattedDate = new Intl.DateTimeFormat("en-US", dateFormatOptions).format(date);
  const day = date.getDate();
  const daySuffix = getDaySuffix(day);
  const parts = formattedDate.split(" ");
  return `${parts[0]} ${day}${daySuffix}, ${parts[2]}`;
}
function getDaySuffix(day) {
  if (day > 3 && day < 21)
    return "th";
  switch (day % 10) {
    case 1:
      return "st";
    case 2:
      return "nd";
    case 3:
      return "rd";
    default:
      return "th";
  }
}
function isDateFormat(text) {
  return /^\d{4}-\d{2}-\d{2}$/.test(text);
}

// src/utils/file-utils.ts
var import_obsidian2 = require("obsidian");
function getFilePath(folder, filename) {
  if (folder) {
    return `${folder}/${filename}`;
  }
  return filename;
}
async function ensureFolder(app, folderPath) {
  if (!folderPath) {
    return true;
  }
  const folderExists = app.vault.getAbstractFileByPath(folderPath);
  if (folderExists && !(folderExists instanceof import_obsidian2.TFolder)) {
    new import_obsidian2.Notice(`Cannot create folder: "${folderPath}" exists but is not a folder`);
    return false;
  }
  if (!folderExists) {
    try {
      await app.vault.createFolder(folderPath);
      new import_obsidian2.Notice(`Created folder: ${folderPath}`);
      return true;
    } catch (error) {
      new import_obsidian2.Notice(`Failed to create folder: ${error}`);
      console.error("Failed to create folder:", error);
      return false;
    }
  }
  return true;
}
function getJournalFilePath(journalFolder, filename, folderFormat = "") {
  if (!folderFormat) {
    return getFilePath(journalFolder, filename);
  }
  const datePart = filename.split(".")[0];
  if (!isDateFormat(datePart)) {
    return getFilePath(journalFolder, filename);
  }
  const [year, month, day] = datePart.split("-").map((part) => parseInt(part));
  let formattedPath = folderFormat;
  formattedPath = formattedPath.replace("YYYY", year.toString());
  formattedPath = formattedPath.replace("MM", month.toString().padStart(2, "0"));
  formattedPath = formattedPath.replace("DD", day.toString().padStart(2, "0"));
  if (journalFolder) {
    return `${journalFolder}/${formattedPath}/${filename}`;
  }
  return `${formattedPath}/${filename}`;
}
async function ensureAllFolders(app, filePath) {
  const pathParts = filePath.split("/");
  const fileNameIndex = pathParts.length - 1;
  let currentFolder = "";
  for (let i = 0; i < fileNameIndex; i++) {
    if (currentFolder) {
      currentFolder += "/";
    }
    currentFolder += pathParts[i];
    if (!currentFolder)
      continue;
    if (!await ensureFolder(app, currentFolder)) {
      return false;
    }
  }
  return true;
}
async function getOrCreateJournalFile(app, journalFolder, filename, folderFormat = "", initialContent = "") {
  const filePath = getJournalFilePath(journalFolder, filename, folderFormat);
  if (!await ensureAllFolders(app, filePath)) {
    return null;
  }
  let file = app.vault.getAbstractFileByPath(filePath);
  if (file instanceof import_obsidian2.TFile) {
    return file;
  }
  try {
    file = await app.vault.create(filePath, initialContent);
    new import_obsidian2.Notice(`Created journal entry: ${filename}`);
    return file;
  } catch (error) {
    new import_obsidian2.Notice(`Failed to create journal entry: ${error}`);
    console.error("Failed to create journal entry:", error);
    return null;
  }
}
function isJournalFile(file, journalFolder, folderFormat) {
  const isDateBasename = isDateFormat(file.basename);
  if (!isDateBasename) {
    return false;
  }
  if (!journalFolder) {
    return true;
  }
  if (folderFormat) {
    const dateStr = file.basename.split(".")[0];
    const [year, month, day] = dateStr.split("-");
    let expectedPath = folderFormat;
    expectedPath = expectedPath.replace("YYYY", year);
    expectedPath = expectedPath.replace("MM", month);
    expectedPath = expectedPath.replace("DD", day);
    const expectedFullPath = `${journalFolder}/${expectedPath}`;
    return file.path.startsWith(expectedFullPath);
  }
  return file.path.startsWith(journalFolder + "/");
}
function getJournalFiles(app, journalFolder, folderFormat) {
  const files = app.vault.getMarkdownFiles();
  return files.filter((file) => isJournalFile(file, journalFolder, folderFormat));
}
function sortJournalFiles(files, sortDirection) {
  return files.sort((a, b) => {
    if (sortDirection === "newest-first") {
      return b.basename.localeCompare(a.basename);
    } else {
      return a.basename.localeCompare(b.basename);
    }
  });
}

// src/journal-view.ts
var JournalView = class {
  constructor(plugin) {
    this.activeEditor = null;
    // Simple lazy loading properties
    this.allFiles = [];
    this.currentBatch = 0;
    this.loadMoreButton = null;
    this.plugin = plugin;
    this.registerCleanup();
  }
  // Opens the continuous journal view in a new leaf
  async open() {
    const leaf = this.plugin.app.workspace.getLeaf(true);
    await leaf.setViewState({
      type: "markdown",
      active: true
    });
    const contentEl = leaf.view.containerEl;
    contentEl.empty();
    const panel = contentEl.createDiv({ cls: "custom-journal-panel" });
    const journalFiles = getJournalFiles(
      this.plugin.app,
      this.plugin.settings.journalFolder,
      this.plugin.settings.folderFormat
    );
    if (journalFiles.length === 0) {
      new import_obsidian3.Notice("No journal entries found.");
      panel.createEl("div", {
        cls: "journal-empty-state",
        text: "No journal entries found. Create one by clicking the journals icon in the ribbon."
      });
      return;
    }
    this.allFiles = sortJournalFiles(journalFiles, this.plugin.settings.sortDirection);
    this.currentBatch = 0;
    await this.loadBatch(panel);
    if (this.currentBatch * this.plugin.settings.entriesPerBatch < this.allFiles.length) {
      this.addLoadMoreButton(panel);
    }
  }
  // Load a batch of entries
  async loadBatch(panel) {
    const batchSize = this.plugin.settings.entriesPerBatch;
    const start = this.currentBatch * batchSize;
    const end = Math.min(start + batchSize, this.allFiles.length);
    panel.querySelectorAll(".journal-load-more-button").forEach((btn) => btn.remove());
    this.loadMoreButton = null;
    const filesToLoad = this.allFiles.slice(start, end);
    for (const file of filesToLoad) {
      try {
        const fileContent = await this.plugin.app.vault.read(file);
        this.addJournalEntry(panel, file, fileContent);
      } catch (error) {
        console.error(`Error reading file ${file.path}:`, error);
        this.addErrorMessage(panel, file.basename, error);
      }
    }
    this.currentBatch++;
    panel.querySelectorAll(".journal-load-more-button").forEach((btn) => btn.remove());
    if (this.currentBatch * this.plugin.settings.entriesPerBatch < this.allFiles.length) {
      this.addLoadMoreButton(panel);
    }
  }
  // Add a "Load More" button
  addLoadMoreButton(panel) {
    panel.querySelectorAll(".journal-load-more-button").forEach((btn) => btn.remove());
    const entriesPerBatch = this.plugin.settings.entriesPerBatch;
    this.loadMoreButton = panel.createEl("button", {
      cls: "journal-load-more-button",
      text: `Load ${entriesPerBatch} More Entries`
    });
    panel.appendChild(this.loadMoreButton);
    this.loadMoreButton.addEventListener("click", async () => {
      if (this.loadMoreButton) {
        this.loadMoreButton.textContent = "Loading...";
        this.loadMoreButton.setAttr("disabled", "true");
      }
      await this.loadBatch(panel);
    });
  }
  // Adds an error message to the panel when file reading fails
  addErrorMessage(panel, filename, error) {
    const errorDiv = panel.createDiv({ cls: "journal-entry journal-error" });
    const errorHeader = errorDiv.createDiv({ cls: "journal-entry-header" });
    errorHeader.createEl("h3", {
      cls: "journal-entry-title",
      text: `${filename} - Error`
    });
    const errorContent = errorDiv.createDiv({ cls: "journal-error-content" });
    errorContent.textContent = `Failed to load journal: ${error.message || error}`;
  }
  // Adds a journal entry to the panel
  addJournalEntry(panel, file, content) {
    const journalDate = file.basename;
    const journalEntry = panel.createDiv({ cls: "journal-entry" });
    const header = journalEntry.createDiv({ cls: "journal-entry-header" });
    const toggleButton = header.createEl("button", { cls: "collapsible-toggle" });
    if (this.plugin.settings.defaultExpandEntries) {
      toggleButton.addClass("toggle-expanded");
    }
    const title = header.createEl("h3", { cls: "journal-entry-title" });
    const titleLink = title.createEl("a", {
      cls: "journal-entry-link",
      text: formatDateForDisplay(journalDate)
    });
    titleLink.addEventListener("click", (event) => {
      event.preventDefault();
      this.plugin.app.workspace.openLinkText(file.basename, file.path);
    });
    const contentArea = journalEntry.createDiv({
      cls: "collapsible-content" + (this.plugin.settings.defaultExpandEntries ? " content-expanded" : "")
    });
    let currentContent = content;
    let isEditing = false;
    const renderedContent = contentArea.createDiv({
      cls: "rendered-content active-view"
    });
    const editableContent = contentArea.createEl("textarea", {
      cls: "editable-content",
      value: currentContent
    });
    const closeButton = contentArea.createEl("button", {
      cls: "journal-close-button",
      text: "Close"
    });
    closeButton.style.display = "none";
    const saveIndicator = contentArea.createDiv({
      cls: "journal-save-indicator",
      text: "Saved"
    });
    saveIndicator.style.display = "none";
    window.requestAnimationFrame(() => {
      editableContent.style.height = editableContent.scrollHeight + "px";
    });
    const renderContent = () => {
      renderedContent.empty();
      import_obsidian3.MarkdownRenderer.render(this.plugin.app, currentContent, renderedContent, file.path, this.plugin);
      this.makeHashtagsClickable(renderedContent);
    };
    renderContent();
    const enterEditMode = () => {
      isEditing = true;
      this.activeEditor = editableContent;
      editableContent.value = currentContent;
      renderedContent.classList.remove("active-view");
      editableContent.classList.add("active-view");
      closeButton.style.display = "block";
      editableContent.style.height = "auto";
      editableContent.style.height = editableContent.scrollHeight + "px";
      editableContent.focus();
    };
    const exitEditMode = async () => {
      if (isEditing) {
        currentContent = editableContent.value;
        await this.saveContentToFile(file, currentContent);
        renderContent();
        editableContent.classList.remove("active-view");
        closeButton.style.display = "none";
        renderedContent.classList.add("active-view");
        isEditing = false;
        if (this.activeEditor === editableContent) {
          this.activeEditor = null;
        }
      }
    };
    renderedContent.addEventListener("click", (event) => {
      const target = event.target;
      if (target.tagName === "A" || target.closest("a") || target.classList.contains("cm-hashtag") || target.closest(".cm-hashtag")) {
        return;
      }
      enterEditMode();
    });
    closeButton.addEventListener("click", () => {
      exitEditMode();
    });
    editableContent.addEventListener("keydown", (event) => {
      if (event.key === "Escape") {
        exitEditMode();
      }
    });
    editableContent.addEventListener("input", () => {
      editableContent.style.height = "auto";
      editableContent.style.height = editableContent.scrollHeight + "px";
      currentContent = editableContent.value;
    });
    let saveTimeout = null;
    editableContent.addEventListener("input", () => {
      saveIndicator.style.display = "block";
      saveIndicator.classList.remove("saved");
      saveIndicator.classList.add("saving");
      saveIndicator.textContent = "Saving...";
      if (saveTimeout) {
        clearTimeout(saveTimeout);
      }
      saveTimeout = setTimeout(async () => {
        await this.saveContentToFile(file, currentContent);
        saveIndicator.classList.remove("saving");
        saveIndicator.classList.add("saved");
        saveIndicator.textContent = "Saved";
        setTimeout(() => {
          if (saveIndicator.classList.contains("saved")) {
            saveIndicator.style.display = "none";
          }
        }, 2e3);
      }, 500);
    });
    toggleButton.addEventListener("click", () => {
      toggleButton.classList.toggle("toggle-expanded");
      contentArea.classList.toggle("content-expanded");
    });
  }
  /**
   * Saves the content to the file
   */
  async saveContentToFile(file, content) {
    try {
      await this.plugin.app.vault.modify(file, content);
    } catch (error) {
      new import_obsidian3.Notice(`Failed to save changes: ${error}`);
      console.error("Failed to save changes:", error);
    }
  }
  /**
   * Inserts a reference to a file into the active journal entry
   */
  insertFileReference(filePath) {
    if (!this.activeEditor) {
      new import_obsidian3.Notice("No active journal entry to insert file into");
      return;
    }
    const file = this.plugin.app.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian3.TFile)) {
      new import_obsidian3.Notice("Invalid file");
      return;
    }
    let fileReference;
    if (this.isImageFile(file)) {
      fileReference = `![[${file.name}]]`;
    } else if (this.isMarkdownFile(file)) {
      fileReference = `![[${file.name}]]`;
    } else {
      fileReference = `![[${file.name}]]`;
    }
    this.activeEditor.focus();
    const cursorPos = this.activeEditor.selectionStart;
    const textBefore = this.activeEditor.value.substring(0, cursorPos);
    const textAfter = this.activeEditor.value.substring(this.activeEditor.selectionEnd);
    const newText = textBefore + fileReference + textAfter;
    this.activeEditor.value = newText;
    const newCursorPos = cursorPos + fileReference.length;
    this.activeEditor.setSelectionRange(newCursorPos, newCursorPos);
    const inputEvent = new Event("input", { bubbles: true, cancelable: true });
    this.activeEditor.dispatchEvent(inputEvent);
    new import_obsidian3.Notice(`Inserted reference to ${file.name}`);
  }
  /**
   * Check if a file is an image
   */
  isImageFile(file) {
    const imageExtensions = ["png", "jpg", "jpeg", "gif", "svg", "webp"];
    const ext = file.extension.toLowerCase();
    return imageExtensions.includes(ext);
  }
  /**
   * Check if a file is a markdown file
   */
  isMarkdownFile(file) {
    const ext = file.extension.toLowerCase();
    return ext === "md" || ext === "markdown";
  }
  registerCleanup() {
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("layout-change", () => {
        if (this.activeEditor) {
          const journalEntry = this.activeEditor.closest(".journal-entry");
          if (journalEntry) {
            const event = new KeyboardEvent("keydown", { key: "Escape" });
            this.activeEditor.dispatchEvent(event);
          }
          this.activeEditor = null;
        }
      })
    );
  }
  makeHashtagsClickable(contentEl) {
    const hashtags = contentEl.querySelectorAll(".cm-hashtag, .tag");
    hashtags.forEach((tag) => {
      var _a;
      if (tag instanceof HTMLElement) {
        const newTag = tag.cloneNode(true);
        (_a = tag.parentNode) == null ? void 0 : _a.replaceChild(newTag, tag);
        newTag.addEventListener("click", (e) => {
          var _a2;
          e.preventDefault();
          e.stopPropagation();
          const hashtagText = ((_a2 = newTag.textContent) == null ? void 0 : _a2.trim()) || "";
          this.openSearchWithHashtag(hashtagText);
        });
        newTag.style.cursor = "pointer";
      }
    });
  }
  openSearchWithHashtag(hashtag) {
    var _a, _b, _c, _d;
    const searchTerm = hashtag.startsWith("#") ? hashtag : `#${hashtag}`;
    try {
      const app = this.plugin.app;
      if ((_b = (_a = app.internalPlugins) == null ? void 0 : _a.getPluginById("global-search")) == null ? void 0 : _b.instance.openGlobalSearch) {
        (_c = app.internalPlugins.getPluginById("global-search")) == null ? void 0 : _c.instance.openGlobalSearch(searchTerm);
        return;
      }
      if ((_d = app.commands) == null ? void 0 : _d.executeCommandById("global-search:open")) {
        setTimeout(() => {
          const searchInput = document.querySelector(".search-input-container input");
          if (searchInput instanceof HTMLInputElement) {
            searchInput.value = searchTerm;
            searchInput.dispatchEvent(new Event("input", { bubbles: true }));
          }
        }, 100);
        return;
      }
      const searchLeaf = this.plugin.app.workspace.getLeavesOfType("search")[0];
      if (searchLeaf) {
        this.plugin.app.workspace.setActiveLeaf(searchLeaf, { focus: true });
        setTimeout(() => {
          const searchInput = document.querySelector(".search-input-container input");
          if (searchInput instanceof HTMLInputElement) {
            searchInput.value = searchTerm;
            searchInput.dispatchEvent(new Event("input", { bubbles: true }));
          }
        }, 100);
        return;
      }
      new import_obsidian3.Notice(`Search for: ${searchTerm}`);
    } catch (error) {
      console.error("Error opening search:", error);
      new import_obsidian3.Notice(`Could not open search. Please search for: ${searchTerm}`);
    }
  }
};

// src/main.ts
var JournalingPlugin = class extends import_obsidian4.Plugin {
  async onload() {
    await this.loadSettings();
    this.journalView = new JournalView(this);
    const ribbonIconEl = this.addRibbonIcon(
      "notepad-text",
      "Open Journals",
      async (evt) => {
        await this.openJournalView();
      }
    );
    ribbonIconEl.addClass("journaling-ribbon-icon");
    this.addCommand({
      id: "open-journal-view",
      name: "Open Journal View",
      callback: () => {
        this.openJournalView();
      }
    });
    this.addCommand({
      id: "create-todays-journal",
      name: "Create/Open Today's Journal",
      callback: () => {
        this.createTodaysJournal();
      }
    });
    this.addSettingTab(new JournalingSettingTab(this.app, this));
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        if (file instanceof import_obsidian4.TFile) {
          menu.addItem((item) => {
            item.setTitle("Insert into Journal").setIcon("text-cursor-input").onClick(() => {
              const journalView = this.journalView;
              if (journalView) {
                journalView.insertFileReference(file.path);
              } else {
                new import_obsidian4.Notice("Open the journal view first to insert file reference");
              }
            });
          });
        }
      })
    );
  }
  // Opens the continuous journal view
  async openJournalView() {
    await this.createTodaysJournal();
    await this.journalView.open();
  }
  // Creates or opens today's journal entry
  async createTodaysJournal() {
    const date = getTodayDate();
    const fileName = `${date}.md`;
    const file = await getOrCreateJournalFile(
      this.app,
      this.settings.journalFolder,
      fileName,
      this.settings.folderFormat
      // Pass the folder format setting
    );
    if (!file) {
      new import_obsidian4.Notice("Failed to create or open today's journal");
      return;
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Migrates existing journal entries to the new folder structure
   */
  async migrateJournalEntries() {
    const journalFiles = getJournalFiles(
      this.app,
      this.settings.journalFolder,
      ""
      // Use empty folder format to get all files regardless of structure
    );
    if (journalFiles.length === 0) {
      new import_obsidian4.Notice("No journal entries found to migrate.");
      return;
    }
    if (!this.settings.folderFormat) {
      new import_obsidian4.Notice("Please set a folder format in settings before migrating.");
      return;
    }
    const confirmMessage = `Migrate ${journalFiles.length} journal entries to new folder structure? This will:
    1. Move files to folders based on the pattern: ${this.settings.folderFormat}
    2. Create any necessary folders
    3. Keep the original filename
    
    This operation cannot be undone automatically.`;
    if (!confirm(confirmMessage)) {
      return;
    }
    const modal = new MigrationModal(this.app, journalFiles.length);
    modal.open();
    let migratedCount = 0;
    let errorCount = 0;
    for (const file of journalFiles) {
      try {
        modal.updateStatus(`Migrating ${file.name}...`);
        const newPath = getJournalFilePath(
          this.settings.journalFolder,
          file.name,
          this.settings.folderFormat
        );
        if (file.path === newPath) {
          migratedCount++;
          modal.updateProgress(migratedCount);
          continue;
        }
        const content = await this.app.vault.read(file);
        await ensureAllFolders(this.app, newPath);
        await this.app.vault.create(newPath, content);
        await this.app.vault.delete(file);
        migratedCount++;
        modal.updateProgress(migratedCount);
      } catch (error) {
        console.error(`Error migrating file ${file.path}:`, error);
        modal.updateStatus(`Error migrating ${file.name}: ${error}`);
        errorCount++;
      }
    }
    modal.updateStatus(`Migration complete! Migrated ${migratedCount} files with ${errorCount} errors.`);
    setTimeout(() => {
      modal.close();
      new import_obsidian4.Notice(`Migration complete! Migrated ${migratedCount} files with ${errorCount} errors.`);
    }, 3e3);
  }
  async deleteEmptyJournalEntries() {
    const journalFiles = getJournalFiles(
      this.app,
      this.settings.journalFolder,
      this.settings.folderFormat
    );
    if (journalFiles.length === 0) {
      new import_obsidian4.Notice("No journal entries found to check.");
      return;
    }
    const confirmMessage = `Do you want to proceed with scanning ${journalFiles.length} journal entries?`;
    if (!confirm(confirmMessage)) {
      return;
    }
    new import_obsidian4.Notice("Scanning for empty journal entries...");
    let emptyFiles = [];
    let errorCount = 0;
    const isFileEmpty = (content) => {
      return content.trim().length === 0;
    };
    for (const file of journalFiles) {
      try {
        const content = await this.app.vault.read(file);
        if (isFileEmpty(content)) {
          emptyFiles.push(file);
        }
      } catch (error) {
        console.error(`Error scanning file ${file.path}:`, error);
        errorCount++;
      }
    }
    if (emptyFiles.length === 0) {
      new import_obsidian4.Notice("No empty journal entries found.");
      return;
    }
    const deleteConfirmMessage = `${emptyFiles.length} empty journal ${emptyFiles.length === 1 ? "entry was" : "entries were"} found.
        
        Do you want to proceed with the deletion? This operation cannot be undone.`;
    if (!confirm(deleteConfirmMessage)) {
      return;
    }
    new import_obsidian4.Notice(`Deleting ${emptyFiles.length} empty journal entries...`);
    let deletedCount = 0;
    errorCount = 0;
    for (const file of emptyFiles) {
      try {
        await this.app.vault.delete(file);
        deletedCount++;
      } catch (error) {
        console.error(`Error deleting file ${file.path}:`, error);
        errorCount++;
      }
    }
    if (errorCount > 0) {
      new import_obsidian4.Notice(`Deleted ${deletedCount} out of ${emptyFiles.length} empty journal entries. ${errorCount} errors occurred.`, 5e3);
    } else {
      new import_obsidian4.Notice(`Successfully deleted ${deletedCount} empty journal entries.`, 5e3);
    }
    if (deletedCount > 0 && this.journalView) {
      this.journalView.open();
    }
  }
};
var MigrationModal = class extends import_obsidian4.Modal {
  constructor(app, totalFiles) {
    super(app);
    this.totalFiles = totalFiles;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Migrating Journal Entries" });
    this.progressEl = contentEl.createEl("div", {
      cls: "migration-progress",
      text: "0/" + this.totalFiles
    });
    this.statusEl = contentEl.createEl("div", {
      cls: "migration-status",
      text: "Starting migration..."
    });
  }
  updateProgress(completed) {
    this.progressEl.textContent = `${completed}/${this.totalFiles}`;
  }
  updateStatus(message) {
    this.statusEl.textContent = message;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9qb3VybmFsLXZpZXcudHMiLCAic3JjL3V0aWxzL2RhdGUtdXRpbHMudHMiLCAic3JjL3V0aWxzL2ZpbGUtdXRpbHMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgUGx1Z2luLCBOb3RpY2UsIFRGaWxlLCBNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIEpvdXJuYWxpbmdTZXR0aW5ncywgSm91cm5hbGluZ1NldHRpbmdUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IEpvdXJuYWxWaWV3IH0gZnJvbSAnLi9qb3VybmFsLXZpZXcnO1xuaW1wb3J0IHsgZ2V0VG9kYXlEYXRlIH0gZnJvbSAnLi91dGlscy9kYXRlLXV0aWxzJztcbmltcG9ydCB7IGdldE9yQ3JlYXRlSm91cm5hbEZpbGUsIGdldEpvdXJuYWxGaWxlcywgZ2V0Sm91cm5hbEZpbGVQYXRoLCBlbnN1cmVBbGxGb2xkZXJzIH0gZnJvbSAnLi91dGlscy9maWxlLXV0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSm91cm5hbGluZ1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IEpvdXJuYWxpbmdTZXR0aW5ncztcbiAgICBqb3VybmFsVmlldzogSm91cm5hbFZpZXc7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIC8vIExvYWQgc2V0dGluZ3NcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaXRpYWxpemUgam91cm5hbCB2aWV3XG4gICAgICAgIHRoaXMuam91cm5hbFZpZXcgPSBuZXcgSm91cm5hbFZpZXcodGhpcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgcmliYm9uIGljb25cbiAgICAgICAgY29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKFxuICAgICAgICAgICAgJ25vdGVwYWQtdGV4dCcsIFxuICAgICAgICAgICAgJ09wZW4gSm91cm5hbHMnLCBcbiAgICAgICAgICAgIGFzeW5jIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLm9wZW5Kb3VybmFsVmlldygpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICByaWJib25JY29uRWwuYWRkQ2xhc3MoJ2pvdXJuYWxpbmctcmliYm9uLWljb24nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBjb21tYW5kIHRvIG9wZW4gam91cm5hbCB2aWV3XG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ29wZW4tam91cm5hbC12aWV3JyxcbiAgICAgICAgICAgIG5hbWU6ICdPcGVuIEpvdXJuYWwgVmlldycsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub3BlbkpvdXJuYWxWaWV3KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBjb21tYW5kIGZvciBjcmVhdGluZyB0b2RheSdzIGpvdXJuYWxcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnY3JlYXRlLXRvZGF5cy1qb3VybmFsJyxcbiAgICAgICAgICAgIG5hbWU6ICdDcmVhdGUvT3BlbiBUb2RheVxcJ3MgSm91cm5hbCcsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlVG9kYXlzSm91cm5hbCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZWdpc3RlciBzZXR0aW5ncyB0YWJcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBKb3VybmFsaW5nU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgICAgIC8vIEFkZCBjb250ZXh0IG1lbnUgb3B0aW9uIGZvciBmaWxlcyB0byBpbnNlcnQgaW50byBqb3VybmFsc1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtbWVudScsIChtZW51LCBmaWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpbGUgaXMgYSBURmlsZSAoYWN0dWFsIGZpbGUpXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoJ0luc2VydCBpbnRvIEpvdXJuYWwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCd0ZXh0LWN1cnNvci1pbnB1dCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBhY3RpdmUgam91cm5hbCB2aWV3IGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBqb3VybmFsVmlldyA9IHRoaXMuam91cm5hbFZpZXc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqb3VybmFsVmlldykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBmaWxlIHJlZmVyZW5jZSBpbnRvIHRoZSBhY3RpdmUgZWRpdG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqb3VybmFsVmlldy5pbnNlcnRGaWxlUmVmZXJlbmNlKGZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdPcGVuIHRoZSBqb3VybmFsIHZpZXcgZmlyc3QgdG8gaW5zZXJ0IGZpbGUgcmVmZXJlbmNlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBPcGVucyB0aGUgY29udGludW91cyBqb3VybmFsIHZpZXdcbiAgICBhc3luYyBvcGVuSm91cm5hbFZpZXcoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIEZpcnN0LCBlbnN1cmUgdG9kYXkncyBqb3VybmFsIGV4aXN0c1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZVRvZGF5c0pvdXJuYWwoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRoZW4gb3BlbiB0aGUgY29udGludW91cyB2aWV3XG4gICAgICAgIGF3YWl0IHRoaXMuam91cm5hbFZpZXcub3BlbigpO1xuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhdGVzIG9yIG9wZW5zIHRvZGF5J3Mgam91cm5hbCBlbnRyeVxuICAgIGFzeW5jIGNyZWF0ZVRvZGF5c0pvdXJuYWwoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRUb2RheURhdGUoKTtcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtkYXRlfS5tZGA7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmaWxlID0gYXdhaXQgZ2V0T3JDcmVhdGVKb3VybmFsRmlsZShcbiAgICAgICAgICAgIHRoaXMuYXBwLCBcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muam91cm5hbEZvbGRlciwgXG4gICAgICAgICAgICBmaWxlTmFtZSxcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZm9sZGVyRm9ybWF0IC8vIFBhc3MgdGhlIGZvbGRlciBmb3JtYXQgc2V0dGluZ1xuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFmaWxlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gY3JlYXRlIG9yIG9wZW4gdG9kYXlcXCdzIGpvdXJuYWwnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNaWdyYXRlcyBleGlzdGluZyBqb3VybmFsIGVudHJpZXMgdG8gdGhlIG5ldyBmb2xkZXIgc3RydWN0dXJlXG4gICAgICovXG4gICAgYXN5bmMgbWlncmF0ZUpvdXJuYWxFbnRyaWVzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBqb3VybmFsRmlsZXMgPSBnZXRKb3VybmFsRmlsZXMoXG4gICAgICAgICAgICB0aGlzLmFwcCwgXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmpvdXJuYWxGb2xkZXIsXG4gICAgICAgICAgICAnJyAvLyBVc2UgZW1wdHkgZm9sZGVyIGZvcm1hdCB0byBnZXQgYWxsIGZpbGVzIHJlZ2FyZGxlc3Mgb2Ygc3RydWN0dXJlXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoam91cm5hbEZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gam91cm5hbCBlbnRyaWVzIGZvdW5kIHRvIG1pZ3JhdGUuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIElmIG5vIGZvbGRlciBmb3JtYXQgaXMgc2V0LCBub3RoaW5nIHRvIG1pZ3JhdGVcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmZvbGRlckZvcm1hdCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIHNldCBhIGZvbGRlciBmb3JtYXQgaW4gc2V0dGluZ3MgYmVmb3JlIG1pZ3JhdGluZy4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29uZmlybWF0aW9uIGRpYWxvZ1xuICAgICAgICBjb25zdCBjb25maXJtTWVzc2FnZSA9IGBNaWdyYXRlICR7am91cm5hbEZpbGVzLmxlbmd0aH0gam91cm5hbCBlbnRyaWVzIHRvIG5ldyBmb2xkZXIgc3RydWN0dXJlPyBUaGlzIHdpbGw6XG4gICAgMS4gTW92ZSBmaWxlcyB0byBmb2xkZXJzIGJhc2VkIG9uIHRoZSBwYXR0ZXJuOiAke3RoaXMuc2V0dGluZ3MuZm9sZGVyRm9ybWF0fVxuICAgIDIuIENyZWF0ZSBhbnkgbmVjZXNzYXJ5IGZvbGRlcnNcbiAgICAzLiBLZWVwIHRoZSBvcmlnaW5hbCBmaWxlbmFtZVxuICAgIFxuICAgIFRoaXMgb3BlcmF0aW9uIGNhbm5vdCBiZSB1bmRvbmUgYXV0b21hdGljYWxseS5gO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFjb25maXJtKGNvbmZpcm1NZXNzYWdlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgYW5kIG9wZW4gbW9kYWxcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTWlncmF0aW9uTW9kYWwodGhpcy5hcHAsIGpvdXJuYWxGaWxlcy5sZW5ndGgpO1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBUcmFjayBwcm9ncmVzc1xuICAgICAgICBsZXQgbWlncmF0ZWRDb3VudCA9IDA7XG4gICAgICAgIGxldCBlcnJvckNvdW50ID0gMDtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBqb3VybmFsRmlsZXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHN0YXR1c1xuICAgICAgICAgICAgICAgIG1vZGFsLnVwZGF0ZVN0YXR1cyhgTWlncmF0aW5nICR7ZmlsZS5uYW1lfS4uLmApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIHRoZSBuZXcgcGF0aCBiYXNlZCBvbiB0aGUgY3VycmVudCBmb2xkZXIgZm9ybWF0XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3UGF0aCA9IGdldEpvdXJuYWxGaWxlUGF0aChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5qb3VybmFsRm9sZGVyLFxuICAgICAgICAgICAgICAgICAgICBmaWxlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZm9sZGVyRm9ybWF0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTa2lwIGlmIGZpbGUgaXMgYWxyZWFkeSBpbiB0aGUgY29ycmVjdCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGlmIChmaWxlLnBhdGggPT09IG5ld1BhdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbWlncmF0ZWRDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBtb2RhbC51cGRhdGVQcm9ncmVzcyhtaWdyYXRlZENvdW50KTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlYWQgZmlsZSBjb250ZW50XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRW5zdXJlIGFsbCBmb2xkZXJzIGluIHRoZSBwYXRoIGV4aXN0XG4gICAgICAgICAgICAgICAgYXdhaXQgZW5zdXJlQWxsRm9sZGVycyh0aGlzLmFwcCwgbmV3UGF0aCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBmaWxlIGF0IHRoZSBuZXcgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUobmV3UGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIHRoZSBvcmlnaW5hbCBmaWxlXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuZGVsZXRlKGZpbGUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG1pZ3JhdGVkQ291bnQrKztcbiAgICAgICAgICAgICAgICBtb2RhbC51cGRhdGVQcm9ncmVzcyhtaWdyYXRlZENvdW50KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgbWlncmF0aW5nIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBtb2RhbC51cGRhdGVTdGF0dXMoYEVycm9yIG1pZ3JhdGluZyAke2ZpbGUubmFtZX06ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICAgICAgZXJyb3JDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgZmluYWwgc3RhdHVzXG4gICAgICAgIG1vZGFsLnVwZGF0ZVN0YXR1cyhgTWlncmF0aW9uIGNvbXBsZXRlISBNaWdyYXRlZCAke21pZ3JhdGVkQ291bnR9IGZpbGVzIHdpdGggJHtlcnJvckNvdW50fSBlcnJvcnMuYCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbG9zZSBtb2RhbCBhZnRlciBhIGRlbGF5XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYE1pZ3JhdGlvbiBjb21wbGV0ZSEgTWlncmF0ZWQgJHttaWdyYXRlZENvdW50fSBmaWxlcyB3aXRoICR7ZXJyb3JDb3VudH0gZXJyb3JzLmApO1xuICAgICAgICB9LCAzMDAwKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWxldGVFbXB0eUpvdXJuYWxFbnRyaWVzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBHZXQgYWxsIGpvdXJuYWwgZmlsZXNcbiAgICAgICAgY29uc3Qgam91cm5hbEZpbGVzID0gZ2V0Sm91cm5hbEZpbGVzKFxuICAgICAgICAgICAgdGhpcy5hcHAsIFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5qb3VybmFsRm9sZGVyLFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5mb2xkZXJGb3JtYXRcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChqb3VybmFsRmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBqb3VybmFsIGVudHJpZXMgZm91bmQgdG8gY2hlY2suJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEZpcnN0IGNvbmZpcm1hdGlvbiBkaWFsb2dcbiAgICAgICAgY29uc3QgY29uZmlybU1lc3NhZ2UgPSBgRG8geW91IHdhbnQgdG8gcHJvY2VlZCB3aXRoIHNjYW5uaW5nICR7am91cm5hbEZpbGVzLmxlbmd0aH0gam91cm5hbCBlbnRyaWVzP2A7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWNvbmZpcm0oY29uZmlybU1lc3NhZ2UpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNob3cgYSBzY2FubmluZyBub3RpZmljYXRpb25cbiAgICAgICAgbmV3IE5vdGljZSgnU2Nhbm5pbmcgZm9yIGVtcHR5IGpvdXJuYWwgZW50cmllcy4uLicpO1xuICAgICAgICBcbiAgICAgICAgLy8gVHJhY2sgcHJvZ3Jlc3NcbiAgICAgICAgbGV0IGVtcHR5RmlsZXM6IFRGaWxlW10gPSBbXTtcbiAgICAgICAgbGV0IGVycm9yQ291bnQgPSAwO1xuICAgICAgICBcbiAgICAgICAgLy8gRGVmaW5lIHdoYXQgXCJlbXB0eVwiIG1lYW5zXG4gICAgICAgIGNvbnN0IGlzRmlsZUVtcHR5ID0gKGNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQudHJpbSgpLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNjYW4gZWFjaCBmaWxlXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBqb3VybmFsRmlsZXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gUmVhZCBmaWxlIGNvbnRlbnRcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBmaWxlIGlzIGVtcHR5XG4gICAgICAgICAgICAgICAgaWYgKGlzRmlsZUVtcHR5KGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVtcHR5RmlsZXMucHVzaChmaWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHNjYW5uaW5nIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBlcnJvckNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIElmIG5vIGVtcHR5IGZpbGVzIHdlcmUgZm91bmRcbiAgICAgICAgaWYgKGVtcHR5RmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBlbXB0eSBqb3VybmFsIGVudHJpZXMgZm91bmQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNlY29uZCBjb25maXJtYXRpb24gZGlhbG9nIHdpdGggYWN0dWFsIGNvdW50XG4gICAgICAgIGNvbnN0IGRlbGV0ZUNvbmZpcm1NZXNzYWdlID0gYCR7ZW1wdHlGaWxlcy5sZW5ndGh9IGVtcHR5IGpvdXJuYWwgJHtlbXB0eUZpbGVzLmxlbmd0aCA9PT0gMSA/ICdlbnRyeSB3YXMnIDogJ2VudHJpZXMgd2VyZSd9IGZvdW5kLlxuICAgICAgICBcbiAgICAgICAgRG8geW91IHdhbnQgdG8gcHJvY2VlZCB3aXRoIHRoZSBkZWxldGlvbj8gVGhpcyBvcGVyYXRpb24gY2Fubm90IGJlIHVuZG9uZS5gO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFjb25maXJtKGRlbGV0ZUNvbmZpcm1NZXNzYWdlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTaG93IGEgZGVsZXRpbmcgbm90aWZpY2F0aW9uXG4gICAgICAgIG5ldyBOb3RpY2UoYERlbGV0aW5nICR7ZW1wdHlGaWxlcy5sZW5ndGh9IGVtcHR5IGpvdXJuYWwgZW50cmllcy4uLmApO1xuICAgICAgICBcbiAgICAgICAgLy8gRGVsZXRlIHRoZSBlbXB0eSBmaWxlc1xuICAgICAgICBsZXQgZGVsZXRlZENvdW50ID0gMDtcbiAgICAgICAgZXJyb3JDb3VudCA9IDA7IC8vIFJlc2V0IGVycm9yIGNvdW50IGZvciBkZWxldGlvbiBwaGFzZVxuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGVtcHR5RmlsZXMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlIHRoZSBmaWxlXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuZGVsZXRlKGZpbGUpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZWRDb3VudCsrO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBkZWxldGluZyBmaWxlICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgZXJyb3JDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTaG93IGNvbXBsZXRpb24gbm90aWZpY2F0aW9uXG4gICAgICAgIGlmIChlcnJvckNvdW50ID4gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRGVsZXRlZCAke2RlbGV0ZWRDb3VudH0gb3V0IG9mICR7ZW1wdHlGaWxlcy5sZW5ndGh9IGVtcHR5IGpvdXJuYWwgZW50cmllcy4gJHtlcnJvckNvdW50fSBlcnJvcnMgb2NjdXJyZWQuYCwgNTAwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTdWNjZXNzZnVsbHkgZGVsZXRlZCAke2RlbGV0ZWRDb3VudH0gZW1wdHkgam91cm5hbCBlbnRyaWVzLmAsIDUwMDApO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBSZWZyZXNoIGpvdXJuYWwgdmlldyBpZiBpdCdzIG9wZW5cbiAgICAgICAgaWYgKGRlbGV0ZWRDb3VudCA+IDAgJiYgdGhpcy5qb3VybmFsVmlldykge1xuICAgICAgICAgICAgdGhpcy5qb3VybmFsVmlldy5vcGVuKCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIE1pZ3JhdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHRvdGFsRmlsZXM6IG51bWJlcjtcbiAgICBwcm9ncmVzc0VsOiBIVE1MRWxlbWVudDtcbiAgICBzdGF0dXNFbDogSFRNTEVsZW1lbnQ7XG4gICAgXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRvdGFsRmlsZXM6IG51bWJlcikge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnRvdGFsRmlsZXMgPSB0b3RhbEZpbGVzO1xuICAgIH1cbiAgICBcbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTWlncmF0aW5nIEpvdXJuYWwgRW50cmllcycgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgcHJvZ3Jlc3MgZGlzcGxheVxuICAgICAgICB0aGlzLnByb2dyZXNzRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICAgICAgICBjbHM6ICdtaWdyYXRpb24tcHJvZ3Jlc3MnLFxuICAgICAgICAgICAgdGV4dDogJzAvJyArIHRoaXMudG90YWxGaWxlc1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBzdGF0dXMgbWVzc2FnZVxuICAgICAgICB0aGlzLnN0YXR1c0VsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICBjbHM6ICdtaWdyYXRpb24tc3RhdHVzJyxcbiAgICAgICAgICAgIHRleHQ6ICdTdGFydGluZyBtaWdyYXRpb24uLi4nXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICB1cGRhdGVQcm9ncmVzcyhjb21wbGV0ZWQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLnByb2dyZXNzRWwudGV4dENvbnRlbnQgPSBgJHtjb21wbGV0ZWR9LyR7dGhpcy50b3RhbEZpbGVzfWA7XG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZVN0YXR1cyhtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zdGF0dXNFbC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIFxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbmNsYXNzIERlbGV0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgdG90YWxGaWxlczogbnVtYmVyO1xuICAgIHByb2dyZXNzRWw6IEhUTUxFbGVtZW50O1xuICAgIHN0YXR1c0VsOiBIVE1MRWxlbWVudDtcbiAgICBkZWxldGVkQ291bnRFbDogSFRNTEVsZW1lbnQ7XG4gICAgXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRvdGFsRmlsZXM6IG51bWJlcikge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnRvdGFsRmlsZXMgPSB0b3RhbEZpbGVzO1xuICAgIH1cbiAgICBcbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRGVsZXRpbmcgRW1wdHkgSm91cm5hbCBFbnRyaWVzJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBwcm9ncmVzcyBkaXNwbGF5XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgICAgICAgIGNsczogJ21pZ3JhdGlvbi1wcm9ncmVzcycsIC8vIFJldXNpbmcgdGhlIHNhbWUgQ1NTIGNsYXNzXG4gICAgICAgICAgICB0ZXh0OiAnMC8nICsgdGhpcy50b3RhbEZpbGVzICsgJyBzY2FubmVkJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBkZWxldGVkIGNvdW50IGRpc3BsYXlcbiAgICAgICAgdGhpcy5kZWxldGVkQ291bnRFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnbWlncmF0aW9uLXByb2dyZXNzJyxcbiAgICAgICAgICAgIHRleHQ6ICcwIGVudHJpZXMgZGVsZXRlZCdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgc3RhdHVzIG1lc3NhZ2VcbiAgICAgICAgdGhpcy5zdGF0dXNFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnbWlncmF0aW9uLXN0YXR1cycsXG4gICAgICAgICAgICB0ZXh0OiAnU3RhcnRpbmcgc2Nhbi4uLidcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZVByb2dyZXNzKGNvbXBsZXRlZDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3NFbC50ZXh0Q29udGVudCA9IGAke2NvbXBsZXRlZH0vJHt0aGlzLnRvdGFsRmlsZXN9IHNjYW5uZWRgO1xuICAgIH1cbiAgICBcbiAgICB1cGRhdGVEZWxldGVkQ291bnQoY291bnQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLmRlbGV0ZWRDb3VudEVsLnRleHRDb250ZW50ID0gYCR7Y291bnR9IGVudHJpZXMgZGVsZXRlZGA7XG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZVN0YXR1cyhtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zdGF0dXNFbC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIFxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgTW9kYWwgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgSm91cm5hbGluZ1BsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEpvdXJuYWxpbmdTZXR0aW5ncyB7XG4gICAgam91cm5hbEZvbGRlcjogc3RyaW5nO1xuICAgIGRhdGVGb3JtYXQ6IHN0cmluZztcbiAgICBzb3J0RGlyZWN0aW9uOiAnbmV3ZXN0LWZpcnN0JyB8ICdvbGRlc3QtZmlyc3QnO1xuICAgIGRlZmF1bHRFeHBhbmRFbnRyaWVzOiBib29sZWFuO1xuICAgIGZvbGRlckZvcm1hdDogc3RyaW5nO1xuICAgIGVudHJpZXNQZXJCYXRjaDogbnVtYmVyO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogSm91cm5hbGluZ1NldHRpbmdzID0ge1xuICAgIGpvdXJuYWxGb2xkZXI6ICdqb3VybmFscycsXG4gICAgZGF0ZUZvcm1hdDogJ1lZWVktTU0tREQnLFxuICAgIHNvcnREaXJlY3Rpb246ICduZXdlc3QtZmlyc3QnLFxuICAgIGRlZmF1bHRFeHBhbmRFbnRyaWVzOiB0cnVlLFxuICAgIGZvbGRlckZvcm1hdDogJycsXG4gICAgZW50cmllc1BlckJhdGNoOiAxMCxcbn07XG5cbmV4cG9ydCBjbGFzcyBKb3VybmFsaW5nU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogSm91cm5hbGluZ1BsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEpvdXJuYWxpbmdQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0NvbnRpbnVvdXMgSm91cm5hbGluZyBTZXR0aW5ncycgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnSm91cm5hbCBGb2xkZXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ1NwZWNpZnkgdGhlIGZvbGRlciB3aGVyZSBqb3VybmFsIGVudHJpZXMgd2lsbCBiZSBzdG9yZWQnKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdqb3VybmFscycpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmpvdXJuYWxGb2xkZXIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlcyBmb3IgY29uc2lzdGVuY3lcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbEZvbGRlciA9IHZhbHVlLnJlcGxhY2UoL15cXC8rfFxcLyskL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RhdGUgRm9ybWF0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdGb3JtYXQgZm9yIGpvdXJuYWwgZmlsZW5hbWVzIChZWVlZLU1NLUREIHJlY29tbWVuZGVkKScpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1lZWVktTU0tREQnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF0ZUZvcm1hdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnU29ydCBEaXJlY3Rpb24nKVxuICAgICAgICAgICAgLnNldERlc2MoJ0hvdyB0byBzb3J0IGpvdXJuYWwgZW50cmllcyBpbiB0aGUgY29udGludW91cyB2aWV3JylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ25ld2VzdC1maXJzdCcsICdOZXdlc3QgZW50cmllcyBmaXJzdCcpXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignb2xkZXN0LWZpcnN0JywgJ09sZGVzdCBlbnRyaWVzIGZpcnN0JylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydERpcmVjdGlvbilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiAnbmV3ZXN0LWZpcnN0JyB8ICdvbGRlc3QtZmlyc3QnKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNvcnREaXJlY3Rpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0RlZmF1bHQgRXhwYW5kIEVudHJpZXMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgZXhwYW5kIGVudHJpZXMgd2hlbiBvcGVuaW5nIHRoZSBqb3VybmFscyB2aWV3JylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0RXhwYW5kRW50cmllcylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRFeHBhbmRFbnRyaWVzID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdGb2xkZXIgU3RydWN0dXJlIEZvcm1hdCAoT3B0aW9uYWwpJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdGb3JtYXQgcGF0dGVybiBmb3Igb3JnYW5pemluZyBqb3VybmFsIGVudHJpZXMgaW4gc3ViZm9sZGVycy5cXG5FeGFtcGxlczogZW1wdHkgZm9yIGZsYXQgc3RydWN0dXJlLCBcIllZWVlcIiBmb3IgeWVhcmx5IGZvbGRlcnMsIFwiWVlZWS9NTVwiIGZvciBtb250aGx5IGZvbGRlcnMuJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignWVlZWS9NTScpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlckZvcm1hdClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlckZvcm1hdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0VudHJpZXMgUGVyIFBhZ2UnKVxuICAgICAgICAgICAgLnNldERlc2MoJ051bWJlciBvZiBqb3VybmFsIGVudHJpZXMgdG8gbG9hZCBhdCBvbmNlJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiBkcm9wZG93blxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJzEwJywgJzEwIGVudHJpZXMnKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJzI1JywgJzI1IGVudHJpZXMnKVxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJzUwJywgJzUwIGVudHJpZXMnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbnRyaWVzUGVyQmF0Y2gudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVudHJpZXNQZXJCYXRjaCA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ01pZ3JhdGUgSm91cm5hbCBFbnRyaWVzJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdNb3ZlIGV4aXN0aW5nIGpvdXJuYWwgZW50cmllcyB0byB0aGUgZm9sZGVyIHN0cnVjdHVyZSBkZWZpbmVkIGJ5IHRoZSBmb2xkZXIgZm9ybWF0IHBhdHRlcm4uJylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdNaWdyYXRlIEVudHJpZXMnKVxuICAgICAgICAgICAgICAgIC5zZXRDdGEoKSAvLyBNYWtlIGl0IGEgY2FsbC10by1hY3Rpb24gYnV0dG9uXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5taWdyYXRlSm91cm5hbEVudHJpZXMoKTtcbiAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgIC5zZXROYW1lKCdEZWxldGUgRW1wdHkgSm91cm5hbCBFbnRyaWVzJylcbiAgICAgICAgLnNldERlc2MoJ0RlbGV0ZSBhbGwgRU1QVFkgam91cm5hbCBlbnRyaWVzLiBUaGlzIGFjdGlvbiBjYW5ub3QgYmUgdW5kb25lLicpXG4gICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ0RlbGV0ZSBFbXB0eSBFbnRyaWVzJylcbiAgICAgICAgICAgIC5zZXRDdGEoKSAvLyBNYWtlIGl0IGEgY2FsbC10by1hY3Rpb24gYnV0dG9uXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2pvdXJuYWwtZGVsZXRlLWJ1dHRvbicpXG4gICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uZGVsZXRlRW1wdHlKb3VybmFsRW50cmllcygpO1xuICAgICAgICAgICAgfSkpO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgTWFya2Rvd25SZW5kZXJlciwgTm90aWNlLCBURmlsZSwgV29ya3NwYWNlTGVhZiwgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEpvdXJuYWxpbmdQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IGZvcm1hdERhdGVGb3JEaXNwbGF5IH0gZnJvbSAnLi91dGlscy9kYXRlLXV0aWxzJztcbmltcG9ydCB7IGdldEpvdXJuYWxGaWxlcywgc29ydEpvdXJuYWxGaWxlcyB9IGZyb20gJy4vdXRpbHMvZmlsZS11dGlscyc7XG5cbi8vIERlZmluZSBhbiBpbnRlcmZhY2UgdG8gZXh0ZW5kIHRoZSBPYnNpZGlhbiBBcHAgdHlwZSB3aXRoIHRoZSBtaXNzaW5nIHByb3BlcnRpZXNcbmludGVyZmFjZSBFeHRlbmRlZEFwcCBleHRlbmRzIEFwcCB7XG4gICAgaW50ZXJuYWxQbHVnaW5zOiB7XG4gICAgICAgIGdldFBsdWdpbkJ5SWQoaWQ6IHN0cmluZyk6IHtcbiAgICAgICAgICAgIGluc3RhbmNlOiB7XG4gICAgICAgICAgICAgICAgb3Blbkdsb2JhbFNlYXJjaChxdWVyeTogc3RyaW5nKTogdm9pZDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gfCB1bmRlZmluZWQ7XG4gICAgfTtcbiAgICBjb21tYW5kczoge1xuICAgICAgICBleGVjdXRlQ29tbWFuZEJ5SWQoaWQ6IHN0cmluZyk6IGJvb2xlYW47XG4gICAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIEpvdXJuYWxWaWV3IHtcbiAgICBwbHVnaW46IEpvdXJuYWxpbmdQbHVnaW47XG4gICAgYWN0aXZlRWRpdG9yOiBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gICAgXG4gICAgLy8gU2ltcGxlIGxhenkgbG9hZGluZyBwcm9wZXJ0aWVzXG4gICAgcHJpdmF0ZSBhbGxGaWxlczogVEZpbGVbXSA9IFtdO1xuICAgIHByaXZhdGUgY3VycmVudEJhdGNoOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgbG9hZE1vcmVCdXR0b246IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gICAgXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBKb3VybmFsaW5nUGx1Z2luKSB7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyQ2xlYW51cCgpO1xuICAgIH1cbiAgICBcbiAgICAvLyBPcGVucyB0aGUgY29udGludW91cyBqb3VybmFsIHZpZXcgaW4gYSBuZXcgbGVhZlxuICAgIGFzeW5jIG9wZW4oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIENyZWF0ZSBhIG5ldyBsZWFmIChvcGVucyBhIG5ldyB0YWIpXG4gICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgdGhlIHZpZXcgc3RhdGUgdG8gTWFya2Rvd24gdG8gYWNjZXNzIGNvbnRhaW5lckVsXG4gICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgIHR5cGU6IFwibWFya2Rvd25cIixcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIG1haW4gY29udGFpbmVyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IGxlYWYudmlldy5jb250YWluZXJFbDtcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgYSBzY3JvbGxhYmxlIHBhbmVsIGZvciBqb3VybmFsIGVudHJpZXNcbiAgICAgICAgY29uc3QgcGFuZWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnY3VzdG9tLWpvdXJuYWwtcGFuZWwnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IGFsbCBqb3VybmFsIGZpbGVzLCBwYXNzaW5nIHRoZSBmb2xkZXIgZm9ybWF0XG4gICAgICAgIGNvbnN0IGpvdXJuYWxGaWxlcyA9IGdldEpvdXJuYWxGaWxlcyhcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcCwgXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5qb3VybmFsRm9sZGVyLFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZGVyRm9ybWF0XG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoam91cm5hbEZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gam91cm5hbCBlbnRyaWVzIGZvdW5kLicpO1xuICAgICAgICAgICAgcGFuZWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICAgICAgICAgICAgY2xzOiAnam91cm5hbC1lbXB0eS1zdGF0ZScsXG4gICAgICAgICAgICAgICAgdGV4dDogJ05vIGpvdXJuYWwgZW50cmllcyBmb3VuZC4gQ3JlYXRlIG9uZSBieSBjbGlja2luZyB0aGUgam91cm5hbHMgaWNvbiBpbiB0aGUgcmliYm9uLicgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU29ydCB0aGUgZmlsZXMgYWNjb3JkaW5nIHRvIHVzZXIgcHJlZmVyZW5jZVxuICAgICAgICB0aGlzLmFsbEZpbGVzID0gc29ydEpvdXJuYWxGaWxlcyhqb3VybmFsRmlsZXMsIHRoaXMucGx1Z2luLnNldHRpbmdzLnNvcnREaXJlY3Rpb24pO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVzZXQgYmF0Y2ggY291bnRlclxuICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaCA9IDA7XG4gICAgICAgIFxuICAgICAgICAvLyBMb2FkIHRoZSBmaXJzdCBiYXRjaCBvZiBlbnRyaWVzXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZEJhdGNoKHBhbmVsKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBcIkxvYWQgTW9yZVwiIGJ1dHRvbiBpZiB0aGVyZSBhcmUgbW9yZSBlbnRyaWVzXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRCYXRjaCAqIHRoaXMucGx1Z2luLnNldHRpbmdzLmVudHJpZXNQZXJCYXRjaCA8IHRoaXMuYWxsRmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmFkZExvYWRNb3JlQnV0dG9uKHBhbmVsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBMb2FkIGEgYmF0Y2ggb2YgZW50cmllc1xuICAgIHByaXZhdGUgYXN5bmMgbG9hZEJhdGNoKHBhbmVsOiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBiYXRjaFNpemUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbnRyaWVzUGVyQmF0Y2g7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5jdXJyZW50QmF0Y2ggKiBiYXRjaFNpemU7XG4gICAgICAgIGNvbnN0IGVuZCA9IE1hdGgubWluKHN0YXJ0ICsgYmF0Y2hTaXplLCB0aGlzLmFsbEZpbGVzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgQUxMIFwiTG9hZCBNb3JlXCIgYnV0dG9ucyB0byBlbnN1cmUgdGhlcmUgYXJlbid0IGR1cGxpY2F0ZXNcbiAgICAgICAgcGFuZWwucXVlcnlTZWxlY3RvckFsbCgnLmpvdXJuYWwtbG9hZC1tb3JlLWJ1dHRvbicpLmZvckVhY2goYnRuID0+IGJ0bi5yZW1vdmUoKSk7XG4gICAgICAgIHRoaXMubG9hZE1vcmVCdXR0b24gPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IHRoZSBmaWxlcyBmb3IgdGhpcyBiYXRjaFxuICAgICAgICBjb25zdCBmaWxlc1RvTG9hZCA9IHRoaXMuYWxsRmlsZXMuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBMb2FkIGVhY2ggZmlsZSBhbmQgYWRkIGl0IHRvIHRoZSBwYW5lbFxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXNUb0xvYWQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEpvdXJuYWxFbnRyeShwYW5lbCwgZmlsZSwgZmlsZUNvbnRlbnQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciByZWFkaW5nIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEVycm9yTWVzc2FnZShwYW5lbCwgZmlsZS5iYXNlbmFtZSwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJbmNyZW1lbnQgdGhlIGJhdGNoIGNvdW50ZXJcbiAgICAgICAgdGhpcy5jdXJyZW50QmF0Y2grKztcbiAgICAgICAgXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSd2ZSByZW1vdmVkIGFsbCBsb2FkIG1vcmUgYnV0dG9ucyBhZ2FpbiAoanVzdCB0byBiZSBzYWZlKVxuICAgICAgICBwYW5lbC5xdWVyeVNlbGVjdG9yQWxsKCcuam91cm5hbC1sb2FkLW1vcmUtYnV0dG9uJykuZm9yRWFjaChidG4gPT4gYnRuLnJlbW92ZSgpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0aGUgXCJMb2FkIE1vcmVcIiBidXR0b24gYXQgdGhlIGVuZCBpZiB0aGVyZSBhcmUgbW9yZSBlbnRyaWVzIHRvIGxvYWRcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhdGNoICogdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW50cmllc1BlckJhdGNoIDwgdGhpcy5hbGxGaWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuYWRkTG9hZE1vcmVCdXR0b24ocGFuZWwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIGEgXCJMb2FkIE1vcmVcIiBidXR0b25cbiAgICBwcml2YXRlIGFkZExvYWRNb3JlQnV0dG9uKHBhbmVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICAvLyBNYWtlIHN1cmUgYW55IGV4aXN0aW5nIGJ1dHRvbiBpcyByZW1vdmVkIGZpcnN0XG4gICAgICAgIHBhbmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5qb3VybmFsLWxvYWQtbW9yZS1idXR0b24nKS5mb3JFYWNoKGJ0biA9PiBidG4ucmVtb3ZlKCkpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBidXR0b25cbiAgICAgICAgY29uc3QgZW50cmllc1BlckJhdGNoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW50cmllc1BlckJhdGNoO1xuICAgICAgICB0aGlzLmxvYWRNb3JlQnV0dG9uID0gcGFuZWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIGNsczogJ2pvdXJuYWwtbG9hZC1tb3JlLWJ1dHRvbicsXG4gICAgICAgICAgICB0ZXh0OiBgTG9hZCAke2VudHJpZXNQZXJCYXRjaH0gTW9yZSBFbnRyaWVzYFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgYnV0dG9uIGlzIGF0IHRoZSBlbmQgb2YgdGhlIHBhbmVsXG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHRoaXMubG9hZE1vcmVCdXR0b24pO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIGNsaWNrIGV2ZW50XG4gICAgICAgIHRoaXMubG9hZE1vcmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBTaG93IGxvYWRpbmcgc3RhdGVcbiAgICAgICAgICAgIGlmICh0aGlzLmxvYWRNb3JlQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkTW9yZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdMb2FkaW5nLi4uJztcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRNb3JlQnV0dG9uLnNldEF0dHIoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTG9hZCB0aGUgbmV4dCBiYXRjaFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2FkQmF0Y2gocGFuZWwpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkcyBhbiBlcnJvciBtZXNzYWdlIHRvIHRoZSBwYW5lbCB3aGVuIGZpbGUgcmVhZGluZyBmYWlsc1xuICAgIHByaXZhdGUgYWRkRXJyb3JNZXNzYWdlKHBhbmVsOiBIVE1MRWxlbWVudCwgZmlsZW5hbWU6IHN0cmluZywgZXJyb3I6IGFueSk6IHZvaWQge1xuICAgICAgICBjb25zdCBlcnJvckRpdiA9IHBhbmVsLmNyZWF0ZURpdih7IGNsczogJ2pvdXJuYWwtZW50cnkgam91cm5hbC1lcnJvcicgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBlcnJvckhlYWRlciA9IGVycm9yRGl2LmNyZWF0ZURpdih7IGNsczogJ2pvdXJuYWwtZW50cnktaGVhZGVyJyB9KTtcbiAgICAgICAgZXJyb3JIZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyBcbiAgICAgICAgICAgIGNsczogJ2pvdXJuYWwtZW50cnktdGl0bGUnLFxuICAgICAgICAgICAgdGV4dDogYCR7ZmlsZW5hbWV9IC0gRXJyb3JgIFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGVycm9yQ29udGVudCA9IGVycm9yRGl2LmNyZWF0ZURpdih7IGNsczogJ2pvdXJuYWwtZXJyb3ItY29udGVudCcgfSk7XG4gICAgICAgIGVycm9yQ29udGVudC50ZXh0Q29udGVudCA9IGBGYWlsZWQgdG8gbG9hZCBqb3VybmFsOiAke2Vycm9yLm1lc3NhZ2UgfHwgZXJyb3J9YDtcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkcyBhIGpvdXJuYWwgZW50cnkgdG8gdGhlIHBhbmVsXG4gICAgcHJpdmF0ZSBhZGRKb3VybmFsRW50cnkocGFuZWw6IEhUTUxFbGVtZW50LCBmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGpvdXJuYWxEYXRlID0gZmlsZS5iYXNlbmFtZTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbWFpbiBjb250YWluZXIgZm9yIHRoaXMgZW50cnlcbiAgICAgICAgY29uc3Qgam91cm5hbEVudHJ5ID0gcGFuZWwuY3JlYXRlRGl2KHsgY2xzOiAnam91cm5hbC1lbnRyeScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIGhlYWRlciBzZWN0aW9uXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGpvdXJuYWxFbnRyeS5jcmVhdGVEaXYoeyBjbHM6ICdqb3VybmFsLWVudHJ5LWhlYWRlcicgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgdG9nZ2xlIGJ1dHRvbiBmb3IgY29sbGFwc2luZy9leHBhbmRpbmdcbiAgICAgICAgY29uc3QgdG9nZ2xlQnV0dG9uID0gaGVhZGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IGNsczogJ2NvbGxhcHNpYmxlLXRvZ2dsZScgfSk7XG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0RXhwYW5kRW50cmllcykge1xuICAgICAgICAgICAgdG9nZ2xlQnV0dG9uLmFkZENsYXNzKCd0b2dnbGUtZXhwYW5kZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHRpdGxlIHdpdGggbGluayB0byB0aGUgb3JpZ2luYWwgZmlsZVxuICAgICAgICBjb25zdCB0aXRsZSA9IGhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IGNsczogJ2pvdXJuYWwtZW50cnktdGl0bGUnIH0pO1xuICAgICAgICBjb25zdCB0aXRsZUxpbmsgPSB0aXRsZS5jcmVhdGVFbCgnYScsIHsgXG4gICAgICAgICAgICBjbHM6ICdqb3VybmFsLWVudHJ5LWxpbmsnLFxuICAgICAgICAgICAgdGV4dDogZm9ybWF0RGF0ZUZvckRpc3BsYXkoam91cm5hbERhdGUpXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGNsaWNrIG9uIHRoZSB0aXRsZSB0byBvcGVuIHRoZSBmaWxlXG4gICAgICAgIHRpdGxlTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGUuYmFzZW5hbWUsIGZpbGUucGF0aCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBjb250ZW50IGFyZWFcbiAgICAgICAgY29uc3QgY29udGVudEFyZWEgPSBqb3VybmFsRW50cnkuY3JlYXRlRGl2KHsgXG4gICAgICAgICAgICBjbHM6ICdjb2xsYXBzaWJsZS1jb250ZW50JyArICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0RXhwYW5kRW50cmllcyA/ICcgY29udGVudC1leHBhbmRlZCcgOiAnJylcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBUcmFjayB0aGUgY3VycmVudCBjb250ZW50XG4gICAgICAgIGxldCBjdXJyZW50Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIFxuICAgICAgICAvLyBGbGFnIHRvIHRyYWNrIGlmIHRoZSBlbnRyeSBpcyBpbiBlZGl0IG1vZGVcbiAgICAgICAgbGV0IGlzRWRpdGluZyA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSByZW5kZXJlZCBjb250ZW50IHZpZXdcbiAgICAgICAgY29uc3QgcmVuZGVyZWRDb250ZW50ID0gY29udGVudEFyZWEuY3JlYXRlRGl2KHsgXG4gICAgICAgICAgICBjbHM6ICdyZW5kZXJlZC1jb250ZW50IGFjdGl2ZS12aWV3JyBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIGVkaXRhYmxlIHRleHRhcmVhXG4gICAgICAgIGNvbnN0IGVkaXRhYmxlQ29udGVudCA9IGNvbnRlbnRBcmVhLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHsgXG4gICAgICAgICAgICBjbHM6ICdlZGl0YWJsZS1jb250ZW50JyxcbiAgICAgICAgICAgIHZhbHVlOiBjdXJyZW50Q29udGVudFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBjbG9zZSBidXR0b24gKG5ldyByZXF1aXJlbWVudClcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSBjb250ZW50QXJlYS5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgY2xzOiAnam91cm5hbC1jbG9zZS1idXR0b24nLFxuICAgICAgICAgICAgdGV4dDogJ0Nsb3NlJ1xuICAgICAgICB9KTtcbiAgICAgICAgY2xvc2VCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSGlkZSBpbml0aWFsbHlcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBzYXZlIGluZGljYXRvclxuICAgICAgICBjb25zdCBzYXZlSW5kaWNhdG9yID0gY29udGVudEFyZWEuY3JlYXRlRGl2KHsgXG4gICAgICAgICAgICBjbHM6ICdqb3VybmFsLXNhdmUtaW5kaWNhdG9yJyxcbiAgICAgICAgICAgIHRleHQ6ICdTYXZlZCdcbiAgICAgICAgfSk7XG4gICAgICAgIHNhdmVJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy8gSGlkZSBpbml0aWFsbHlcbiAgICAgICAgXG4gICAgICAgIC8vIEFkanVzdCB0ZXh0YXJlYSBoZWlnaHQgdG8gY29udGVudFxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQgPSBlZGl0YWJsZUNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBGdW5jdGlvbiB0byByZW5kZXIgdGhlIG1hcmtkb3duIGNvbnRlbnRcbiAgICAgICAgY29uc3QgcmVuZGVyQ29udGVudCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlbmRlcmVkQ29udGVudC5lbXB0eSgpO1xuICAgICAgICAgICAgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIodGhpcy5wbHVnaW4uYXBwLCBjdXJyZW50Q29udGVudCwgcmVuZGVyZWRDb250ZW50LCBmaWxlLnBhdGgsIHRoaXMucGx1Z2luKTtcblxuICAgICAgICAgICAgLy8gTWFrZSBoYXNodGFncyBjbGlja2FibGVcbiAgICAgICAgICAgIHRoaXMubWFrZUhhc2h0YWdzQ2xpY2thYmxlKHJlbmRlcmVkQ29udGVudCk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBJbml0aWFsIHJlbmRlclxuICAgICAgICByZW5kZXJDb250ZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBGdW5jdGlvbiB0byBlbnRlciBlZGl0IG1vZGVcbiAgICAgICAgY29uc3QgZW50ZXJFZGl0TW9kZSA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIFNldCBlZGl0aW5nIGZsYWdcbiAgICAgICAgICAgIGlzRWRpdGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUVkaXRvciA9IGVkaXRhYmxlQ29udGVudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRleHRhcmVhIGhhcyBjdXJyZW50IGNvbnRlbnRcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC52YWx1ZSA9IGN1cnJlbnRDb250ZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIaWRlIHJlbmRlcmVkIHZpZXcsIHNob3cgZWRpdGFibGUgdmlldyBhbmQgY2xvc2UgYnV0dG9uXG4gICAgICAgICAgICByZW5kZXJlZENvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLXZpZXcnKTtcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtdmlldycpO1xuICAgICAgICAgICAgY2xvc2VCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFkanVzdCB0ZXh0YXJlYSBoZWlnaHRcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gZWRpdGFibGVDb250ZW50LnNjcm9sbEhlaWdodCArICdweCc7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuZm9jdXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZ1bmN0aW9uIHRvIGV4aXQgZWRpdCBtb2RlXG4gICAgICAgIGNvbnN0IGV4aXRFZGl0TW9kZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSBjb250ZW50IGlzIHNhdmVkIGJlZm9yZSBleGl0aW5nXG4gICAgICAgICAgICBpZiAoaXNFZGl0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IGN1cnJlbnQgY29udGVudCBmcm9tIHRleHRhcmVhXG4gICAgICAgICAgICAgICAgY3VycmVudENvbnRlbnQgPSBlZGl0YWJsZUNvbnRlbnQudmFsdWU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBjaGFuZ2VzXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQ29udGVudFRvRmlsZShmaWxlLCBjdXJyZW50Q29udGVudCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gUmUtcmVuZGVyIGNvbnRlbnRcbiAgICAgICAgICAgICAgICByZW5kZXJDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSGlkZSBlZGl0YWJsZSB2aWV3IGFuZCBjbG9zZSBidXR0b24sIHNob3cgcmVuZGVyZWQgdmlld1xuICAgICAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtdmlldycpO1xuICAgICAgICAgICAgICAgIGNsb3NlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgcmVuZGVyZWRDb250ZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS12aWV3Jyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgZWRpdGluZyBmbGFnIGFuZCBhY3RpdmUgZWRpdG9yIHJlZmVyZW5jZVxuICAgICAgICAgICAgICAgIGlzRWRpdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZUVkaXRvciA9PT0gZWRpdGFibGVDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRWRpdG9yID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ2xpY2sgb24gcmVuZGVyZWQgY29udGVudCB0byBlZGl0XG4gICAgICAgIHJlbmRlcmVkQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEb24ndCBlbnRlciBlZGl0IG1vZGUgaWYgY2xpY2tpbmcgb24gbGlua3Mgb3IgaGFzaHRhZ3NcbiAgICAgICAgICAgIGlmICh0YXJnZXQudGFnTmFtZSA9PT0gJ0EnIHx8IHRhcmdldC5jbG9zZXN0KCdhJykgfHwgXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY20taGFzaHRhZycpIHx8IHRhcmdldC5jbG9zZXN0KCcuY20taGFzaHRhZycpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBlbnRlckVkaXRNb2RlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xvc2UgYnV0dG9uIHRvIGV4aXQgZWRpdCBtb2RlXG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgZXhpdEVkaXRNb2RlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFudWFsIHNhdmUvZXhpdCB3aGVuIHByZXNzaW5nIEVzY2FwZVxuICAgICAgICBlZGl0YWJsZUNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgICAgICBleGl0RWRpdE1vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBdXRvLWFkanVzdCB0ZXh0YXJlYSBoZWlnaHQgd2hpbGUgdHlwaW5nXG4gICAgICAgIGVkaXRhYmxlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gZWRpdGFibGVDb250ZW50LnNjcm9sbEhlaWdodCArICdweCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IGNvbnRlbnQgd2hpbGUgdHlwaW5nXG4gICAgICAgICAgICBjdXJyZW50Q29udGVudCA9IGVkaXRhYmxlQ29udGVudC52YWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQXV0by1zYXZlIGNvbnRlbnQgd2hpbGUgdHlwaW5nXG4gICAgICAgIGxldCBzYXZlVGltZW91dDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgICAgICAgZWRpdGFibGVDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2hvdyAnU2F2aW5nLi4uJyBpbmRpY2F0b3JcbiAgICAgICAgICAgIHNhdmVJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBzYXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3NhdmVkJyk7XG4gICAgICAgICAgICBzYXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ3NhdmluZycpO1xuICAgICAgICAgICAgc2F2ZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdTYXZpbmcuLi4nO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDbGVhciBwcmV2aW91cyB0aW1lb3V0XG4gICAgICAgICAgICBpZiAoc2F2ZVRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2F2ZVRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZXQgYSBuZXcgdGltZW91dCB0byBzYXZlIGFmdGVyIDUwMG1zIG9mIGluYWN0aXZpdHlcbiAgICAgICAgICAgIHNhdmVUaW1lb3V0ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQ29udGVudFRvRmlsZShmaWxlLCBjdXJyZW50Q29udGVudCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvciB0byAnU2F2ZWQnXG4gICAgICAgICAgICAgICAgc2F2ZUluZGljYXRvci5jbGFzc0xpc3QucmVtb3ZlKCdzYXZpbmcnKTtcbiAgICAgICAgICAgICAgICBzYXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ3NhdmVkJyk7XG4gICAgICAgICAgICAgICAgc2F2ZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdTYXZlZCc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSGlkZSB0aGUgaW5kaWNhdG9yIGFmdGVyIGEgZGVsYXlcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNhdmVJbmRpY2F0b3IuY2xhc3NMaXN0LmNvbnRhaW5zKCdzYXZlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlSW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVG9nZ2xlIGV4cGFuZC9jb2xsYXBzZSBvbiBidXR0b24gY2xpY2tcbiAgICAgICAgdG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdG9nZ2xlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ3RvZ2dsZS1leHBhbmRlZCcpO1xuICAgICAgICAgICAgY29udGVudEFyZWEuY2xhc3NMaXN0LnRvZ2dsZSgnY29udGVudC1leHBhbmRlZCcpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogU2F2ZXMgdGhlIGNvbnRlbnQgdG8gdGhlIGZpbGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHNhdmVDb250ZW50VG9GaWxlKGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgY29udGVudCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gc2F2ZSBjaGFuZ2VzOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgY2hhbmdlczonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIGEgcmVmZXJlbmNlIHRvIGEgZmlsZSBpbnRvIHRoZSBhY3RpdmUgam91cm5hbCBlbnRyeVxuICAgICAqL1xuICAgIGluc2VydEZpbGVSZWZlcmVuY2UoZmlsZVBhdGg6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICAvLyBGaW5kIHRoZSBhY3RpdmUgZWRpdG9yXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVFZGl0b3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBqb3VybmFsIGVudHJ5IHRvIGluc2VydCBmaWxlIGludG8nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBHZXQgdGhlIGZpbGVcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMucGx1Z2luLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdJbnZhbGlkIGZpbGUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIGFwcHJvcHJpYXRlIGZpbGUgcmVmZXJlbmNlXG4gICAgICAgIGxldCBmaWxlUmVmZXJlbmNlOiBzdHJpbmc7XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IGZpbGUgdHlwZXNcbiAgICAgICAgaWYgKHRoaXMuaXNJbWFnZUZpbGUoZmlsZSkpIHtcbiAgICAgICAgICAgIGZpbGVSZWZlcmVuY2UgPSBgIVtbJHtmaWxlLm5hbWV9XV1gO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNNYXJrZG93bkZpbGUoZmlsZSkpIHtcbiAgICAgICAgICAgIGZpbGVSZWZlcmVuY2UgPSBgIVtbJHtmaWxlLm5hbWV9XV1gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmlsZVJlZmVyZW5jZSA9IGAhW1ske2ZpbGUubmFtZX1dXWA7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gRm9jdXMgdGhlIGFjdGl2ZSBlZGl0b3JcbiAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3IuZm9jdXMoKTtcbiAgICBcbiAgICAgICAgLy8gR2V0IGN1cnNvciBwb3NpdGlvblxuICAgICAgICBjb25zdCBjdXJzb3JQb3MgPSB0aGlzLmFjdGl2ZUVkaXRvci5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgY29uc3QgdGV4dEJlZm9yZSA9IHRoaXMuYWN0aXZlRWRpdG9yLnZhbHVlLnN1YnN0cmluZygwLCBjdXJzb3JQb3MpO1xuICAgICAgICBjb25zdCB0ZXh0QWZ0ZXIgPSB0aGlzLmFjdGl2ZUVkaXRvci52YWx1ZS5zdWJzdHJpbmcodGhpcy5hY3RpdmVFZGl0b3Iuc2VsZWN0aW9uRW5kKTtcbiAgICBcbiAgICAgICAgLy8gSW5zZXJ0IHRleHQgd2l0aG91dCBuZXdsaW5lc1xuICAgICAgICBjb25zdCBuZXdUZXh0ID0gdGV4dEJlZm9yZSArIGZpbGVSZWZlcmVuY2UgKyB0ZXh0QWZ0ZXI7XG4gICAgICAgIHRoaXMuYWN0aXZlRWRpdG9yLnZhbHVlID0gbmV3VGV4dDtcbiAgICBcbiAgICAgICAgLy8gU2V0IGN1cnNvciBwb3NpdGlvbiBhZnRlciB0aGUgaW5zZXJ0ZWQgdGV4dFxuICAgICAgICBjb25zdCBuZXdDdXJzb3JQb3MgPSBjdXJzb3JQb3MgKyBmaWxlUmVmZXJlbmNlLmxlbmd0aDsgLy8gUG9zaXRpb24gYWZ0ZXIgdGhlIHJlZmVyZW5jZVxuICAgICAgICB0aGlzLmFjdGl2ZUVkaXRvci5zZXRTZWxlY3Rpb25SYW5nZShuZXdDdXJzb3JQb3MsIG5ld0N1cnNvclBvcyk7XG4gICAgXG4gICAgICAgIC8vIFRyaWdnZXIgaW5wdXQgZXZlbnQgdG8gZW5zdXJlIGNvbnRlbnQgaXMgc2F2ZWRcbiAgICAgICAgY29uc3QgaW5wdXRFdmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSk7XG4gICAgICAgIHRoaXMuYWN0aXZlRWRpdG9yLmRpc3BhdGNoRXZlbnQoaW5wdXRFdmVudCk7XG4gICAgXG4gICAgICAgIG5ldyBOb3RpY2UoYEluc2VydGVkIHJlZmVyZW5jZSB0byAke2ZpbGUubmFtZX1gKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBmaWxlIGlzIGFuIGltYWdlXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc0ltYWdlRmlsZShmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBpbWFnZUV4dGVuc2lvbnMgPSBbJ3BuZycsICdqcGcnLCAnanBlZycsICdnaWYnLCAnc3ZnJywgJ3dlYnAnXTtcbiAgICAgICAgY29uc3QgZXh0ID0gZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIGltYWdlRXh0ZW5zaW9ucy5pbmNsdWRlcyhleHQpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIGZpbGUgaXMgYSBtYXJrZG93biBmaWxlXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc01hcmtkb3duRmlsZShmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBleHQgPSBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXR1cm4gZXh0ID09PSAnbWQnIHx8IGV4dCA9PT0gJ21hcmtkb3duJztcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyQ2xlYW51cCgpOiB2b2lkIHtcbiAgICAgICAgLy8gV2F0Y2ggZm9yIHdvcmtzcGFjZSBsYXlvdXQgY2hhbmdlcyAod2hpY2ggaGFwcGVuIHdoZW4gY2hhbmdpbmcgcGFnZXMvdGFicylcbiAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhbiBhY3RpdmUgZWRpdG9yXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlRWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIGpvdXJuYWwgZW50cnkgY29udGFpbmluZyB0aGlzIGVkaXRvclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBqb3VybmFsRW50cnkgPSB0aGlzLmFjdGl2ZUVkaXRvci5jbG9zZXN0KCcuam91cm5hbC1lbnRyeScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoam91cm5hbEVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBleGl0IGVkaXQgbW9kZSBmdW5jdGlvbiBmb3IgdGhpcyBlbnRyeVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgS2V5Ym9hcmRFdmVudCgna2V5ZG93bicsIHsga2V5OiAnRXNjYXBlJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRWRpdG9yLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGUgYWN0aXZlIGVkaXRvciByZWZlcmVuY2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3IgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgbWFrZUhhc2h0YWdzQ2xpY2thYmxlKGNvbnRlbnRFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gRmluZCBhbGwgaGFzaHRhZyBlbGVtZW50c1xuICAgICAgICBjb25zdCBoYXNodGFncyA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY20taGFzaHRhZywgLnRhZycpO1xuICAgICAgICBcbiAgICAgICAgaGFzaHRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgaWYgKHRhZyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgdGFnIHRvIHJlbW92ZSBhbnkgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGFnID0gdGFnLmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgICAgICB0YWcucGFyZW50Tm9kZT8ucmVwbGFjZUNoaWxkKG5ld1RhZywgdGFnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXdUYWcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNodGFnVGV4dCA9IG5ld1RhZy50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5TZWFyY2hXaXRoSGFzaHRhZyhoYXNodGFnVGV4dCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3VGFnLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb3BlblNlYXJjaFdpdGhIYXNodGFnKGhhc2h0YWc6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gaGFzaHRhZy5zdGFydHNXaXRoKCcjJykgPyBoYXNodGFnIDogYCMke2hhc2h0YWd9YDtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBNZXRob2QgMTogRGlyZWN0IEFQSSBjYWxsXG4gICAgICAgICAgICBjb25zdCBhcHAgPSB0aGlzLnBsdWdpbi5hcHAgYXMgRXh0ZW5kZWRBcHA7XG4gICAgICAgICAgICBpZiAoYXBwLmludGVybmFsUGx1Z2lucz8uZ2V0UGx1Z2luQnlJZCgnZ2xvYmFsLXNlYXJjaCcpPy5pbnN0YW5jZS5vcGVuR2xvYmFsU2VhcmNoKSB7XG4gICAgICAgICAgICAgICAgYXBwLmludGVybmFsUGx1Z2lucy5nZXRQbHVnaW5CeUlkKCdnbG9iYWwtc2VhcmNoJyk/Lmluc3RhbmNlLm9wZW5HbG9iYWxTZWFyY2goc2VhcmNoVGVybSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNZXRob2QgMjogRXhlY3V0ZSBzZWFyY2ggY29tbWFuZFxuICAgICAgICAgICAgaWYgKGFwcC5jb21tYW5kcz8uZXhlY3V0ZUNvbW1hbmRCeUlkKCdnbG9iYWwtc2VhcmNoOm9wZW4nKSkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtaW5wdXQtY29udGFpbmVyIGlucHV0Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2hJbnB1dCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaElucHV0LnZhbHVlID0gc2VhcmNoVGVybTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaElucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTWV0aG9kIDM6IEZvY3VzIGV4aXN0aW5nIHNlYXJjaCBsZWFmXG4gICAgICAgICAgICBjb25zdCBzZWFyY2hMZWFmID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ3NlYXJjaCcpWzBdO1xuICAgICAgICAgICAgaWYgKHNlYXJjaExlYWYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoc2VhcmNoTGVhZiwgeyBmb2N1czogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWlucHV0LWNvbnRhaW5lciBpbnB1dCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoSW5wdXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hJbnB1dC52YWx1ZSA9IHNlYXJjaFRlcm07XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hJbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZhbGxiYWNrXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBTZWFyY2ggZm9yOiAke3NlYXJjaFRlcm19YCk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9wZW5pbmcgc2VhcmNoOicsIGVycm9yKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYENvdWxkIG5vdCBvcGVuIHNlYXJjaC4gUGxlYXNlIHNlYXJjaCBmb3I6ICR7c2VhcmNoVGVybX1gKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiLy8gRm9ybWF0cyB0aGUgY3VycmVudCBkYXRlIGluIFlZWVktTU0tREQgZm9ybWF0XG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9kYXlEYXRlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIHJldHVybiBmb3JtYXREYXRlU3RyaW5nKHRvZGF5KTtcbn1cblxuLy8gRm9ybWF0cyBhIGRhdGUgYXMgWVlZWS1NTS1ERFxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGVTdHJpbmcoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICBjb25zdCBtb250aCA9IFN0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIGNvbnN0IGRheSA9IFN0cmluZyhkYXRlLmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9YDtcbn1cblxuLy8gRm9ybWF0cyBhIGRhdGUgc3RyaW5nIGluIGEgaHVtYW4tcmVhZGFibGUgZm9ybWF0IHdpdGggb3JkaW5hbCBzdWZmaXhcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlRm9yRGlzcGxheShkYXRlU3RyaW5nOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTtcbiAgICBjb25zdCBkYXRlRm9ybWF0T3B0aW9uczogSW50bC5EYXRlVGltZUZvcm1hdE9wdGlvbnMgPSB7IFxuICAgICAgICBtb250aDogJ3Nob3J0JywgXG4gICAgICAgIHllYXI6ICdudW1lcmljJywgXG4gICAgICAgIGRheTogJ251bWVyaWMnIFxuICAgIH07XG5cbiAgICAvLyBGb3JtYXQgZGF0ZSB1c2luZyBJbnRsLkRhdGVUaW1lRm9ybWF0XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi1VUycsIGRhdGVGb3JtYXRPcHRpb25zKS5mb3JtYXQoZGF0ZSk7XG5cbiAgICAvLyBFeHRyYWN0IGRheSBhbmQgYWRkIG9yZGluYWwgc3VmZml4IChlLmcuLCAnc3QnLCAnbmQnLCAncmQnLCAndGgnKVxuICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xuICAgIGNvbnN0IGRheVN1ZmZpeCA9IGdldERheVN1ZmZpeChkYXkpO1xuXG4gICAgLy8gQnVpbGQgdGhlIGZpbmFsIGZvcm1hdHRlZCBzdHJpbmdcbiAgICBjb25zdCBwYXJ0cyA9IGZvcm1hdHRlZERhdGUuc3BsaXQoJyAnKTtcbiAgICByZXR1cm4gYCR7cGFydHNbMF19ICR7ZGF5fSR7ZGF5U3VmZml4fSwgJHtwYXJ0c1syXX1gO1xufVxuXG4vLyBHZXRzIHRoZSBhcHByb3ByaWF0ZSBvcmRpbmFsIHN1ZmZpeCBmb3IgYSBkYXkgbnVtYmVyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF5U3VmZml4KGRheTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoZGF5ID4gMyAmJiBkYXkgPCAyMSkgcmV0dXJuICd0aCc7IC8vIFNwZWNpYWwgY2FzZSBmb3IgMTF0aC0xOXRoXG4gICAgc3dpdGNoIChkYXkgJSAxMCkge1xuICAgICAgICBjYXNlIDE6IHJldHVybiAnc3QnO1xuICAgICAgICBjYXNlIDI6IHJldHVybiAnbmQnO1xuICAgICAgICBjYXNlIDM6IHJldHVybiAncmQnO1xuICAgICAgICBkZWZhdWx0OiByZXR1cm4gJ3RoJztcbiAgICB9XG59XG5cbi8vIENoZWNrcyBpZiBhIHN0cmluZyBtYXRjaGVzIHRoZSBZWVlZLU1NLUREIHBhdHRlcm5cbmV4cG9ydCBmdW5jdGlvbiBpc0RhdGVGb3JtYXQodGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIC9eXFxkezR9LVxcZHsyfS1cXGR7Mn0kLy50ZXN0KHRleHQpO1xufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBpc0RhdGVGb3JtYXQgfSBmcm9tICcuL2RhdGUtdXRpbHMnO1xuXG4vKipcbiAqIEdldHMgdGhlIGZ1bGwgcGF0aCBmb3IgYSBmaWxlIHdpdGhpbiB0aGUgc3BlY2lmaWVkIGZvbGRlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZVBhdGgoZm9sZGVyOiBzdHJpbmcsIGZpbGVuYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmIChmb2xkZXIpIHtcbiAgICAgICAgcmV0dXJuIGAke2ZvbGRlcn0vJHtmaWxlbmFtZX1gO1xuICAgIH1cbiAgICByZXR1cm4gZmlsZW5hbWU7XG59XG5cbi8qKlxuICogRW5zdXJlcyB0aGF0IHRoZSBzcGVjaWZpZWQgZm9sZGVyIGV4aXN0cywgY3JlYXRpbmcgaXQgaWYgbmVjZXNzYXJ5XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXIoYXBwOiBBcHAsIGZvbGRlclBhdGg6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIC8vIElmIG5vIGZvbGRlciBpcyBzcGVjaWZpZWQsIG5vdGhpbmcgdG8gY3JlYXRlXG4gICAgaWYgKCFmb2xkZXJQYXRoKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGZvbGRlciBleGlzdHNcbiAgICBjb25zdCBmb2xkZXJFeGlzdHMgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpO1xuICAgIFxuICAgIC8vIElmIGl0IGV4aXN0cywgbWFrZSBzdXJlIGl0J3MgYSBmb2xkZXJcbiAgICBpZiAoZm9sZGVyRXhpc3RzICYmICEoZm9sZGVyRXhpc3RzIGluc3RhbmNlb2YgVEZvbGRlcikpIHtcbiAgICAgICAgbmV3IE5vdGljZShgQ2Fubm90IGNyZWF0ZSBmb2xkZXI6IFwiJHtmb2xkZXJQYXRofVwiIGV4aXN0cyBidXQgaXMgbm90IGEgZm9sZGVyYCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIGZvbGRlciBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgaWYgKCFmb2xkZXJFeGlzdHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBDcmVhdGVkIGZvbGRlcjogJHtmb2xkZXJQYXRofWApO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gY3JlYXRlIGZvbGRlcjogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgZm9sZGVyOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBmaWxlIHBhdGggZm9yIGEgam91cm5hbCBlbnRyeSBiYXNlZCBvbiB0aGUgZGF0ZSBhbmQgZm9sZGVyIGZvcm1hdFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Sm91cm5hbEZpbGVQYXRoKGpvdXJuYWxGb2xkZXI6IHN0cmluZywgZmlsZW5hbWU6IHN0cmluZywgZm9sZGVyRm9ybWF0OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XG4gICAgLy8gSWYgbm8gZm9sZGVyIGZvcm1hdCBpcyBzcGVjaWZpZWQsIHVzZSB0aGUgZmxhdCBzdHJ1Y3R1cmVcbiAgICBpZiAoIWZvbGRlckZvcm1hdCkge1xuICAgICAgICByZXR1cm4gZ2V0RmlsZVBhdGgoam91cm5hbEZvbGRlciwgZmlsZW5hbWUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBFeHRyYWN0IHRoZSBkYXRlIGZyb20gdGhlIGZpbGVuYW1lIChhc3N1bWluZyBZWVlZLU1NLURELm1kIGZvcm1hdClcbiAgICBjb25zdCBkYXRlUGFydCA9IGZpbGVuYW1lLnNwbGl0KCcuJylbMF07IC8vIFJlbW92ZSBmaWxlIGV4dGVuc2lvblxuICAgIGlmICghaXNEYXRlRm9ybWF0KGRhdGVQYXJ0KSkge1xuICAgICAgICAvLyBJZiBmaWxlbmFtZSBkb2Vzbid0IG1hdGNoIGRhdGUgcGF0dGVybiwgZmFsbCBiYWNrIHRvIGZsYXQgc3RydWN0dXJlXG4gICAgICAgIHJldHVybiBnZXRGaWxlUGF0aChqb3VybmFsRm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFBhcnNlIHRoZSBkYXRlXG4gICAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gZGF0ZVBhcnQuc3BsaXQoJy0nKS5tYXAocGFydCA9PiBwYXJzZUludChwYXJ0KSk7XG4gICAgXG4gICAgLy8gRm9ybWF0IHRoZSBmb2xkZXIgcGF0aCBiYXNlZCBvbiB0aGUgcGF0dGVyblxuICAgIGxldCBmb3JtYXR0ZWRQYXRoID0gZm9sZGVyRm9ybWF0O1xuICAgIGZvcm1hdHRlZFBhdGggPSBmb3JtYXR0ZWRQYXRoLnJlcGxhY2UoJ1lZWVknLCB5ZWFyLnRvU3RyaW5nKCkpO1xuICAgIGZvcm1hdHRlZFBhdGggPSBmb3JtYXR0ZWRQYXRoLnJlcGxhY2UoJ01NJywgbW9udGgudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpKTtcbiAgICBmb3JtYXR0ZWRQYXRoID0gZm9ybWF0dGVkUGF0aC5yZXBsYWNlKCdERCcsIGRheS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykpO1xuICAgIFxuICAgIC8vIENvbWJpbmUgdGhlIGJhc2UgZm9sZGVyLCBmb3JtYXR0ZWQgcGF0aCwgYW5kIGZpbGVuYW1lXG4gICAgaWYgKGpvdXJuYWxGb2xkZXIpIHtcbiAgICAgICAgcmV0dXJuIGAke2pvdXJuYWxGb2xkZXJ9LyR7Zm9ybWF0dGVkUGF0aH0vJHtmaWxlbmFtZX1gO1xuICAgIH1cbiAgICByZXR1cm4gYCR7Zm9ybWF0dGVkUGF0aH0vJHtmaWxlbmFtZX1gO1xufVxuXG4vKipcbiAqIEVuc3VyZXMgYWxsIGZvbGRlcnMgaW4gYSBwYXRoIGV4aXN0XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnN1cmVBbGxGb2xkZXJzKGFwcDogQXBwLCBmaWxlUGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgLy8gU3BsaXQgdGhlIHBhdGggdG8gZW5zdXJlIGFsbCBmb2xkZXJzIGV4aXN0XG4gICAgY29uc3QgcGF0aFBhcnRzID0gZmlsZVBhdGguc3BsaXQoJy8nKTtcbiAgICBjb25zdCBmaWxlTmFtZUluZGV4ID0gcGF0aFBhcnRzLmxlbmd0aCAtIDE7XG4gICAgXG4gICAgLy8gRW5zdXJlIGFsbCBmb2xkZXJzIGluIHRoZSBwYXRoIGV4aXN0XG4gICAgbGV0IGN1cnJlbnRGb2xkZXIgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVOYW1lSW5kZXg7IGkrKykge1xuICAgICAgICBpZiAoY3VycmVudEZvbGRlcikge1xuICAgICAgICAgICAgY3VycmVudEZvbGRlciArPSAnLyc7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudEZvbGRlciArPSBwYXRoUGFydHNbaV07XG4gICAgICAgIFxuICAgICAgICAvLyBTa2lwIGVtcHR5IHBhcnRzXG4gICAgICAgIGlmICghY3VycmVudEZvbGRlcikgY29udGludWU7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgZm9sZGVyIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgaWYgKCEoYXdhaXQgZW5zdXJlRm9sZGVyKGFwcCwgY3VycmVudEZvbGRlcikpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBvciBnZXRzIGEgam91cm5hbCBmaWxlIGZvciB0aGUgc3BlY2lmaWVkIGRhdGVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE9yQ3JlYXRlSm91cm5hbEZpbGUoXG4gICAgYXBwOiBBcHAsIFxuICAgIGpvdXJuYWxGb2xkZXI6IHN0cmluZywgXG4gICAgZmlsZW5hbWU6IHN0cmluZyxcbiAgICBmb2xkZXJGb3JtYXQ6IHN0cmluZyA9ICcnLFxuICAgIGluaXRpYWxDb250ZW50OiBzdHJpbmcgPSAnJ1xuKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcbiAgICAvLyBHZW5lcmF0ZSB0aGUgZmlsZSBwYXRoIHVzaW5nIHRoZSBuZXcgZnVuY3Rpb25cbiAgICBjb25zdCBmaWxlUGF0aCA9IGdldEpvdXJuYWxGaWxlUGF0aChqb3VybmFsRm9sZGVyLCBmaWxlbmFtZSwgZm9sZGVyRm9ybWF0KTtcbiAgICBcbiAgICAvLyBFbnN1cmUgYWxsIG5lY2Vzc2FyeSBmb2xkZXJzIGV4aXN0XG4gICAgaWYgKCEoYXdhaXQgZW5zdXJlQWxsRm9sZGVycyhhcHAsIGZpbGVQYXRoKSkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIHRoZSBmaWxlIGFscmVhZHkgZXhpc3RzXG4gICAgbGV0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICBcbiAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgIHJldHVybiBmaWxlO1xuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhdGUgdGhlIGZpbGUgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIHRyeSB7XG4gICAgICAgIGZpbGUgPSBhd2FpdCBhcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCBpbml0aWFsQ29udGVudCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYENyZWF0ZWQgam91cm5hbCBlbnRyeTogJHtmaWxlbmFtZX1gKTtcbiAgICAgICAgcmV0dXJuIGZpbGUgYXMgVEZpbGU7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIGNyZWF0ZSBqb3VybmFsIGVudHJ5OiAke2Vycm9yfWApO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGpvdXJuYWwgZW50cnk6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgZmlsZSBpcyBhIGpvdXJuYWwgZmlsZSBiYXNlZCBvbiBpdHMgbmFtZSBwYXR0ZXJuIGFuZCBsb2NhdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNKb3VybmFsRmlsZShmaWxlOiBURmlsZSwgam91cm5hbEZvbGRlcj86IHN0cmluZywgZm9sZGVyRm9ybWF0Pzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgLy8gQ2hlY2sgaWYgYmFzZW5hbWUgbWF0Y2hlcyBZWVlZLU1NLUREIHBhdHRlcm5cbiAgICBjb25zdCBpc0RhdGVCYXNlbmFtZSA9IGlzRGF0ZUZvcm1hdChmaWxlLmJhc2VuYW1lKTtcbiAgICBcbiAgICBpZiAoIWlzRGF0ZUJhc2VuYW1lKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgbm8gZm9sZGVyIGlzIHNwZWNpZmllZCwganVzdCBjaGVjayB0aGUgYmFzZW5hbWVcbiAgICBpZiAoIWpvdXJuYWxGb2xkZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIFdpdGggZm9sZGVyIGZvcm1hdCwgd2UgbmVlZCBhIG1vcmUgc29waGlzdGljYXRlZCBjaGVja1xuICAgIGlmIChmb2xkZXJGb3JtYXQpIHtcbiAgICAgICAgLy8gR2VuZXJhdGUgdGhlIGV4cGVjdGVkIGJhc2UgcGF0aFxuICAgICAgICBjb25zdCBkYXRlU3RyID0gZmlsZS5iYXNlbmFtZS5zcGxpdCgnLicpWzBdO1xuICAgICAgICBjb25zdCBbeWVhciwgbW9udGgsIGRheV0gPSBkYXRlU3RyLnNwbGl0KCctJyk7XG4gICAgICAgIFxuICAgICAgICBsZXQgZXhwZWN0ZWRQYXRoID0gZm9sZGVyRm9ybWF0O1xuICAgICAgICBleHBlY3RlZFBhdGggPSBleHBlY3RlZFBhdGgucmVwbGFjZSgnWVlZWScsIHllYXIpO1xuICAgICAgICBleHBlY3RlZFBhdGggPSBleHBlY3RlZFBhdGgucmVwbGFjZSgnTU0nLCBtb250aCk7XG4gICAgICAgIGV4cGVjdGVkUGF0aCA9IGV4cGVjdGVkUGF0aC5yZXBsYWNlKCdERCcsIGRheSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBleHBlY3RlZEZ1bGxQYXRoID0gYCR7am91cm5hbEZvbGRlcn0vJHtleHBlY3RlZFBhdGh9YDtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBmaWxlJ3MgcGF0aCBjb250YWlucyB0aGUgZXhwZWN0ZWQgcGF0aFxuICAgICAgICByZXR1cm4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoZXhwZWN0ZWRGdWxsUGF0aCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFdpdGhvdXQgZm9sZGVyIGZvcm1hdCwganVzdCBjaGVjayBpZiBpdCdzIGluIHRoZSBqb3VybmFsIGZvbGRlclxuICAgIHJldHVybiBmaWxlLnBhdGguc3RhcnRzV2l0aChqb3VybmFsRm9sZGVyICsgJy8nKTtcbn1cblxuLyoqXG4gKiBHZXRzIGFsbCBqb3VybmFsIGZpbGVzIGluIHRoZSB2YXVsdFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Sm91cm5hbEZpbGVzKGFwcDogQXBwLCBqb3VybmFsRm9sZGVyPzogc3RyaW5nLCBmb2xkZXJGb3JtYXQ/OiBzdHJpbmcpOiBURmlsZVtdIHtcbiAgICAvLyBHZXQgYWxsIG1hcmtkb3duIGZpbGVzIGluIHRoZSB2YXVsdFxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIC8vIEZpbHRlciBmaWxlcyB0aGF0IGZvbGxvdyBhIGRhaWx5IG5vdGUgcGF0dGVybiBhbmQgYXJlIGluIHRoZSBjb3JyZWN0IGZvbGRlciBzdHJ1Y3R1cmVcbiAgICByZXR1cm4gZmlsZXMuZmlsdGVyKChmaWxlKSA9PiBpc0pvdXJuYWxGaWxlKGZpbGUsIGpvdXJuYWxGb2xkZXIsIGZvbGRlckZvcm1hdCkpO1xufVxuXG4vKipcbiAqIFNvcnRzIGpvdXJuYWwgZmlsZXMgYnkgZGF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc29ydEpvdXJuYWxGaWxlcyhmaWxlczogVEZpbGVbXSwgc29ydERpcmVjdGlvbjogJ25ld2VzdC1maXJzdCcgfCAnb2xkZXN0LWZpcnN0Jyk6IFRGaWxlW10ge1xuICAgIHJldHVybiBmaWxlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmIChzb3J0RGlyZWN0aW9uID09PSAnbmV3ZXN0LWZpcnN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIGIuYmFzZW5hbWUubG9jYWxlQ29tcGFyZShhLmJhc2VuYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYi5iYXNlbmFtZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQWtEOzs7QUNBbEQsc0JBQXNEO0FBWS9DLElBQU0sbUJBQXVDO0FBQUEsRUFDaEQsZUFBZTtBQUFBLEVBQ2YsWUFBWTtBQUFBLEVBQ1osZUFBZTtBQUFBLEVBQ2Ysc0JBQXNCO0FBQUEsRUFDdEIsY0FBYztBQUFBLEVBQ2QsaUJBQWlCO0FBQ3JCO0FBRU8sSUFBTSx1QkFBTixjQUFtQyxpQ0FBaUI7QUFBQSxFQUd2RCxZQUFZLEtBQVUsUUFBMEI7QUFDNUMsVUFBTSxLQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDbEI7QUFBQSxFQUVBLFVB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SSxXQUFXLFdBQVcsR0FBRztBQUN6QixVQUFJLHdCQUFPLGlDQUFpQztBQUM1QztBQUFBLElBQ0o7QUFHQSxVQUFNLHVCQUF1QixHQUFHLFdBQVcsd0JBQXdCLFdBQVcsV0FBVyxJQUFJLGNBQWM7QUFBQTtBQUFBO0FBSTNHLFFBQUksQ0FBQyxRQUFRLG9CQUFvQixHQUFHO0FBQ2hDO0FBQUEsSUFDSjtBQUdBLFFBQUksd0JBQU8sWUFBWSxXQUFXLGlDQUFpQztBQUduRSxRQUFJLGVBQWU7QUFDbkIsaUJBQWE7QUFFYixlQUFXLFFBQVEsWUFBWTtBQUMzQixVQUFJO0FBRUEsY0FBTSxLQUFLLElBQUksTUFBTSxPQUFPLElBQUk7QUFDaEM7QUFBQSxNQUNKLFNBQVMsT0FBUDtBQUNFLGdCQUFRLE1BQU0sdUJBQXVCLEtBQUssU0FBUyxLQUFLO0FBQ3hEO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFHQSxRQUFJLGFBQWEsR0FBRztBQUNoQixVQUFJLHdCQUFPLFdBQVcsdUJBQXVCLFdBQVcsaUNBQWlDLCtCQUErQixHQUFJO0FBQUEsSUFDaEksT0FBTztBQUNILFVBQUksd0JBQU8sd0JBQXdCLHVDQUF1QyxHQUFJO0FBQUEsSUFDbEY7QUFHQSxRQUFJLGVBQWUsS0FBSyxLQUFLLGFBQWE7QUFDdEMsV0FBSyxZQUFZLEtBQUs7QUFBQSxJQUMxQjtBQUFBLEVBQ0o7QUFDSjtBQUVBLElBQU0saUJBQU4sY0FBNkIsdUJBQU07QUFBQSxFQUsvQixZQUFZLEtBQVUsWUFBb0I7QUFDdEMsVUFBTSxHQUFHO0FBQ1QsU0FBSyxhQUFhO0FBQUEsRUFDdEI7QUFBQSxFQUVBLFNBQVM7QUFDTCxVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUc5RCxTQUFLLGFBQWEsVUFBVSxTQUFTLE9BQU87QUFBQSxNQUN4QyxLQUFLO0FBQUEsTUFDTCxNQUFNLE9BQU8sS0FBSztBQUFBLElBQ3RCLENBQUM7QUFHRCxTQUFLLFdBQVcsVUFBVSxTQUFTLE9BQU87QUFBQSxNQUN0QyxLQUFLO0FBQUEsTUFDTCxNQUFNO0FBQUEsSUFDVixDQUFDO0FBQUEsRUFDTDtBQUFBLEVBRUEsZUFBZSxXQUFtQjtBQUM5QixTQUFLLFdBQVcsY0FBYyxHQUFHLGFBQWEsS0FBSztBQUFBLEVBQ3ZEO0FBQUEsRUFFQSxhQUFhLFNBQWlCO0FBQzFCLFNBQUssU0FBUyxjQUFjO0FBQUEsRUFDaEM7QUFBQSxFQUVBLFVBQVU7QUFDTixVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsTUFBTTtBQUFBLEVBQ3BCO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIl0KfQo=
