/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => JournalingPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  journalFolder: "journals",
  dateFormat: "YYYY-MM-DD",
  sortDirection: "newest-first",
  defaultExpandEntries: true,
  folderFormat: ""
};
var JournalingSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Continuous Journaling Settings" });
    new import_obsidian.Setting(containerEl).setName("Journal Folder").setDesc("Specify the folder where journal entries will be stored").addText((text) => text.setPlaceholder("journals").setValue(this.plugin.settings.journalFolder).onChange(async (value) => {
      this.plugin.settings.journalFolder = value.replace(/^\/+|\/+$/g, "");
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Date Format").setDesc("Format for journal filenames (YYYY-MM-DD recommended)").addText((text) => text.setPlaceholder("YYYY-MM-DD").setValue(this.plugin.settings.dateFormat).onChange(async (value) => {
      this.plugin.settings.dateFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Sort Direction").setDesc("How to sort journal entries in the continuous view").addDropdown((dropdown) => dropdown.addOption("newest-first", "Newest entries first").addOption("oldest-first", "Oldest entries first").setValue(this.plugin.settings.sortDirection).onChange(async (value) => {
      this.plugin.settings.sortDirection = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Default Expand Entries").setDesc("Automatically expand entries when opening the journals view").addToggle((toggle) => toggle.setValue(this.plugin.settings.defaultExpandEntries).onChange(async (value) => {
      this.plugin.settings.defaultExpandEntries = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Folder Structure Format").setDesc('Format pattern for organizing journal entries in subfolders. Examples: empty for flat structure, "YYYY" for yearly folders, "YYYY/MM" for monthly folders.').addText((text) => text.setPlaceholder("YYYY/MM").setValue(this.plugin.settings.folderFormat).onChange(async (value) => {
      this.plugin.settings.folderFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Migrate Journal Entries").setDesc("Move existing journal entries to the folder structure defined by the folder format pattern.").addButton((button) => button.setButtonText("Migrate Entries").setCta().onClick(async () => {
      await this.plugin.migrateJournalEntries();
    }));
  }
};

// src/journal-view.ts
var import_obsidian3 = require("obsidian");

// src/utils/date-utils.ts
function getTodayDate() {
  const today = new Date();
  return formatDateString(today);
}
function formatDateString(date) {
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, "0");
  const day = String(date.getDate()).padStart(2, "0");
  return `${year}-${month}-${day}`;
}
function formatDateForDisplay(dateString) {
  const date = new Date(dateString);
  const dateFormatOptions = {
    month: "short",
    year: "numeric",
    day: "numeric"
  };
  const formattedDate = new Intl.DateTimeFormat("en-US", dateFormatOptions).format(date);
  const day = date.getDate();
  const daySuffix = getDaySuffix(day);
  const parts = formattedDate.split(" ");
  return `${parts[0]} ${day}${daySuffix}, ${parts[2]}`;
}
function getDaySuffix(day) {
  if (day > 3 && day < 21)
    return "th";
  switch (day % 10) {
    case 1:
      return "st";
    case 2:
      return "nd";
    case 3:
      return "rd";
    default:
      return "th";
  }
}
function isDateFormat(text) {
  return /^\d{4}-\d{2}-\d{2}$/.test(text);
}

// src/utils/file-utils.ts
var import_obsidian2 = require("obsidian");
function getFilePath(folder, filename) {
  if (folder) {
    return `${folder}/${filename}`;
  }
  return filename;
}
async function ensureFolder(app, folderPath) {
  if (!folderPath) {
    return true;
  }
  const folderExists = app.vault.getAbstractFileByPath(folderPath);
  if (folderExists && !(folderExists instanceof import_obsidian2.TFolder)) {
    new import_obsidian2.Notice(`Cannot create folder: "${folderPath}" exists but is not a folder`);
    return false;
  }
  if (!folderExists) {
    try {
      await app.vault.createFolder(folderPath);
      new import_obsidian2.Notice(`Created folder: ${folderPath}`);
      return true;
    } catch (error) {
      new import_obsidian2.Notice(`Failed to create folder: ${error}`);
      console.error("Failed to create folder:", error);
      return false;
    }
  }
  return true;
}
function getJournalFilePath(journalFolder, filename, folderFormat = "") {
  if (!folderFormat) {
    return getFilePath(journalFolder, filename);
  }
  const datePart = filename.split(".")[0];
  if (!isDateFormat(datePart)) {
    return getFilePath(journalFolder, filename);
  }
  const [year, month, day] = datePart.split("-").map((part) => parseInt(part));
  let formattedPath = folderFormat;
  formattedPath = formattedPath.replace("YYYY", year.toString());
  formattedPath = formattedPath.replace("MM", month.toString().padStart(2, "0"));
  formattedPath = formattedPath.replace("DD", day.toString().padStart(2, "0"));
  if (journalFolder) {
    return `${journalFolder}/${formattedPath}/${filename}`;
  }
  return `${formattedPath}/${filename}`;
}
async function ensureAllFolders(app, filePath) {
  const pathParts = filePath.split("/");
  const fileNameIndex = pathParts.length - 1;
  let currentFolder = "";
  for (let i = 0; i < fileNameIndex; i++) {
    if (currentFolder) {
      currentFolder += "/";
    }
    currentFolder += pathParts[i];
    if (!currentFolder)
      continue;
    if (!await ensureFolder(app, currentFolder)) {
      return false;
    }
  }
  return true;
}
async function getOrCreateJournalFile(app, journalFolder, filename, folderFormat = "", initialContent = "") {
  const filePath = getJournalFilePath(journalFolder, filename, folderFormat);
  if (!await ensureAllFolders(app, filePath)) {
    return null;
  }
  let file = app.vault.getAbstractFileByPath(filePath);
  if (file instanceof import_obsidian2.TFile) {
    return file;
  }
  try {
    file = await app.vault.create(filePath, initialContent);
    new import_obsidian2.Notice(`Created journal entry: ${filename}`);
    return file;
  } catch (error) {
    new import_obsidian2.Notice(`Failed to create journal entry: ${error}`);
    console.error("Failed to create journal entry:", error);
    return null;
  }
}
function isJournalFile(file, journalFolder, folderFormat) {
  const isDateBasename = isDateFormat(file.basename);
  if (!isDateBasename) {
    return false;
  }
  if (!journalFolder) {
    return true;
  }
  if (folderFormat) {
    const dateStr = file.basename.split(".")[0];
    const [year, month, day] = dateStr.split("-");
    let expectedPath = folderFormat;
    expectedPath = expectedPath.replace("YYYY", year);
    expectedPath = expectedPath.replace("MM", month);
    expectedPath = expectedPath.replace("DD", day);
    const expectedFullPath = `${journalFolder}/${expectedPath}`;
    return file.path.startsWith(expectedFullPath);
  }
  return file.path.startsWith(journalFolder + "/");
}
function getJournalFiles(app, journalFolder, folderFormat) {
  const files = app.vault.getMarkdownFiles();
  return files.filter((file) => isJournalFile(file, journalFolder, folderFormat));
}
function sortJournalFiles(files, sortDirection) {
  return files.sort((a, b) => {
    if (sortDirection === "newest-first") {
      return b.basename.localeCompare(a.basename);
    } else {
      return a.basename.localeCompare(b.basename);
    }
  });
}

// src/journal-view.ts
var JournalView = class {
  constructor(plugin) {
    this.activeEditor = null;
    // Simple lazy loading properties
    this.allFiles = [];
    this.batchSize = 10;
    this.currentBatch = 0;
    this.loadMoreButton = null;
    this.plugin = plugin;
    this.registerCleanup();
  }
  // Opens the continuous journal view in a new leaf
  async open() {
    const leaf = this.plugin.app.workspace.getLeaf(true);
    await leaf.setViewState({
      type: "markdown",
      active: true
    });
    const contentEl = leaf.view.containerEl;
    contentEl.empty();
    const panel = contentEl.createDiv({ cls: "custom-journal-panel" });
    const journalFiles = getJournalFiles(
      this.plugin.app,
      this.plugin.settings.journalFolder,
      this.plugin.settings.folderFormat
    );
    if (journalFiles.length === 0) {
      new import_obsidian3.Notice("No journal entries found.");
      panel.createEl("div", {
        cls: "journal-empty-state",
        text: "No journal entries found. Create one by clicking the journals icon in the ribbon."
      });
      return;
    }
    this.allFiles = sortJournalFiles(journalFiles, this.plugin.settings.sortDirection);
    this.currentBatch = 0;
    await this.loadBatch(panel);
    if (this.currentBatch * this.batchSize < this.allFiles.length) {
      this.addLoadMoreButton(panel);
    }
  }
  // Load a batch of entries
  async loadBatch(panel) {
    const start = this.currentBatch * this.batchSize;
    const end = Math.min(start + this.batchSize, this.allFiles.length);
    panel.querySelectorAll(".journal-load-more-button").forEach((btn) => btn.remove());
    this.loadMoreButton = null;
    const filesToLoad = this.allFiles.slice(start, end);
    for (const file of filesToLoad) {
      try {
        const fileContent = await this.plugin.app.vault.read(file);
        this.addJournalEntry(panel, file, fileContent);
      } catch (error) {
        console.error(`Error reading file ${file.path}:`, error);
        this.addErrorMessage(panel, file.basename, error);
      }
    }
    this.currentBatch++;
    panel.querySelectorAll(".journal-load-more-button").forEach((btn) => btn.remove());
    if (this.currentBatch * this.batchSize < this.allFiles.length) {
      this.addLoadMoreButton(panel);
    }
  }
  // Add a "Load More" button
  addLoadMoreButton(panel) {
    panel.querySelectorAll(".journal-load-more-button").forEach((btn) => btn.remove());
    this.loadMoreButton = panel.createEl("button", {
      cls: "journal-load-more-button",
      text: "Load More Entries"
    });
    panel.appendChild(this.loadMoreButton);
    this.loadMoreButton.addEventListener("click", async () => {
      if (this.loadMoreButton) {
        this.loadMoreButton.textContent = "Loading...";
        this.loadMoreButton.setAttr("disabled", "true");
      }
      await this.loadBatch(panel);
    });
  }
  // Adds an error message to the panel when file reading fails
  addErrorMessage(panel, filename, error) {
    const errorDiv = panel.createDiv({ cls: "journal-entry journal-error" });
    const errorHeader = errorDiv.createDiv({ cls: "journal-entry-header" });
    errorHeader.createEl("h3", {
      cls: "journal-entry-title",
      text: `${filename} - Error`
    });
    const errorContent = errorDiv.createDiv({ cls: "journal-error-content" });
    errorContent.textContent = `Failed to load journal: ${error.message || error}`;
  }
  // Adds a journal entry to the panel
  addJournalEntry(panel, file, content) {
    const journalDate = file.basename;
    const journalEntry = panel.createDiv({ cls: "journal-entry" });
    const header = journalEntry.createDiv({ cls: "journal-entry-header" });
    const toggleButton = header.createEl("button", { cls: "collapsible-toggle" });
    if (this.plugin.settings.defaultExpandEntries) {
      toggleButton.addClass("toggle-expanded");
    }
    const title = header.createEl("h3", { cls: "journal-entry-title" });
    const titleLink = title.createEl("a", {
      cls: "journal-entry-link",
      text: formatDateForDisplay(journalDate)
    });
    titleLink.addEventListener("click", (event) => {
      event.preventDefault();
      this.plugin.app.workspace.openLinkText(file.basename, file.path);
    });
    const contentArea = journalEntry.createDiv({
      cls: "collapsible-content" + (this.plugin.settings.defaultExpandEntries ? " content-expanded" : "")
    });
    let currentContent = content;
    let isEditing = false;
    const renderedContent = contentArea.createDiv({
      cls: "rendered-content active-view"
    });
    const editableContent = contentArea.createEl("textarea", {
      cls: "editable-content",
      value: currentContent
    });
    const closeButton = contentArea.createEl("button", {
      cls: "journal-close-button",
      text: "Close"
    });
    closeButton.style.display = "none";
    const saveIndicator = contentArea.createDiv({
      cls: "journal-save-indicator",
      text: "Saved"
    });
    saveIndicator.style.display = "none";
    window.requestAnimationFrame(() => {
      editableContent.style.height = editableContent.scrollHeight + "px";
    });
    const renderContent = () => {
      renderedContent.empty();
      import_obsidian3.MarkdownRenderer.render(this.plugin.app, currentContent, renderedContent, file.path, this.plugin);
      this.makeHashtagsClickable(renderedContent);
    };
    renderContent();
    const enterEditMode = () => {
      isEditing = true;
      this.activeEditor = editableContent;
      editableContent.value = currentContent;
      renderedContent.classList.remove("active-view");
      editableContent.classList.add("active-view");
      closeButton.style.display = "block";
      editableContent.style.height = "auto";
      editableContent.style.height = editableContent.scrollHeight + "px";
      editableContent.focus();
    };
    const exitEditMode = async () => {
      if (isEditing) {
        currentContent = editableContent.value;
        await this.saveContentToFile(file, currentContent);
        renderContent();
        editableContent.classList.remove("active-view");
        closeButton.style.display = "none";
        renderedContent.classList.add("active-view");
        isEditing = false;
        if (this.activeEditor === editableContent) {
          this.activeEditor = null;
        }
      }
    };
    renderedContent.addEventListener("click", (event) => {
      const target = event.target;
      if (target.tagName === "A" || target.closest("a") || target.classList.contains("cm-hashtag") || target.closest(".cm-hashtag")) {
        return;
      }
      enterEditMode();
    });
    closeButton.addEventListener("click", () => {
      exitEditMode();
    });
    editableContent.addEventListener("keydown", (event) => {
      if (event.key === "Escape") {
        exitEditMode();
      }
    });
    editableContent.addEventListener("input", () => {
      editableContent.style.height = "auto";
      editableContent.style.height = editableContent.scrollHeight + "px";
      currentContent = editableContent.value;
    });
    let saveTimeout = null;
    editableContent.addEventListener("input", () => {
      saveIndicator.style.display = "block";
      saveIndicator.classList.remove("saved");
      saveIndicator.classList.add("saving");
      saveIndicator.textContent = "Saving...";
      if (saveTimeout) {
        clearTimeout(saveTimeout);
      }
      saveTimeout = setTimeout(async () => {
        await this.saveContentToFile(file, currentContent);
        saveIndicator.classList.remove("saving");
        saveIndicator.classList.add("saved");
        saveIndicator.textContent = "Saved";
        setTimeout(() => {
          if (saveIndicator.classList.contains("saved")) {
            saveIndicator.style.display = "none";
          }
        }, 2e3);
      }, 500);
    });
    toggleButton.addEventListener("click", () => {
      toggleButton.classList.toggle("toggle-expanded");
      contentArea.classList.toggle("content-expanded");
    });
  }
  /**
   * Saves the content to the file
   */
  async saveContentToFile(file, content) {
    try {
      await this.plugin.app.vault.modify(file, content);
    } catch (error) {
      new import_obsidian3.Notice(`Failed to save changes: ${error}`);
      console.error("Failed to save changes:", error);
    }
  }
  /**
   * Inserts a reference to a file into the active journal entry
   */
  insertFileReference(filePath) {
    if (!this.activeEditor) {
      new import_obsidian3.Notice("No active journal entry to insert file into");
      return;
    }
    const file = this.plugin.app.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian3.TFile)) {
      new import_obsidian3.Notice("Invalid file");
      return;
    }
    let fileReference;
    if (this.isImageFile(file)) {
      fileReference = `![[${file.name}]]`;
    } else if (this.isMarkdownFile(file)) {
      fileReference = `![[${file.name}]]`;
    } else {
      fileReference = `![[${file.name}]]`;
    }
    this.activeEditor.focus();
    const cursorPos = this.activeEditor.selectionStart;
    const textBefore = this.activeEditor.value.substring(0, cursorPos);
    const textAfter = this.activeEditor.value.substring(this.activeEditor.selectionEnd);
    const newText = textBefore + "\n\n" + fileReference + "\n\n" + textAfter;
    this.activeEditor.value = newText;
    const newCursorPos = cursorPos + fileReference.length + 4;
    this.activeEditor.setSelectionRange(newCursorPos, newCursorPos);
    const inputEvent = new Event("input", { bubbles: true, cancelable: true });
    this.activeEditor.dispatchEvent(inputEvent);
    new import_obsidian3.Notice(`Inserted reference to ${file.name}`);
  }
  /**
   * Check if a file is an image
   */
  isImageFile(file) {
    const imageExtensions = ["png", "jpg", "jpeg", "gif", "svg", "webp"];
    const ext = file.extension.toLowerCase();
    return imageExtensions.includes(ext);
  }
  /**
   * Check if a file is a markdown file
   */
  isMarkdownFile(file) {
    const ext = file.extension.toLowerCase();
    return ext === "md" || ext === "markdown";
  }
  registerCleanup() {
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("layout-change", () => {
        if (this.activeEditor) {
          const journalEntry = this.activeEditor.closest(".journal-entry");
          if (journalEntry) {
            const event = new KeyboardEvent("keydown", { key: "Escape" });
            this.activeEditor.dispatchEvent(event);
          }
          this.activeEditor = null;
        }
      })
    );
  }
  makeHashtagsClickable(contentEl) {
    const hashtags = contentEl.querySelectorAll(".cm-hashtag, .tag");
    hashtags.forEach((tag) => {
      var _a;
      if (tag instanceof HTMLElement) {
        const newTag = tag.cloneNode(true);
        (_a = tag.parentNode) == null ? void 0 : _a.replaceChild(newTag, tag);
        newTag.addEventListener("click", (e) => {
          var _a2;
          e.preventDefault();
          e.stopPropagation();
          const hashtagText = ((_a2 = newTag.textContent) == null ? void 0 : _a2.trim()) || "";
          this.openSearchWithHashtag(hashtagText);
        });
        newTag.style.cursor = "pointer";
      }
    });
  }
  openSearchWithHashtag(hashtag) {
    var _a, _b;
    const searchTerm = hashtag.startsWith("#") ? hashtag : `#${hashtag}`;
    try {
      if ((_a = this.plugin.app.internalPlugins.getPluginById("global-search")) == null ? void 0 : _a.instance.openGlobalSearch) {
        (_b = this.plugin.app.internalPlugins.getPluginById("global-search")) == null ? void 0 : _b.instance.openGlobalSearch(searchTerm);
        return;
      }
      if (this.plugin.app.commands.executeCommandById("global-search:open")) {
        setTimeout(() => {
          const searchInput = document.querySelector(".search-input-container input");
          if (searchInput instanceof HTMLInputElement) {
            searchInput.value = searchTerm;
            searchInput.dispatchEvent(new Event("input", { bubbles: true }));
          }
        }, 100);
        return;
      }
      const searchLeaf = this.plugin.app.workspace.getLeavesOfType("search")[0];
      if (searchLeaf) {
        this.plugin.app.workspace.setActiveLeaf(searchLeaf, { focus: true });
        setTimeout(() => {
          const searchInput = document.querySelector(".search-input-container input");
          if (searchInput instanceof HTMLInputElement) {
            searchInput.value = searchTerm;
            searchInput.dispatchEvent(new Event("input", { bubbles: true }));
          }
        }, 100);
        return;
      }
      new import_obsidian3.Notice(`Search for: ${searchTerm}`);
    } catch (error) {
      console.error("Error opening search:", error);
      new import_obsidian3.Notice(`Could not open search. Please search for: ${searchTerm}`);
    }
  }
};

// src/main.ts
var JournalingPlugin = class extends import_obsidian4.Plugin {
  async onload() {
    await this.loadSettings();
    this.journalView = new JournalView(this);
    const ribbonIconEl = this.addRibbonIcon(
      "notebook-text",
      "Open Journals",
      async (evt) => {
        await this.openJournalView();
      }
    );
    ribbonIconEl.addClass("journaling-ribbon-icon");
    this.addCommand({
      id: "open-journal-view",
      name: "Open Journal View",
      callback: () => {
        this.openJournalView();
      }
    });
    this.addCommand({
      id: "create-todays-journal",
      name: "Create/Open Today's Journal",
      callback: () => {
        this.createTodaysJournal();
      }
    });
    this.addSettingTab(new JournalingSettingTab(this.app, this));
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        if (file instanceof import_obsidian4.TFile) {
          menu.addItem((item) => {
            item.setTitle("Insert into Journal").setIcon("text-cursor-input").onClick(() => {
              const journalView = this.journalView;
              if (journalView) {
                journalView.insertFileReference(file.path);
              } else {
                new import_obsidian4.Notice("Open the journal view first to insert file reference");
              }
            });
          });
        }
      })
    );
  }
  // Opens the continuous journal view
  async openJournalView() {
    await this.createTodaysJournal();
    await this.journalView.open();
  }
  // Creates or opens today's journal entry
  async createTodaysJournal() {
    const date = getTodayDate();
    const fileName = `${date}.md`;
    const file = await getOrCreateJournalFile(
      this.app,
      this.settings.journalFolder,
      fileName,
      this.settings.folderFormat
      // Pass the folder format setting
    );
    if (!file) {
      new import_obsidian4.Notice("Failed to create or open today's journal");
      return;
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Migrates existing journal entries to the new folder structure
   */
  async migrateJournalEntries() {
    const journalFiles = getJournalFiles(
      this.app,
      this.settings.journalFolder,
      ""
      // Use empty folder format to get all files regardless of structure
    );
    if (journalFiles.length === 0) {
      new import_obsidian4.Notice("No journal entries found to migrate.");
      return;
    }
    if (!this.settings.folderFormat) {
      new import_obsidian4.Notice("Please set a folder format in settings before migrating.");
      return;
    }
    const confirmMessage = `Migrate ${journalFiles.length} journal entries to new folder structure? This will:
    1. Move files to folders based on the pattern: ${this.settings.folderFormat}
    2. Create any necessary folders
    3. Keep the original filename
    
    This operation cannot be undone automatically.`;
    if (!confirm(confirmMessage)) {
      return;
    }
    const modal = new MigrationModal(this.app, journalFiles.length);
    modal.open();
    let migratedCount = 0;
    let errorCount = 0;
    for (const file of journalFiles) {
      try {
        modal.updateStatus(`Migrating ${file.name}...`);
        const newPath = getJournalFilePath(
          this.settings.journalFolder,
          file.name,
          this.settings.folderFormat
        );
        if (file.path === newPath) {
          migratedCount++;
          modal.updateProgress(migratedCount);
          continue;
        }
        const content = await this.app.vault.read(file);
        await ensureAllFolders(this.app, newPath);
        await this.app.vault.create(newPath, content);
        await this.app.vault.delete(file);
        migratedCount++;
        modal.updateProgress(migratedCount);
      } catch (error) {
        console.error(`Error migrating file ${file.path}:`, error);
        modal.updateStatus(`Error migrating ${file.name}: ${error}`);
        errorCount++;
      }
    }
    modal.updateStatus(`Migration complete! Migrated ${migratedCount} files with ${errorCount} errors.`);
    setTimeout(() => {
      modal.close();
      new import_obsidian4.Notice(`Migration complete! Migrated ${migratedCount} files with ${errorCount} errors.`);
    }, 3e3);
  }
};
var MigrationModal = class extends import_obsidian4.Modal {
  constructor(app, totalFiles) {
    super(app);
    this.totalFiles = totalFiles;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Migrating Journal Entries" });
    this.progressEl = contentEl.createEl("div", {
      cls: "migration-progress",
      text: "0/" + this.totalFiles
    });
    this.statusEl = contentEl.createEl("div", {
      cls: "migration-status",
      text: "Starting migration..."
    });
  }
  updateProgress(completed) {
    this.progressEl.textContent = `${completed}/${this.totalFiles}`;
  }
  updateStatus(message) {
    this.statusEl.textContent = message;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9qb3VybmFsLXZpZXcudHMiLCAic3JjL3V0aWxzL2RhdGUtdXRpbHMudHMiLCAic3JjL3V0aWxzL2ZpbGUtdXRpbHMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgUGx1Z2luLCBOb3RpY2UsIFRGaWxlLCBNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIEpvdXJuYWxpbmdTZXR0aW5ncywgSm91cm5hbGluZ1NldHRpbmdUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IEpvdXJuYWxWaWV3IH0gZnJvbSAnLi9qb3VybmFsLXZpZXcnO1xuaW1wb3J0IHsgZ2V0VG9kYXlEYXRlIH0gZnJvbSAnLi91dGlscy9kYXRlLXV0aWxzJztcbmltcG9ydCB7IGdldE9yQ3JlYXRlSm91cm5hbEZpbGUsIGdldEpvdXJuYWxGaWxlcywgZ2V0Sm91cm5hbEZpbGVQYXRoLCBlbnN1cmVBbGxGb2xkZXJzIH0gZnJvbSAnLi91dGlscy9maWxlLXV0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSm91cm5hbGluZ1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IEpvdXJuYWxpbmdTZXR0aW5ncztcbiAgICBqb3VybmFsVmlldzogSm91cm5hbFZpZXc7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIC8vIExvYWQgc2V0dGluZ3NcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaXRpYWxpemUgam91cm5hbCB2aWV3XG4gICAgICAgIHRoaXMuam91cm5hbFZpZXcgPSBuZXcgSm91cm5hbFZpZXcodGhpcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgcmliYm9uIGljb25cbiAgICAgICAgY29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKFxuICAgICAgICAgICAgJ25vdGVib29rLXRleHQnLCBcbiAgICAgICAgICAgICdPcGVuIEpvdXJuYWxzJywgXG4gICAgICAgICAgICBhc3luYyAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vcGVuSm91cm5hbFZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgcmliYm9uSWNvbkVsLmFkZENsYXNzKCdqb3VybmFsaW5nLXJpYmJvbi1pY29uJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgY29tbWFuZCB0byBvcGVuIGpvdXJuYWwgdmlld1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdvcGVuLWpvdXJuYWwtdmlldycsXG4gICAgICAgICAgICBuYW1lOiAnT3BlbiBKb3VybmFsIFZpZXcnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5Kb3VybmFsVmlldygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgY29tbWFuZCBmb3IgY3JlYXRpbmcgdG9kYXkncyBqb3VybmFsXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2NyZWF0ZS10b2RheXMtam91cm5hbCcsXG4gICAgICAgICAgICBuYW1lOiAnQ3JlYXRlL09wZW4gVG9kYXlcXCdzIEpvdXJuYWwnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVRvZGF5c0pvdXJuYWwoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVnaXN0ZXIgc2V0dGluZ3MgdGFiXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgSm91cm5hbGluZ1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICAvLyBBZGQgY29udGV4dCBtZW51IG9wdGlvbiBmb3IgZmlsZXMgdG8gaW5zZXJ0IGludG8gam91cm5hbHNcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW1lbnUnLCAobWVudSwgZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBmaWxlIGlzIGEgVEZpbGUgKGFjdHVhbCBmaWxlKVxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKCdJbnNlcnQgaW50byBKb3VybmFsJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigndGV4dC1jdXJzb3ItaW5wdXQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgYWN0aXZlIGpvdXJuYWwgdmlldyBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgam91cm5hbFZpZXcgPSB0aGlzLmpvdXJuYWxWaWV3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoam91cm5hbFZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgZmlsZSByZWZlcmVuY2UgaW50byB0aGUgYWN0aXZlIGVkaXRvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam91cm5hbFZpZXcuaW5zZXJ0RmlsZVJlZmVyZW5jZShmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnT3BlbiB0aGUgam91cm5hbCB2aWV3IGZpcnN0IHRvIGluc2VydCBmaWxlIHJlZmVyZW5jZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gT3BlbnMgdGhlIGNvbnRpbnVvdXMgam91cm5hbCB2aWV3XG4gICAgYXN5bmMgb3BlbkpvdXJuYWxWaWV3KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBGaXJzdCwgZW5zdXJlIHRvZGF5J3Mgam91cm5hbCBleGlzdHNcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVUb2RheXNKb3VybmFsKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBUaGVuIG9wZW4gdGhlIGNvbnRpbnVvdXMgdmlld1xuICAgICAgICBhd2FpdCB0aGlzLmpvdXJuYWxWaWV3Lm9wZW4oKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlcyBvciBvcGVucyB0b2RheSdzIGpvdXJuYWwgZW50cnlcbiAgICBhc3luYyBjcmVhdGVUb2RheXNKb3VybmFsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VG9kYXlEYXRlKCk7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7ZGF0ZX0ubWRgO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IGdldE9yQ3JlYXRlSm91cm5hbEZpbGUoXG4gICAgICAgICAgICB0aGlzLmFwcCwgXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmpvdXJuYWxGb2xkZXIsIFxuICAgICAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmZvbGRlckZvcm1hdCAvLyBQYXNzIHRoZSBmb2xkZXIgZm9ybWF0IHNldHRpbmdcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghZmlsZSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGNyZWF0ZSBvciBvcGVuIHRvZGF5XFwncyBqb3VybmFsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWlncmF0ZXMgZXhpc3Rpbmcgam91cm5hbCBlbnRyaWVzIHRvIHRoZSBuZXcgZm9sZGVyIHN0cnVjdHVyZVxuICAgICAqL1xuICAgIGFzeW5jIG1pZ3JhdGVKb3VybmFsRW50cmllcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgam91cm5hbEZpbGVzID0gZ2V0Sm91cm5hbEZpbGVzKFxuICAgICAgICAgICAgdGhpcy5hcHAsIFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5qb3VybmFsRm9sZGVyLFxuICAgICAgICAgICAgJycgLy8gVXNlIGVtcHR5IGZvbGRlciBmb3JtYXQgdG8gZ2V0IGFsbCBmaWxlcyByZWdhcmRsZXNzIG9mIHN0cnVjdHVyZVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGpvdXJuYWxGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGpvdXJuYWwgZW50cmllcyBmb3VuZCB0byBtaWdyYXRlLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBubyBmb2xkZXIgZm9ybWF0IGlzIHNldCwgbm90aGluZyB0byBtaWdyYXRlXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5mb2xkZXJGb3JtYXQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBzZXQgYSBmb2xkZXIgZm9ybWF0IGluIHNldHRpbmdzIGJlZm9yZSBtaWdyYXRpbmcuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENvbmZpcm1hdGlvbiBkaWFsb2dcbiAgICAgICAgY29uc3QgY29uZmlybU1lc3NhZ2UgPSBgTWlncmF0ZSAke2pvdXJuYWxGaWxlcy5sZW5ndGh9IGpvdXJuYWwgZW50cmllcyB0byBuZXcgZm9sZGVyIHN0cnVjdHVyZT8gVGhpcyB3aWxsOlxuICAgIDEuIE1vdmUgZmlsZXMgdG8gZm9sZGVycyBiYXNlZCBvbiB0aGUgcGF0dGVybjogJHt0aGlzLnNldHRpbmdzLmZvbGRlckZvcm1hdH1cbiAgICAyLiBDcmVhdGUgYW55IG5lY2Vzc2FyeSBmb2xkZXJzXG4gICAgMy4gS2VlcCB0aGUgb3JpZ2luYWwgZmlsZW5hbWVcbiAgICBcbiAgICBUaGlzIG9wZXJhdGlvbiBjYW5ub3QgYmUgdW5kb25lIGF1dG9tYXRpY2FsbHkuYDtcbiAgICAgICAgXG4gICAgICAgIGlmICghY29uZmlybShjb25maXJtTWVzc2FnZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGFuZCBvcGVuIG1vZGFsXG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1pZ3JhdGlvbk1vZGFsKHRoaXMuYXBwLCBqb3VybmFsRmlsZXMubGVuZ3RoKTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICBcbiAgICAgICAgLy8gVHJhY2sgcHJvZ3Jlc3NcbiAgICAgICAgbGV0IG1pZ3JhdGVkQ291bnQgPSAwO1xuICAgICAgICBsZXQgZXJyb3JDb3VudCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2Ygam91cm5hbEZpbGVzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzdGF0dXNcbiAgICAgICAgICAgICAgICBtb2RhbC51cGRhdGVTdGF0dXMoYE1pZ3JhdGluZyAke2ZpbGUubmFtZX0uLi5gKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSB0aGUgbmV3IHBhdGggYmFzZWQgb24gdGhlIGN1cnJlbnQgZm9sZGVyIGZvcm1hdFxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhdGggPSBnZXRKb3VybmFsRmlsZVBhdGgoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muam91cm5hbEZvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmZvbGRlckZvcm1hdFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2tpcCBpZiBmaWxlIGlzIGFscmVhZHkgaW4gdGhlIGNvcnJlY3QgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5wYXRoID09PSBuZXdQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pZ3JhdGVkQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwudXBkYXRlUHJvZ3Jlc3MobWlncmF0ZWRDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBSZWFkIGZpbGUgY29udGVudFxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBhbGwgZm9sZGVycyBpbiB0aGUgcGF0aCBleGlzdFxuICAgICAgICAgICAgICAgIGF3YWl0IGVuc3VyZUFsbEZvbGRlcnModGhpcy5hcHAsIG5ld1BhdGgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgZmlsZSBhdCB0aGUgbmV3IGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG5ld1BhdGgsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgb3JpZ2luYWwgZmlsZVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmRlbGV0ZShmaWxlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBtaWdyYXRlZENvdW50Kys7XG4gICAgICAgICAgICAgICAgbW9kYWwudXBkYXRlUHJvZ3Jlc3MobWlncmF0ZWRDb3VudCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG1pZ3JhdGluZyBmaWxlICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbW9kYWwudXBkYXRlU3RhdHVzKGBFcnJvciBtaWdyYXRpbmcgJHtmaWxlLm5hbWV9OiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgIGVycm9yQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGZpbmFsIHN0YXR1c1xuICAgICAgICBtb2RhbC51cGRhdGVTdGF0dXMoYE1pZ3JhdGlvbiBjb21wbGV0ZSEgTWlncmF0ZWQgJHttaWdyYXRlZENvdW50fSBmaWxlcyB3aXRoICR7ZXJyb3JDb3VudH0gZXJyb3JzLmApO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xvc2UgbW9kYWwgYWZ0ZXIgYSBkZWxheVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBNaWdyYXRpb24gY29tcGxldGUhIE1pZ3JhdGVkICR7bWlncmF0ZWRDb3VudH0gZmlsZXMgd2l0aCAke2Vycm9yQ291bnR9IGVycm9ycy5gKTtcbiAgICAgICAgfSwgMzAwMCk7XG4gICAgfVxufVxuXG5jbGFzcyBNaWdyYXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICB0b3RhbEZpbGVzOiBudW1iZXI7XG4gICAgcHJvZ3Jlc3NFbDogSFRNTEVsZW1lbnQ7XG4gICAgc3RhdHVzRWw6IEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0b3RhbEZpbGVzOiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy50b3RhbEZpbGVzID0gdG90YWxGaWxlcztcbiAgICB9XG4gICAgXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ01pZ3JhdGluZyBKb3VybmFsIEVudHJpZXMnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHByb2dyZXNzIGRpc3BsYXlcbiAgICAgICAgdGhpcy5wcm9ncmVzc0VsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgICAgICAgY2xzOiAnbWlncmF0aW9uLXByb2dyZXNzJyxcbiAgICAgICAgICAgIHRleHQ6ICcwLycgKyB0aGlzLnRvdGFsRmlsZXNcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgc3RhdHVzIG1lc3NhZ2VcbiAgICAgICAgdGhpcy5zdGF0dXNFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnbWlncmF0aW9uLXN0YXR1cycsXG4gICAgICAgICAgICB0ZXh0OiAnU3RhcnRpbmcgbWlncmF0aW9uLi4uJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgdXBkYXRlUHJvZ3Jlc3MoY29tcGxldGVkOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0VsLnRleHRDb250ZW50ID0gYCR7Y29tcGxldGVkfS8ke3RoaXMudG90YWxGaWxlc31gO1xuICAgIH1cbiAgICBcbiAgICB1cGRhdGVTdGF0dXMobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc3RhdHVzRWwudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIH1cbiAgICBcbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE1vZGFsIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEpvdXJuYWxpbmdQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBKb3VybmFsaW5nU2V0dGluZ3Mge1xuICAgIGpvdXJuYWxGb2xkZXI6IHN0cmluZztcbiAgICBkYXRlRm9ybWF0OiBzdHJpbmc7XG4gICAgc29ydERpcmVjdGlvbjogJ25ld2VzdC1maXJzdCcgfCAnb2xkZXN0LWZpcnN0JztcbiAgICBkZWZhdWx0RXhwYW5kRW50cmllczogYm9vbGVhbjtcbiAgICBmb2xkZXJGb3JtYXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEpvdXJuYWxpbmdTZXR0aW5ncyA9IHtcbiAgICBqb3VybmFsRm9sZGVyOiAnam91cm5hbHMnLFxuICAgIGRhdGVGb3JtYXQ6ICdZWVlZLU1NLUREJyxcbiAgICBzb3J0RGlyZWN0aW9uOiAnbmV3ZXN0LWZpcnN0JyxcbiAgICBkZWZhdWx0RXhwYW5kRW50cmllczogdHJ1ZSxcbiAgICBmb2xkZXJGb3JtYXQ6ICcnLFxufTtcblxuZXhwb3J0IGNsYXNzIEpvdXJuYWxpbmdTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBKb3VybmFsaW5nUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogSm91cm5hbGluZ1BsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ29udGludW91cyBKb3VybmFsaW5nIFNldHRpbmdzJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdKb3VybmFsIEZvbGRlcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnU3BlY2lmeSB0aGUgZm9sZGVyIHdoZXJlIGpvdXJuYWwgZW50cmllcyB3aWxsIGJlIHN0b3JlZCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2pvdXJuYWxzJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbEZvbGRlcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzIGZvciBjb25zaXN0ZW5jeVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5qb3VybmFsRm9sZGVyID0gdmFsdWUucmVwbGFjZSgvXlxcLyt8XFwvKyQvZywgJycpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGF0ZSBGb3JtYXQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Zvcm1hdCBmb3Igam91cm5hbCBmaWxlbmFtZXMgKFlZWVktTU0tREQgcmVjb21tZW5kZWQpJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignWVlZWS1NTS1ERCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRhdGVGb3JtYXQpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTb3J0IERpcmVjdGlvbicpXG4gICAgICAgICAgICAuc2V0RGVzYygnSG93IHRvIHNvcnQgam91cm5hbCBlbnRyaWVzIGluIHRoZSBjb250aW51b3VzIHZpZXcnKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbmV3ZXN0LWZpcnN0JywgJ05ld2VzdCBlbnRyaWVzIGZpcnN0JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdvbGRlc3QtZmlyc3QnLCAnT2xkZXN0IGVudHJpZXMgZmlyc3QnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb3J0RGlyZWN0aW9uKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICduZXdlc3QtZmlyc3QnIHwgJ29sZGVzdC1maXJzdCcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydERpcmVjdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVmYXVsdCBFeHBhbmQgRW50cmllcycpXG4gICAgICAgICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBleHBhbmQgZW50cmllcyB3aGVuIG9wZW5pbmcgdGhlIGpvdXJuYWxzIHZpZXcnKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRFeHBhbmRFbnRyaWVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEV4cGFuZEVudHJpZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0ZvbGRlciBTdHJ1Y3R1cmUgRm9ybWF0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdGb3JtYXQgcGF0dGVybiBmb3Igb3JnYW5pemluZyBqb3VybmFsIGVudHJpZXMgaW4gc3ViZm9sZGVycy4gRXhhbXBsZXM6IGVtcHR5IGZvciBmbGF0IHN0cnVjdHVyZSwgXCJZWVlZXCIgZm9yIHllYXJseSBmb2xkZXJzLCBcIllZWVkvTU1cIiBmb3IgbW9udGhseSBmb2xkZXJzLicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1lZWVkvTU0nKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJGb3JtYXQpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJGb3JtYXQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdNaWdyYXRlIEpvdXJuYWwgRW50cmllcycpXG4gICAgICAgICAgICAuc2V0RGVzYygnTW92ZSBleGlzdGluZyBqb3VybmFsIGVudHJpZXMgdG8gdGhlIGZvbGRlciBzdHJ1Y3R1cmUgZGVmaW5lZCBieSB0aGUgZm9sZGVyIGZvcm1hdCBwYXR0ZXJuLicpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnTWlncmF0ZSBFbnRyaWVzJylcbiAgICAgICAgICAgICAgICAuc2V0Q3RhKCkgLy8gTWFrZSBpdCBhIGNhbGwtdG8tYWN0aW9uIGJ1dHRvblxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ubWlncmF0ZUpvdXJuYWxFbnRyaWVzKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59IiwgImltcG9ydCB7IE1hcmtkb3duUmVuZGVyZXIsIE5vdGljZSwgVEZpbGUsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgSm91cm5hbGluZ1BsdWdpbiBmcm9tICcuL21haW4nO1xuaW1wb3J0IHsgZm9ybWF0RGF0ZUZvckRpc3BsYXkgfSBmcm9tICcuL3V0aWxzL2RhdGUtdXRpbHMnO1xuaW1wb3J0IHsgZ2V0Sm91cm5hbEZpbGVzLCBzb3J0Sm91cm5hbEZpbGVzIH0gZnJvbSAnLi91dGlscy9maWxlLXV0aWxzJztcblxuZXhwb3J0IGNsYXNzIEpvdXJuYWxWaWV3IHtcbiAgICBwbHVnaW46IEpvdXJuYWxpbmdQbHVnaW47XG4gICAgYWN0aXZlRWRpdG9yOiBIVE1MVGV4dEFyZWFFbGVtZW50IHwgbnVsbCA9IG51bGw7XG4gICAgXG4gICAgLy8gU2ltcGxlIGxhenkgbG9hZGluZyBwcm9wZXJ0aWVzXG4gICAgcHJpdmF0ZSBhbGxGaWxlczogVEZpbGVbXSA9IFtdO1xuICAgIHByaXZhdGUgYmF0Y2hTaXplOiBudW1iZXIgPSAxMDtcbiAgICBwcml2YXRlIGN1cnJlbnRCYXRjaDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIGxvYWRNb3JlQnV0dG9uOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogSm91cm5hbGluZ1BsdWdpbikge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5yZWdpc3RlckNsZWFudXAoKTtcbiAgICB9XG4gICAgXG4gICAgLy8gT3BlbnMgdGhlIGNvbnRpbnVvdXMgam91cm5hbCB2aWV3IGluIGEgbmV3IGxlYWZcbiAgICBhc3luYyBvcGVuKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgbGVhZiAob3BlbnMgYSBuZXcgdGFiKVxuICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0IHRoZSB2aWV3IHN0YXRlIHRvIE1hcmtkb3duIHRvIGFjY2VzcyBjb250YWluZXJFbFxuICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgICB0eXBlOiBcIm1hcmtkb3duXCIsXG4gICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtYWluIGNvbnRhaW5lclxuICAgICAgICBjb25zdCBjb250ZW50RWwgPSBsZWFmLnZpZXcuY29udGFpbmVyRWw7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGEgc2Nyb2xsYWJsZSBwYW5lbCBmb3Igam91cm5hbCBlbnRyaWVzXG4gICAgICAgIGNvbnN0IHBhbmVsID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ2N1c3RvbS1qb3VybmFsLXBhbmVsJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBhbGwgam91cm5hbCBmaWxlcywgcGFzc2luZyB0aGUgZm9sZGVyIGZvcm1hdFxuICAgICAgICBjb25zdCBqb3VybmFsRmlsZXMgPSBnZXRKb3VybmFsRmlsZXMoXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAsIFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbEZvbGRlcixcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbGRlckZvcm1hdFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGpvdXJuYWxGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGpvdXJuYWwgZW50cmllcyBmb3VuZC4nKTtcbiAgICAgICAgICAgIHBhbmVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgICAgICAgICAgIGNsczogJ2pvdXJuYWwtZW1wdHktc3RhdGUnLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdObyBqb3VybmFsIGVudHJpZXMgZm91bmQuIENyZWF0ZSBvbmUgYnkgY2xpY2tpbmcgdGhlIGpvdXJuYWxzIGljb24gaW4gdGhlIHJpYmJvbi4nIFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNvcnQgdGhlIGZpbGVzIGFjY29yZGluZyB0byB1c2VyIHByZWZlcmVuY2VcbiAgICAgICAgdGhpcy5hbGxGaWxlcyA9IHNvcnRKb3VybmFsRmlsZXMoam91cm5hbEZpbGVzLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb3J0RGlyZWN0aW9uKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlc2V0IGJhdGNoIGNvdW50ZXJcbiAgICAgICAgdGhpcy5jdXJyZW50QmF0Y2ggPSAwO1xuICAgICAgICBcbiAgICAgICAgLy8gTG9hZCB0aGUgZmlyc3QgYmF0Y2ggb2YgZW50cmllc1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRCYXRjaChwYW5lbCk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgXCJMb2FkIE1vcmVcIiBidXR0b24gaWYgdGhlcmUgYXJlIG1vcmUgZW50cmllc1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50QmF0Y2ggKiB0aGlzLmJhdGNoU2l6ZSA8IHRoaXMuYWxsRmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmFkZExvYWRNb3JlQnV0dG9uKHBhbmVsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBMb2FkIGEgYmF0Y2ggb2YgZW50cmllc1xuICAgIHByaXZhdGUgYXN5bmMgbG9hZEJhdGNoKHBhbmVsOiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBzdGFydCA9IHRoaXMuY3VycmVudEJhdGNoICogdGhpcy5iYXRjaFNpemU7XG4gICAgICAgIGNvbnN0IGVuZCA9IE1hdGgubWluKHN0YXJ0ICsgdGhpcy5iYXRjaFNpemUsIHRoaXMuYWxsRmlsZXMubGVuZ3RoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlbW92ZSBBTEwgXCJMb2FkIE1vcmVcIiBidXR0b25zIHRvIGVuc3VyZSB0aGVyZSBhcmVuJ3QgZHVwbGljYXRlc1xuICAgICAgICBwYW5lbC5xdWVyeVNlbGVjdG9yQWxsKCcuam91cm5hbC1sb2FkLW1vcmUtYnV0dG9uJykuZm9yRWFjaChidG4gPT4gYnRuLnJlbW92ZSgpKTtcbiAgICAgICAgdGhpcy5sb2FkTW9yZUJ1dHRvbiA9IG51bGw7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgdGhlIGZpbGVzIGZvciB0aGlzIGJhdGNoXG4gICAgICAgIGNvbnN0IGZpbGVzVG9Mb2FkID0gdGhpcy5hbGxGaWxlcy5zbGljZShzdGFydCwgZW5kKTtcbiAgICAgICAgXG4gICAgICAgIC8vIExvYWQgZWFjaCBmaWxlIGFuZCBhZGQgaXQgdG8gdGhlIHBhbmVsXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlc1RvTG9hZCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkSm91cm5hbEVudHJ5KHBhbmVsLCBmaWxlLCBmaWxlQ29udGVudCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlYWRpbmcgZmlsZSAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkRXJyb3JNZXNzYWdlKHBhbmVsLCBmaWxlLmJhc2VuYW1lLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEluY3JlbWVudCB0aGUgYmF0Y2ggY291bnRlclxuICAgICAgICB0aGlzLmN1cnJlbnRCYXRjaCsrO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlJ3ZlIHJlbW92ZWQgYWxsIGxvYWQgbW9yZSBidXR0b25zIGFnYWluIChqdXN0IHRvIGJlIHNhZmUpXG4gICAgICAgIHBhbmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5qb3VybmFsLWxvYWQtbW9yZS1idXR0b24nKS5mb3JFYWNoKGJ0biA9PiBidG4ucmVtb3ZlKCkpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHRoZSBcIkxvYWQgTW9yZVwiIGJ1dHRvbiBhdCB0aGUgZW5kIGlmIHRoZXJlIGFyZSBtb3JlIGVudHJpZXMgdG8gbG9hZFxuICAgICAgICBpZiAodGhpcy5jdXJyZW50QmF0Y2ggKiB0aGlzLmJhdGNoU2l6ZSA8IHRoaXMuYWxsRmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmFkZExvYWRNb3JlQnV0dG9uKHBhbmVsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBhIFwiTG9hZCBNb3JlXCIgYnV0dG9uXG4gICAgcHJpdmF0ZSBhZGRMb2FkTW9yZUJ1dHRvbihwYW5lbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gTWFrZSBzdXJlIGFueSBleGlzdGluZyBidXR0b24gaXMgcmVtb3ZlZCBmaXJzdFxuICAgICAgICBwYW5lbC5xdWVyeVNlbGVjdG9yQWxsKCcuam91cm5hbC1sb2FkLW1vcmUtYnV0dG9uJykuZm9yRWFjaChidG4gPT4gYnRuLnJlbW92ZSgpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgYnV0dG9uXG4gICAgICAgIHRoaXMubG9hZE1vcmVCdXR0b24gPSBwYW5lbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgY2xzOiAnam91cm5hbC1sb2FkLW1vcmUtYnV0dG9uJyxcbiAgICAgICAgICAgIHRleHQ6ICdMb2FkIE1vcmUgRW50cmllcydcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGJ1dHRvbiBpcyBhdCB0aGUgZW5kIG9mIHRoZSBwYW5lbFxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZCh0aGlzLmxvYWRNb3JlQnV0dG9uKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBjbGljayBldmVudFxuICAgICAgICB0aGlzLmxvYWRNb3JlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2hvdyBsb2FkaW5nIHN0YXRlXG4gICAgICAgICAgICBpZiAodGhpcy5sb2FkTW9yZUJ1dHRvbikge1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZE1vcmVCdXR0b24udGV4dENvbnRlbnQgPSAnTG9hZGluZy4uLic7XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkTW9yZUJ1dHRvbi5zZXRBdHRyKCdkaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIExvYWQgdGhlIG5leHQgYmF0Y2hcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubG9hZEJhdGNoKHBhbmVsKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZHMgYW4gZXJyb3IgbWVzc2FnZSB0byB0aGUgcGFuZWwgd2hlbiBmaWxlIHJlYWRpbmcgZmFpbHNcbiAgICBwcml2YXRlIGFkZEVycm9yTWVzc2FnZShwYW5lbDogSFRNTEVsZW1lbnQsIGZpbGVuYW1lOiBzdHJpbmcsIGVycm9yOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZXJyb3JEaXYgPSBwYW5lbC5jcmVhdGVEaXYoeyBjbHM6ICdqb3VybmFsLWVudHJ5IGpvdXJuYWwtZXJyb3InIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXJyb3JIZWFkZXIgPSBlcnJvckRpdi5jcmVhdGVEaXYoeyBjbHM6ICdqb3VybmFsLWVudHJ5LWhlYWRlcicgfSk7XG4gICAgICAgIGVycm9ySGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgXG4gICAgICAgICAgICBjbHM6ICdqb3VybmFsLWVudHJ5LXRpdGxlJyxcbiAgICAgICAgICAgIHRleHQ6IGAke2ZpbGVuYW1lfSAtIEVycm9yYCBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBlcnJvckNvbnRlbnQgPSBlcnJvckRpdi5jcmVhdGVEaXYoeyBjbHM6ICdqb3VybmFsLWVycm9yLWNvbnRlbnQnIH0pO1xuICAgICAgICBlcnJvckNvbnRlbnQudGV4dENvbnRlbnQgPSBgRmFpbGVkIHRvIGxvYWQgam91cm5hbDogJHtlcnJvci5tZXNzYWdlIHx8IGVycm9yfWA7XG4gICAgfVxuICAgIFxuICAgIC8vIEFkZHMgYSBqb3VybmFsIGVudHJ5IHRvIHRoZSBwYW5lbFxuICAgIHByaXZhdGUgYWRkSm91cm5hbEVudHJ5KHBhbmVsOiBIVE1MRWxlbWVudCwgZmlsZTogVEZpbGUsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBqb3VybmFsRGF0ZSA9IGZpbGUuYmFzZW5hbWU7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIG1haW4gY29udGFpbmVyIGZvciB0aGlzIGVudHJ5XG4gICAgICAgIGNvbnN0IGpvdXJuYWxFbnRyeSA9IHBhbmVsLmNyZWF0ZURpdih7IGNsczogJ2pvdXJuYWwtZW50cnknIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBoZWFkZXIgc2VjdGlvblxuICAgICAgICBjb25zdCBoZWFkZXIgPSBqb3VybmFsRW50cnkuY3JlYXRlRGl2KHsgY2xzOiAnam91cm5hbC1lbnRyeS1oZWFkZXInIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHRvZ2dsZSBidXR0b24gZm9yIGNvbGxhcHNpbmcvZXhwYW5kaW5nXG4gICAgICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbiA9IGhlYWRlci5jcmVhdGVFbCgnYnV0dG9uJywgeyBjbHM6ICdjb2xsYXBzaWJsZS10b2dnbGUnIH0pO1xuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEV4cGFuZEVudHJpZXMpIHtcbiAgICAgICAgICAgIHRvZ2dsZUJ1dHRvbi5hZGRDbGFzcygndG9nZ2xlLWV4cGFuZGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0aXRsZSB3aXRoIGxpbmsgdG8gdGhlIG9yaWdpbmFsIGZpbGVcbiAgICAgICAgY29uc3QgdGl0bGUgPSBoZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyBjbHM6ICdqb3VybmFsLWVudHJ5LXRpdGxlJyB9KTtcbiAgICAgICAgY29uc3QgdGl0bGVMaW5rID0gdGl0bGUuY3JlYXRlRWwoJ2EnLCB7IFxuICAgICAgICAgICAgY2xzOiAnam91cm5hbC1lbnRyeS1saW5rJyxcbiAgICAgICAgICAgIHRleHQ6IGZvcm1hdERhdGVGb3JEaXNwbGF5KGpvdXJuYWxEYXRlKVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBjbGljayBvbiB0aGUgdGl0bGUgdG8gb3BlbiB0aGUgZmlsZVxuICAgICAgICB0aXRsZUxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dChmaWxlLmJhc2VuYW1lLCBmaWxlLnBhdGgpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgY29udGVudCBhcmVhXG4gICAgICAgIGNvbnN0IGNvbnRlbnRBcmVhID0gam91cm5hbEVudHJ5LmNyZWF0ZURpdih7IFxuICAgICAgICAgICAgY2xzOiAnY29sbGFwc2libGUtY29udGVudCcgKyAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEV4cGFuZEVudHJpZXMgPyAnIGNvbnRlbnQtZXhwYW5kZWQnIDogJycpXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVHJhY2sgdGhlIGN1cnJlbnQgY29udGVudFxuICAgICAgICBsZXQgY3VycmVudENvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICBcbiAgICAgICAgLy8gRmxhZyB0byB0cmFjayBpZiB0aGUgZW50cnkgaXMgaW4gZWRpdCBtb2RlXG4gICAgICAgIGxldCBpc0VkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgcmVuZGVyZWQgY29udGVudCB2aWV3XG4gICAgICAgIGNvbnN0IHJlbmRlcmVkQ29udGVudCA9IGNvbnRlbnRBcmVhLmNyZWF0ZURpdih7IFxuICAgICAgICAgICAgY2xzOiAncmVuZGVyZWQtY29udGVudCBhY3RpdmUtdmlldycgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBlZGl0YWJsZSB0ZXh0YXJlYVxuICAgICAgICBjb25zdCBlZGl0YWJsZUNvbnRlbnQgPSBjb250ZW50QXJlYS5jcmVhdGVFbCgndGV4dGFyZWEnLCB7IFxuICAgICAgICAgICAgY2xzOiAnZWRpdGFibGUtY29udGVudCcsXG4gICAgICAgICAgICB2YWx1ZTogY3VycmVudENvbnRlbnRcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgY2xvc2UgYnV0dG9uIChuZXcgcmVxdWlyZW1lbnQpXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gY29udGVudEFyZWEuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIGNsczogJ2pvdXJuYWwtY2xvc2UtYnV0dG9uJyxcbiAgICAgICAgICAgIHRleHQ6ICdDbG9zZSdcbiAgICAgICAgfSk7XG4gICAgICAgIGNsb3NlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEhpZGUgaW5pdGlhbGx5XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgc2F2ZSBpbmRpY2F0b3JcbiAgICAgICAgY29uc3Qgc2F2ZUluZGljYXRvciA9IGNvbnRlbnRBcmVhLmNyZWF0ZURpdih7IFxuICAgICAgICAgICAgY2xzOiAnam91cm5hbC1zYXZlLWluZGljYXRvcicsXG4gICAgICAgICAgICB0ZXh0OiAnU2F2ZWQnXG4gICAgICAgIH0pO1xuICAgICAgICBzYXZlSW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vIEhpZGUgaW5pdGlhbGx5XG4gICAgICAgIFxuICAgICAgICAvLyBBZGp1c3QgdGV4dGFyZWEgaGVpZ2h0IHRvIGNvbnRlbnRcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gZWRpdGFibGVDb250ZW50LnNjcm9sbEhlaWdodCArICdweCc7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gcmVuZGVyIHRoZSBtYXJrZG93biBjb250ZW50XG4gICAgICAgIGNvbnN0IHJlbmRlckNvbnRlbnQgPSAoKSA9PiB7XG4gICAgICAgICAgICByZW5kZXJlZENvbnRlbnQuZW1wdHkoKTtcbiAgICAgICAgICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKHRoaXMucGx1Z2luLmFwcCwgY3VycmVudENvbnRlbnQsIHJlbmRlcmVkQ29udGVudCwgZmlsZS5wYXRoLCB0aGlzLnBsdWdpbik7XG5cbiAgICAgICAgICAgIC8vIE1ha2UgaGFzaHRhZ3MgY2xpY2thYmxlXG4gICAgICAgICAgICB0aGlzLm1ha2VIYXNodGFnc0NsaWNrYWJsZShyZW5kZXJlZENvbnRlbnQpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gSW5pdGlhbCByZW5kZXJcbiAgICAgICAgcmVuZGVyQ29udGVudCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gZW50ZXIgZWRpdCBtb2RlXG4gICAgICAgIGNvbnN0IGVudGVyRWRpdE1vZGUgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBTZXQgZWRpdGluZyBmbGFnXG4gICAgICAgICAgICBpc0VkaXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3IgPSBlZGl0YWJsZUNvbnRlbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0ZXh0YXJlYSBoYXMgY3VycmVudCBjb250ZW50XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQudmFsdWUgPSBjdXJyZW50Q29udGVudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSGlkZSByZW5kZXJlZCB2aWV3LCBzaG93IGVkaXRhYmxlIHZpZXcgYW5kIGNsb3NlIGJ1dHRvblxuICAgICAgICAgICAgcmVuZGVyZWRDb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZS12aWV3Jyk7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLXZpZXcnKTtcbiAgICAgICAgICAgIGNsb3NlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZGp1c3QgdGV4dGFyZWEgaGVpZ2h0XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgICAgICAgICAgZWRpdGFibGVDb250ZW50LnN0eWxlLmhlaWdodCA9IGVkaXRhYmxlQ29udGVudC5zY3JvbGxIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgZWRpdGFibGVDb250ZW50LmZvY3VzKCk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBGdW5jdGlvbiB0byBleGl0IGVkaXQgbW9kZVxuICAgICAgICBjb25zdCBleGl0RWRpdE1vZGUgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBFbnN1cmUgY29udGVudCBpcyBzYXZlZCBiZWZvcmUgZXhpdGluZ1xuICAgICAgICAgICAgaWYgKGlzRWRpdGluZykge1xuICAgICAgICAgICAgICAgIC8vIEdldCBjdXJyZW50IGNvbnRlbnQgZnJvbSB0ZXh0YXJlYVxuICAgICAgICAgICAgICAgIGN1cnJlbnRDb250ZW50ID0gZWRpdGFibGVDb250ZW50LnZhbHVlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNhdmUgY2hhbmdlc1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUNvbnRlbnRUb0ZpbGUoZmlsZSwgY3VycmVudENvbnRlbnQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlLXJlbmRlciBjb250ZW50XG4gICAgICAgICAgICAgICAgcmVuZGVyQ29udGVudCgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEhpZGUgZWRpdGFibGUgdmlldyBhbmQgY2xvc2UgYnV0dG9uLCBzaG93IHJlbmRlcmVkIHZpZXdcbiAgICAgICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLXZpZXcnKTtcbiAgICAgICAgICAgICAgICBjbG9zZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIHJlbmRlcmVkQ29udGVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtdmlldycpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENsZWFyIGVkaXRpbmcgZmxhZyBhbmQgYWN0aXZlIGVkaXRvciByZWZlcmVuY2VcbiAgICAgICAgICAgICAgICBpc0VkaXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVFZGl0b3IgPT09IGVkaXRhYmxlQ29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVkaXRvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIENsaWNrIG9uIHJlbmRlcmVkIGNvbnRlbnQgdG8gZWRpdFxuICAgICAgICByZW5kZXJlZENvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRG9uJ3QgZW50ZXIgZWRpdCBtb2RlIGlmIGNsaWNraW5nIG9uIGxpbmtzIG9yIGhhc2h0YWdzXG4gICAgICAgICAgICBpZiAodGFyZ2V0LnRhZ05hbWUgPT09ICdBJyB8fCB0YXJnZXQuY2xvc2VzdCgnYScpIHx8IFxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NtLWhhc2h0YWcnKSB8fCB0YXJnZXQuY2xvc2VzdCgnLmNtLWhhc2h0YWcnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZW50ZXJFZGl0TW9kZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsb3NlIGJ1dHRvbiB0byBleGl0IGVkaXQgbW9kZVxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGV4aXRFZGl0TW9kZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1hbnVhbCBzYXZlL2V4aXQgd2hlbiBwcmVzc2luZyBFc2NhcGVcbiAgICAgICAgZWRpdGFibGVDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICAgICAgZXhpdEVkaXRNb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQXV0by1hZGp1c3QgdGV4dGFyZWEgaGVpZ2h0IHdoaWxlIHR5cGluZ1xuICAgICAgICBlZGl0YWJsZUNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgICAgICAgICAgZWRpdGFibGVDb250ZW50LnN0eWxlLmhlaWdodCA9IGVkaXRhYmxlQ29udGVudC5zY3JvbGxIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBVcGRhdGUgY3VycmVudCBjb250ZW50IHdoaWxlIHR5cGluZ1xuICAgICAgICAgICAgY3VycmVudENvbnRlbnQgPSBlZGl0YWJsZUNvbnRlbnQudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEF1dG8tc2F2ZSBjb250ZW50IHdoaWxlIHR5cGluZ1xuICAgICAgICBsZXQgc2F2ZVRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGVkaXRhYmxlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgIC8vIFNob3cgJ1NhdmluZy4uLicgaW5kaWNhdG9yXG4gICAgICAgICAgICBzYXZlSW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgc2F2ZUluZGljYXRvci5jbGFzc0xpc3QucmVtb3ZlKCdzYXZlZCcpO1xuICAgICAgICAgICAgc2F2ZUluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdzYXZpbmcnKTtcbiAgICAgICAgICAgIHNhdmVJbmRpY2F0b3IudGV4dENvbnRlbnQgPSAnU2F2aW5nLi4uJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2xlYXIgcHJldmlvdXMgdGltZW91dFxuICAgICAgICAgICAgaWYgKHNhdmVUaW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNhdmVUaW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2V0IGEgbmV3IHRpbWVvdXQgdG8gc2F2ZSBhZnRlciA1MDBtcyBvZiBpbmFjdGl2aXR5XG4gICAgICAgICAgICBzYXZlVGltZW91dCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZUNvbnRlbnRUb0ZpbGUoZmlsZSwgY3VycmVudENvbnRlbnQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBpbmRpY2F0b3IgdG8gJ1NhdmVkJ1xuICAgICAgICAgICAgICAgIHNhdmVJbmRpY2F0b3IuY2xhc3NMaXN0LnJlbW92ZSgnc2F2aW5nJyk7XG4gICAgICAgICAgICAgICAgc2F2ZUluZGljYXRvci5jbGFzc0xpc3QuYWRkKCdzYXZlZCcpO1xuICAgICAgICAgICAgICAgIHNhdmVJbmRpY2F0b3IudGV4dENvbnRlbnQgPSAnU2F2ZWQnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEhpZGUgdGhlIGluZGljYXRvciBhZnRlciBhIGRlbGF5XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzYXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5jb250YWlucygnc2F2ZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUluZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRvZ2dsZSBleHBhbmQvY29sbGFwc2Ugb24gYnV0dG9uIGNsaWNrXG4gICAgICAgIHRvZ2dsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRvZ2dsZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCd0b2dnbGUtZXhwYW5kZWQnKTtcbiAgICAgICAgICAgIGNvbnRlbnRBcmVhLmNsYXNzTGlzdC50b2dnbGUoJ2NvbnRlbnQtZXhwYW5kZWQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFNhdmVzIHRoZSBjb250ZW50IHRvIHRoZSBmaWxlXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBzYXZlQ29udGVudFRvRmlsZShmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGNvbnRlbnQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIHNhdmUgY2hhbmdlczogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzYXZlIGNoYW5nZXM6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyBhIHJlZmVyZW5jZSB0byBhIGZpbGUgaW50byB0aGUgYWN0aXZlIGpvdXJuYWwgZW50cnlcbiAgICAgKi9cbiAgICBpbnNlcnRGaWxlUmVmZXJlbmNlKGZpbGVQYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgLy8gRmluZCB0aGUgYWN0aXZlIGVkaXRvclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlRWRpdG9yKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgam91cm5hbCBlbnRyeSB0byBpbnNlcnQgZmlsZSBpbnRvJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gR2V0IHRoZSBmaWxlXG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLnBsdWdpbi5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgaWYgKCEoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnSW52YWxpZCBmaWxlJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBhcHByb3ByaWF0ZSBmaWxlIHJlZmVyZW5jZVxuICAgICAgICBsZXQgZmlsZVJlZmVyZW5jZTogc3RyaW5nO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCBmaWxlIHR5cGVzXG4gICAgICAgIGlmICh0aGlzLmlzSW1hZ2VGaWxlKGZpbGUpKSB7XG4gICAgICAgICAgICBmaWxlUmVmZXJlbmNlID0gYCFbWyR7ZmlsZS5uYW1lfV1dYDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzTWFya2Rvd25GaWxlKGZpbGUpKSB7XG4gICAgICAgICAgICBmaWxlUmVmZXJlbmNlID0gYCFbWyR7ZmlsZS5uYW1lfV1dYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZpbGVSZWZlcmVuY2UgPSBgIVtbJHtmaWxlLm5hbWV9XV1gO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIEZvY3VzIHRoZSBhY3RpdmUgZWRpdG9yXG4gICAgICAgIHRoaXMuYWN0aXZlRWRpdG9yLmZvY3VzKCk7XG4gICAgXG4gICAgICAgIC8vIEdldCBjdXJzb3IgcG9zaXRpb25cbiAgICAgICAgY29uc3QgY3Vyc29yUG9zID0gdGhpcy5hY3RpdmVFZGl0b3Iuc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgIGNvbnN0IHRleHRCZWZvcmUgPSB0aGlzLmFjdGl2ZUVkaXRvci52YWx1ZS5zdWJzdHJpbmcoMCwgY3Vyc29yUG9zKTtcbiAgICAgICAgY29uc3QgdGV4dEFmdGVyID0gdGhpcy5hY3RpdmVFZGl0b3IudmFsdWUuc3Vic3RyaW5nKHRoaXMuYWN0aXZlRWRpdG9yLnNlbGVjdGlvbkVuZCk7XG4gICAgXG4gICAgICAgIC8vIEluc2VydCB0ZXh0IHdpdGggbmV3bGluZXNcbiAgICAgICAgY29uc3QgbmV3VGV4dCA9IHRleHRCZWZvcmUgKyAnXFxuXFxuJyArIGZpbGVSZWZlcmVuY2UgKyAnXFxuXFxuJyArIHRleHRBZnRlcjtcbiAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3IudmFsdWUgPSBuZXdUZXh0O1xuICAgIFxuICAgICAgICAvLyBTZXQgY3Vyc29yIHBvc2l0aW9uIGFmdGVyIHRoZSBpbnNlcnRlZCB0ZXh0XG4gICAgICAgIGNvbnN0IG5ld0N1cnNvclBvcyA9IGN1cnNvclBvcyArIGZpbGVSZWZlcmVuY2UubGVuZ3RoICsgNDsgLy8gKzQgZm9yIHRoZSBuZXdsaW5lc1xuICAgICAgICB0aGlzLmFjdGl2ZUVkaXRvci5zZXRTZWxlY3Rpb25SYW5nZShuZXdDdXJzb3JQb3MsIG5ld0N1cnNvclBvcyk7XG4gICAgXG4gICAgICAgIC8vIFRyaWdnZXIgaW5wdXQgZXZlbnQgdG8gZW5zdXJlIGNvbnRlbnQgaXMgc2F2ZWRcbiAgICAgICAgY29uc3QgaW5wdXRFdmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUgfSk7XG4gICAgICAgIHRoaXMuYWN0aXZlRWRpdG9yLmRpc3BhdGNoRXZlbnQoaW5wdXRFdmVudCk7XG4gICAgXG4gICAgICAgIG5ldyBOb3RpY2UoYEluc2VydGVkIHJlZmVyZW5jZSB0byAke2ZpbGUubmFtZX1gKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBmaWxlIGlzIGFuIGltYWdlXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc0ltYWdlRmlsZShmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBpbWFnZUV4dGVuc2lvbnMgPSBbJ3BuZycsICdqcGcnLCAnanBlZycsICdnaWYnLCAnc3ZnJywgJ3dlYnAnXTtcbiAgICAgICAgY29uc3QgZXh0ID0gZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIGltYWdlRXh0ZW5zaW9ucy5pbmNsdWRlcyhleHQpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIGZpbGUgaXMgYSBtYXJrZG93biBmaWxlXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc01hcmtkb3duRmlsZShmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBleHQgPSBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXR1cm4gZXh0ID09PSAnbWQnIHx8IGV4dCA9PT0gJ21hcmtkb3duJztcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyQ2xlYW51cCgpOiB2b2lkIHtcbiAgICAgICAgLy8gV2F0Y2ggZm9yIHdvcmtzcGFjZSBsYXlvdXQgY2hhbmdlcyAod2hpY2ggaGFwcGVuIHdoZW4gY2hhbmdpbmcgcGFnZXMvdGFicylcbiAgICAgICAgdGhpcy5wbHVnaW4ucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub24oJ2xheW91dC1jaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhbiBhY3RpdmUgZWRpdG9yXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlRWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIGpvdXJuYWwgZW50cnkgY29udGFpbmluZyB0aGlzIGVkaXRvclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBqb3VybmFsRW50cnkgPSB0aGlzLmFjdGl2ZUVkaXRvci5jbG9zZXN0KCcuam91cm5hbC1lbnRyeScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoam91cm5hbEVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBleGl0IGVkaXQgbW9kZSBmdW5jdGlvbiBmb3IgdGhpcyBlbnRyeVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgS2V5Ym9hcmRFdmVudCgna2V5ZG93bicsIHsga2V5OiAnRXNjYXBlJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlRWRpdG9yLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGUgYWN0aXZlIGVkaXRvciByZWZlcmVuY2VcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3IgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgbWFrZUhhc2h0YWdzQ2xpY2thYmxlKGNvbnRlbnRFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gRmluZCBhbGwgaGFzaHRhZyBlbGVtZW50c1xuICAgICAgICBjb25zdCBoYXNodGFncyA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY20taGFzaHRhZywgLnRhZycpO1xuICAgICAgICBcbiAgICAgICAgaGFzaHRhZ3MuZm9yRWFjaCh0YWcgPT4ge1xuICAgICAgICAgICAgaWYgKHRhZyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgdGFnIHRvIHJlbW92ZSBhbnkgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGFnID0gdGFnLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgICAgICAgICB0YWcucGFyZW50Tm9kZT8ucmVwbGFjZUNoaWxkKG5ld1RhZywgdGFnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXdUYWcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBoYXNodGFnVGV4dCA9IG5ld1RhZy50ZXh0Q29udGVudD8udHJpbSgpIHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5TZWFyY2hXaXRoSGFzaHRhZyhoYXNodGFnVGV4dCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbmV3VGFnLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb3BlblNlYXJjaFdpdGhIYXNodGFnKGhhc2h0YWc6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBzZWFyY2hUZXJtID0gaGFzaHRhZy5zdGFydHNXaXRoKCcjJykgPyBoYXNodGFnIDogYCMke2hhc2h0YWd9YDtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBNZXRob2QgMTogRGlyZWN0IEFQSSBjYWxsXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uYXBwLmludGVybmFsUGx1Z2lucy5nZXRQbHVnaW5CeUlkKCdnbG9iYWwtc2VhcmNoJyk/Lmluc3RhbmNlLm9wZW5HbG9iYWxTZWFyY2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hcHAuaW50ZXJuYWxQbHVnaW5zLmdldFBsdWdpbkJ5SWQoJ2dsb2JhbC1zZWFyY2gnKT8uaW5zdGFuY2Uub3Blbkdsb2JhbFNlYXJjaChzZWFyY2hUZXJtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE1ldGhvZCAyOiBFeGVjdXRlIHNlYXJjaCBjb21tYW5kXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uYXBwLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZCgnZ2xvYmFsLXNlYXJjaDpvcGVuJykpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWlucHV0LWNvbnRhaW5lciBpbnB1dCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VhcmNoSW5wdXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hJbnB1dC52YWx1ZSA9IHNlYXJjaFRlcm07XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWFyY2hJbnB1dC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgnaW5wdXQnLCB7IGJ1YmJsZXM6IHRydWUgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE1ldGhvZCAzOiBGb2N1cyBleGlzdGluZyBzZWFyY2ggbGVhZlxuICAgICAgICAgICAgY29uc3Qgc2VhcmNoTGVhZiA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdzZWFyY2gnKVswXTtcbiAgICAgICAgICAgIGlmIChzZWFyY2hMZWFmKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKHNlYXJjaExlYWYsIHsgZm9jdXM6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1pbnB1dC1jb250YWluZXIgaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaElucHV0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoSW5wdXQudmFsdWUgPSBzZWFyY2hUZXJtO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoSW5wdXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGYWxsYmFja1xuICAgICAgICAgICAgbmV3IE5vdGljZShgU2VhcmNoIGZvcjogJHtzZWFyY2hUZXJtfWApO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBvcGVuaW5nIHNlYXJjaDonLCBlcnJvcik7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBDb3VsZCBub3Qgb3BlbiBzZWFyY2guIFBsZWFzZSBzZWFyY2ggZm9yOiAke3NlYXJjaFRlcm19YCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgIi8vIEZvcm1hdHMgdGhlIGN1cnJlbnQgZGF0ZSBpbiBZWVlZLU1NLUREIGZvcm1hdFxuZXhwb3J0IGZ1bmN0aW9uIGdldFRvZGF5RGF0ZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICByZXR1cm4gZm9ybWF0RGF0ZVN0cmluZyh0b2RheSk7XG59XG5cbi8vIEZvcm1hdHMgYSBkYXRlIGFzIFlZWVktTU0tRERcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlU3RyaW5nKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgY29uc3QgbW9udGggPSBTdHJpbmcoZGF0ZS5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcoZGF0ZS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgcmV0dXJuIGAke3llYXJ9LSR7bW9udGh9LSR7ZGF5fWA7XG59XG5cbi8vIEZvcm1hdHMgYSBkYXRlIHN0cmluZyBpbiBhIGh1bWFuLXJlYWRhYmxlIGZvcm1hdCB3aXRoIG9yZGluYWwgc3VmZml4XG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZUZvckRpc3BsYXkoZGF0ZVN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XG4gICAgY29uc3QgZGF0ZUZvcm1hdE9wdGlvbnM6IEludGwuRGF0ZVRpbWVGb3JtYXRPcHRpb25zID0geyBcbiAgICAgICAgbW9udGg6ICdzaG9ydCcsIFxuICAgICAgICB5ZWFyOiAnbnVtZXJpYycsIFxuICAgICAgICBkYXk6ICdudW1lcmljJyBcbiAgICB9O1xuXG4gICAgLy8gRm9ybWF0IGRhdGUgdXNpbmcgSW50bC5EYXRlVGltZUZvcm1hdFxuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4tVVMnLCBkYXRlRm9ybWF0T3B0aW9ucykuZm9ybWF0KGRhdGUpO1xuXG4gICAgLy8gRXh0cmFjdCBkYXkgYW5kIGFkZCBvcmRpbmFsIHN1ZmZpeCAoZS5nLiwgJ3N0JywgJ25kJywgJ3JkJywgJ3RoJylcbiAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcbiAgICBjb25zdCBkYXlTdWZmaXggPSBnZXREYXlTdWZmaXgoZGF5KTtcblxuICAgIC8vIEJ1aWxkIHRoZSBmaW5hbCBmb3JtYXR0ZWQgc3RyaW5nXG4gICAgY29uc3QgcGFydHMgPSBmb3JtYXR0ZWREYXRlLnNwbGl0KCcgJyk7XG4gICAgcmV0dXJuIGAke3BhcnRzWzBdfSAke2RheX0ke2RheVN1ZmZpeH0sICR7cGFydHNbMl19YDtcbn1cblxuLy8gR2V0cyB0aGUgYXBwcm9wcmlhdGUgb3JkaW5hbCBzdWZmaXggZm9yIGEgZGF5IG51bWJlclxuZXhwb3J0IGZ1bmN0aW9uIGdldERheVN1ZmZpeChkYXk6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKGRheSA+IDMgJiYgZGF5IDwgMjEpIHJldHVybiAndGgnOyAvLyBTcGVjaWFsIGNhc2UgZm9yIDExdGgtMTl0aFxuICAgIHN3aXRjaCAoZGF5ICUgMTApIHtcbiAgICAgICAgY2FzZSAxOiByZXR1cm4gJ3N0JztcbiAgICAgICAgY2FzZSAyOiByZXR1cm4gJ25kJztcbiAgICAgICAgY2FzZSAzOiByZXR1cm4gJ3JkJztcbiAgICAgICAgZGVmYXVsdDogcmV0dXJuICd0aCc7XG4gICAgfVxufVxuXG4vLyBDaGVja3MgaWYgYSBzdHJpbmcgbWF0Y2hlcyB0aGUgWVlZWS1NTS1ERCBwYXR0ZXJuXG5leHBvcnQgZnVuY3Rpb24gaXNEYXRlRm9ybWF0KHRleHQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAvXlxcZHs0fS1cXGR7Mn0tXFxkezJ9JC8udGVzdCh0ZXh0KTtcbn0iLCAiaW1wb3J0IHsgQXBwLCBOb3RpY2UsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgaXNEYXRlRm9ybWF0IH0gZnJvbSAnLi9kYXRlLXV0aWxzJztcblxuLyoqXG4gKiBHZXRzIHRoZSBmdWxsIHBhdGggZm9yIGEgZmlsZSB3aXRoaW4gdGhlIHNwZWNpZmllZCBmb2xkZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVQYXRoKGZvbGRlcjogc3RyaW5nLCBmaWxlbmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoZm9sZGVyKSB7XG4gICAgICAgIHJldHVybiBgJHtmb2xkZXJ9LyR7ZmlsZW5hbWV9YDtcbiAgICB9XG4gICAgcmV0dXJuIGZpbGVuYW1lO1xufVxuXG4vKipcbiAqIEVuc3VyZXMgdGhhdCB0aGUgc3BlY2lmaWVkIGZvbGRlciBleGlzdHMsIGNyZWF0aW5nIGl0IGlmIG5lY2Vzc2FyeVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5zdXJlRm9sZGVyKGFwcDogQXBwLCBmb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBJZiBubyBmb2xkZXIgaXMgc3BlY2lmaWVkLCBub3RoaW5nIHRvIGNyZWF0ZVxuICAgIGlmICghZm9sZGVyUGF0aCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBmb2xkZXIgZXhpc3RzXG4gICAgY29uc3QgZm9sZGVyRXhpc3RzID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICBcbiAgICAvLyBJZiBpdCBleGlzdHMsIG1ha2Ugc3VyZSBpdCdzIGEgZm9sZGVyXG4gICAgaWYgKGZvbGRlckV4aXN0cyAmJiAhKGZvbGRlckV4aXN0cyBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENhbm5vdCBjcmVhdGUgZm9sZGVyOiBcIiR7Zm9sZGVyUGF0aH1cIiBleGlzdHMgYnV0IGlzIG5vdCBhIGZvbGRlcmApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBmb2xkZXIgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgIGlmICghZm9sZGVyRXhpc3RzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgQ3JlYXRlZCBmb2xkZXI6ICR7Zm9sZGVyUGF0aH1gKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRmFpbGVkIHRvIGNyZWF0ZSBmb2xkZXI6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGZvbGRlcjonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgZmlsZSBwYXRoIGZvciBhIGpvdXJuYWwgZW50cnkgYmFzZWQgb24gdGhlIGRhdGUgYW5kIGZvbGRlciBmb3JtYXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEpvdXJuYWxGaWxlUGF0aChqb3VybmFsRm9sZGVyOiBzdHJpbmcsIGZpbGVuYW1lOiBzdHJpbmcsIGZvbGRlckZvcm1hdDogc3RyaW5nID0gJycpOiBzdHJpbmcge1xuICAgIC8vIElmIG5vIGZvbGRlciBmb3JtYXQgaXMgc3BlY2lmaWVkLCB1c2UgdGhlIGZsYXQgc3RydWN0dXJlXG4gICAgaWYgKCFmb2xkZXJGb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIGdldEZpbGVQYXRoKGpvdXJuYWxGb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCB0aGUgZGF0ZSBmcm9tIHRoZSBmaWxlbmFtZSAoYXNzdW1pbmcgWVlZWS1NTS1ERC5tZCBmb3JtYXQpXG4gICAgY29uc3QgZGF0ZVBhcnQgPSBmaWxlbmFtZS5zcGxpdCgnLicpWzBdOyAvLyBSZW1vdmUgZmlsZSBleHRlbnNpb25cbiAgICBpZiAoIWlzRGF0ZUZvcm1hdChkYXRlUGFydCkpIHtcbiAgICAgICAgLy8gSWYgZmlsZW5hbWUgZG9lc24ndCBtYXRjaCBkYXRlIHBhdHRlcm4sIGZhbGwgYmFjayB0byBmbGF0IHN0cnVjdHVyZVxuICAgICAgICByZXR1cm4gZ2V0RmlsZVBhdGgoam91cm5hbEZvbGRlciwgZmlsZW5hbWUpO1xuICAgIH1cbiAgICBcbiAgICAvLyBQYXJzZSB0aGUgZGF0ZVxuICAgIGNvbnN0IFt5ZWFyLCBtb250aCwgZGF5XSA9IGRhdGVQYXJ0LnNwbGl0KCctJykubWFwKHBhcnQgPT4gcGFyc2VJbnQocGFydCkpO1xuICAgIFxuICAgIC8vIEZvcm1hdCB0aGUgZm9sZGVyIHBhdGggYmFzZWQgb24gdGhlIHBhdHRlcm5cbiAgICBsZXQgZm9ybWF0dGVkUGF0aCA9IGZvbGRlckZvcm1hdDtcbiAgICBmb3JtYXR0ZWRQYXRoID0gZm9ybWF0dGVkUGF0aC5yZXBsYWNlKCdZWVlZJywgeWVhci50b1N0cmluZygpKTtcbiAgICBmb3JtYXR0ZWRQYXRoID0gZm9ybWF0dGVkUGF0aC5yZXBsYWNlKCdNTScsIG1vbnRoLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSk7XG4gICAgZm9ybWF0dGVkUGF0aCA9IGZvcm1hdHRlZFBhdGgucmVwbGFjZSgnREQnLCBkYXkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpKTtcbiAgICBcbiAgICAvLyBDb21iaW5lIHRoZSBiYXNlIGZvbGRlciwgZm9ybWF0dGVkIHBhdGgsIGFuZCBmaWxlbmFtZVxuICAgIGlmIChqb3VybmFsRm9sZGVyKSB7XG4gICAgICAgIHJldHVybiBgJHtqb3VybmFsRm9sZGVyfS8ke2Zvcm1hdHRlZFBhdGh9LyR7ZmlsZW5hbWV9YDtcbiAgICB9XG4gICAgcmV0dXJuIGAke2Zvcm1hdHRlZFBhdGh9LyR7ZmlsZW5hbWV9YDtcbn1cblxuLyoqXG4gKiBFbnN1cmVzIGFsbCBmb2xkZXJzIGluIGEgcGF0aCBleGlzdFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5zdXJlQWxsRm9sZGVycyhhcHA6IEFwcCwgZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIC8vIFNwbGl0IHRoZSBwYXRoIHRvIGVuc3VyZSBhbGwgZm9sZGVycyBleGlzdFxuICAgIGNvbnN0IHBhdGhQYXJ0cyA9IGZpbGVQYXRoLnNwbGl0KCcvJyk7XG4gICAgY29uc3QgZmlsZU5hbWVJbmRleCA9IHBhdGhQYXJ0cy5sZW5ndGggLSAxO1xuICAgIFxuICAgIC8vIEVuc3VyZSBhbGwgZm9sZGVycyBpbiB0aGUgcGF0aCBleGlzdFxuICAgIGxldCBjdXJyZW50Rm9sZGVyID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlTmFtZUluZGV4OyBpKyspIHtcbiAgICAgICAgaWYgKGN1cnJlbnRGb2xkZXIpIHtcbiAgICAgICAgICAgIGN1cnJlbnRGb2xkZXIgKz0gJy8nO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRGb2xkZXIgKz0gcGF0aFBhcnRzW2ldO1xuICAgICAgICBcbiAgICAgICAgLy8gU2tpcCBlbXB0eSBwYXJ0c1xuICAgICAgICBpZiAoIWN1cnJlbnRGb2xkZXIpIGNvbnRpbnVlO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGZvbGRlciBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICAgIGlmICghKGF3YWl0IGVuc3VyZUZvbGRlcihhcHAsIGN1cnJlbnRGb2xkZXIpKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgb3IgZ2V0cyBhIGpvdXJuYWwgZmlsZSBmb3IgdGhlIHNwZWNpZmllZCBkYXRlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRPckNyZWF0ZUpvdXJuYWxGaWxlKFxuICAgIGFwcDogQXBwLCBcbiAgICBqb3VybmFsRm9sZGVyOiBzdHJpbmcsIFxuICAgIGZpbGVuYW1lOiBzdHJpbmcsXG4gICAgZm9sZGVyRm9ybWF0OiBzdHJpbmcgPSAnJyxcbiAgICBpbml0aWFsQ29udGVudDogc3RyaW5nID0gJydcbik6IFByb21pc2U8VEZpbGUgfCBudWxsPiB7XG4gICAgLy8gR2VuZXJhdGUgdGhlIGZpbGUgcGF0aCB1c2luZyB0aGUgbmV3IGZ1bmN0aW9uXG4gICAgY29uc3QgZmlsZVBhdGggPSBnZXRKb3VybmFsRmlsZVBhdGgoam91cm5hbEZvbGRlciwgZmlsZW5hbWUsIGZvbGRlckZvcm1hdCk7XG4gICAgXG4gICAgLy8gRW5zdXJlIGFsbCBuZWNlc3NhcnkgZm9sZGVycyBleGlzdFxuICAgIGlmICghKGF3YWl0IGVuc3VyZUFsbEZvbGRlcnMoYXBwLCBmaWxlUGF0aCkpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGUgZmlsZSBhbHJlYWR5IGV4aXN0c1xuICAgIGxldCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgXG4gICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICByZXR1cm4gZmlsZTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIHRoZSBmaWxlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICB0cnkge1xuICAgICAgICBmaWxlID0gYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgaW5pdGlhbENvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKGBDcmVhdGVkIGpvdXJuYWwgZW50cnk6ICR7ZmlsZW5hbWV9YCk7XG4gICAgICAgIHJldHVybiBmaWxlIGFzIFRGaWxlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBjcmVhdGUgam91cm5hbCBlbnRyeTogJHtlcnJvcn1gKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBqb3VybmFsIGVudHJ5OicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGZpbGUgaXMgYSBqb3VybmFsIGZpbGUgYmFzZWQgb24gaXRzIG5hbWUgcGF0dGVybiBhbmQgbG9jYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSm91cm5hbEZpbGUoZmlsZTogVEZpbGUsIGpvdXJuYWxGb2xkZXI/OiBzdHJpbmcsIGZvbGRlckZvcm1hdD86IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIC8vIENoZWNrIGlmIGJhc2VuYW1lIG1hdGNoZXMgWVlZWS1NTS1ERCBwYXR0ZXJuXG4gICAgY29uc3QgaXNEYXRlQmFzZW5hbWUgPSBpc0RhdGVGb3JtYXQoZmlsZS5iYXNlbmFtZSk7XG4gICAgXG4gICAgaWYgKCFpc0RhdGVCYXNlbmFtZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIG5vIGZvbGRlciBpcyBzcGVjaWZpZWQsIGp1c3QgY2hlY2sgdGhlIGJhc2VuYW1lXG4gICAgaWYgKCFqb3VybmFsRm9sZGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBXaXRoIGZvbGRlciBmb3JtYXQsIHdlIG5lZWQgYSBtb3JlIHNvcGhpc3RpY2F0ZWQgY2hlY2tcbiAgICBpZiAoZm9sZGVyRm9ybWF0KSB7XG4gICAgICAgIC8vIEdlbmVyYXRlIHRoZSBleHBlY3RlZCBiYXNlIHBhdGhcbiAgICAgICAgY29uc3QgZGF0ZVN0ciA9IGZpbGUuYmFzZW5hbWUuc3BsaXQoJy4nKVswXTtcbiAgICAgICAgY29uc3QgW3llYXIsIG1vbnRoLCBkYXldID0gZGF0ZVN0ci5zcGxpdCgnLScpO1xuICAgICAgICBcbiAgICAgICAgbGV0IGV4cGVjdGVkUGF0aCA9IGZvbGRlckZvcm1hdDtcbiAgICAgICAgZXhwZWN0ZWRQYXRoID0gZXhwZWN0ZWRQYXRoLnJlcGxhY2UoJ1lZWVknLCB5ZWFyKTtcbiAgICAgICAgZXhwZWN0ZWRQYXRoID0gZXhwZWN0ZWRQYXRoLnJlcGxhY2UoJ01NJywgbW9udGgpO1xuICAgICAgICBleHBlY3RlZFBhdGggPSBleHBlY3RlZFBhdGgucmVwbGFjZSgnREQnLCBkYXkpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXhwZWN0ZWRGdWxsUGF0aCA9IGAke2pvdXJuYWxGb2xkZXJ9LyR7ZXhwZWN0ZWRQYXRofWA7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZmlsZSdzIHBhdGggY29udGFpbnMgdGhlIGV4cGVjdGVkIHBhdGhcbiAgICAgICAgcmV0dXJuIGZpbGUucGF0aC5zdGFydHNXaXRoKGV4cGVjdGVkRnVsbFBhdGgpO1xuICAgIH1cbiAgICBcbiAgICAvLyBXaXRob3V0IGZvbGRlciBmb3JtYXQsIGp1c3QgY2hlY2sgaWYgaXQncyBpbiB0aGUgam91cm5hbCBmb2xkZXJcbiAgICByZXR1cm4gZmlsZS5wYXRoLnN0YXJ0c1dpdGgoam91cm5hbEZvbGRlciArICcvJyk7XG59XG5cbi8qKlxuICogR2V0cyBhbGwgam91cm5hbCBmaWxlcyBpbiB0aGUgdmF1bHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEpvdXJuYWxGaWxlcyhhcHA6IEFwcCwgam91cm5hbEZvbGRlcj86IHN0cmluZywgZm9sZGVyRm9ybWF0Pzogc3RyaW5nKTogVEZpbGVbXSB7XG4gICAgLy8gR2V0IGFsbCBtYXJrZG93biBmaWxlcyBpbiB0aGUgdmF1bHRcbiAgICBjb25zdCBmaWxlcyA9IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICAvLyBGaWx0ZXIgZmlsZXMgdGhhdCBmb2xsb3cgYSBkYWlseSBub3RlIHBhdHRlcm4gYW5kIGFyZSBpbiB0aGUgY29ycmVjdCBmb2xkZXIgc3RydWN0dXJlXG4gICAgcmV0dXJuIGZpbGVzLmZpbHRlcigoZmlsZSkgPT4gaXNKb3VybmFsRmlsZShmaWxlLCBqb3VybmFsRm9sZGVyLCBmb2xkZXJGb3JtYXQpKTtcbn1cblxuLyoqXG4gKiBTb3J0cyBqb3VybmFsIGZpbGVzIGJ5IGRhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvcnRKb3VybmFsRmlsZXMoZmlsZXM6IFRGaWxlW10sIHNvcnREaXJlY3Rpb246ICduZXdlc3QtZmlyc3QnIHwgJ29sZGVzdC1maXJzdCcpOiBURmlsZVtdIHtcbiAgICByZXR1cm4gZmlsZXMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoc29ydERpcmVjdGlvbiA9PT0gJ25ld2VzdC1maXJzdCcpIHtcbiAgICAgICAgICAgIHJldHVybiBiLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYS5iYXNlbmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYS5iYXNlbmFtZS5sb2NhbGVDb21wYXJlKGIuYmFzZW5hbWUpO1xuICAgICAgICB9XG4gICAgfSk7XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUFrRDs7O0FDQWxELHNCQUFzRDtBQVcvQyxJQUFNLG1CQUF1QztBQUFBLEVBQ2hELGVBQWU7QUFBQSxFQUNmLFlBQVk7QUFBQSxFQUNaLGVBQWU7QUFBQSxFQUNmLHNCQUFzQjtBQUFBLEVBQ3RCLGNBQWM7QUFDbEI7QUFFTyxJQUFNLHVCQUFOLGNBQW1DLGlDQUFpQjtBQUFBLEVBR3ZELFlBQVksS0FBVSxRQUEwQjtBQUM1QyxVQUFNLEtBQUssTUFBTTtBQUNqQixTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRUEsVUFBZ0I7QUFDWixVQUFNLEVBQUUsWUFBWSxJQUFJO0FBQ3hCLGdCQUFZLE1BQU07QUFFbEIsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUVyRSxRQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSxnQkFBZ0IsRUFDeEIsUUFBUSx5REFBeUQsRUFDakUsUUFBUSxVQUFRLEtBQ1osZUFBZSxVQUFVLEVBQ3pCLFNBQVMsS0FBSyxPQUFPLFNBQVMsYUFBYSxFQUMzQyxTQUFTLE9BQU8sVUFBVTtBQUV2QixXQUFLLE9BQU8s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VUFBVSxNQUFNLEtBQUssSUFBSSxNQUFNLEtBQUssSUFBSTtBQUc5QyxjQUFNLGlCQUFpQixLQUFLLEtBQUssT0FBTztBQUd4QyxjQUFNLEtBQUssSUFBSSxNQUFNLE9BQU8sU0FBUyxPQUFPO0FBRzVDLGNBQU0sS0FBSyxJQUFJLE1BQU0sT0FBTyxJQUFJO0FBRWhDO0FBQ0EsY0FBTSxlQUFlLGFBQWE7QUFBQSxNQUN0QyxTQUFTLE9BQVA7QUFDRSxnQkFBUSxNQUFNLHdCQUF3QixLQUFLLFNBQVMsS0FBSztBQUN6RCxjQUFNLGFBQWEsbUJBQW1CLEtBQUssU0FBUyxPQUFPO0FBQzNEO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFHQSxVQUFNLGFBQWEsZ0NBQWdDLDRCQUE0QixvQkFBb0I7QUFHbkcsZUFBVyxNQUFNO0FBQ2IsWUFBTSxNQUFNO0FBQ1osVUFBSSx3QkFBTyxnQ0FBZ0MsNEJBQTRCLG9CQUFvQjtBQUFBLElBQy9GLEdBQUcsR0FBSTtBQUFBLEVBQ1g7QUFDSjtBQUVBLElBQU0saUJBQU4sY0FBNkIsdUJBQU07QUFBQSxFQUsvQixZQUFZLEtBQVUsWUFBb0I7QUFDdEMsVUFBTSxHQUFHO0FBQ1QsU0FBSyxhQUFhO0FBQUEsRUFDdEI7QUFBQSxFQUVBLFNBQVM7QUFDTCxVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUc5RCxTQUFLLGFBQWEsVUFBVSxTQUFTLE9BQU87QUFBQSxNQUN4QyxLQUFLO0FBQUEsTUFDTCxNQUFNLE9BQU8sS0FBSztBQUFBLElBQ3RCLENBQUM7QUFHRCxTQUFLLFdBQVcsVUFBVSxTQUFTLE9BQU87QUFBQSxNQUN0QyxLQUFLO0FBQUEsTUFDTCxNQUFNO0FBQUEsSUFDVixDQUFDO0FBQUEsRUFDTDtBQUFBLEVBRUEsZUFBZSxXQUFtQjtBQUM5QixTQUFLLFdBQVcsY0FBYyxHQUFHLGFBQWEsS0FBSztBQUFBLEVBQ3ZEO0FBQUEsRUFFQSxhQUFhLFNBQWlCO0FBQzFCLFNBQUssU0FBUyxjQUFjO0FBQUEsRUFDaEM7QUFBQSxFQUVBLFVBQVU7QUFDTixVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsTUFBTTtBQUFBLEVBQ3BCO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIl0KfQo=
