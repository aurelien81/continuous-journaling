/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => JournalingPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  journalFolder: "journals",
  dateFormat: "YYYY-MM-DD",
  sortDirection: "newest-first",
  defaultExpandEntries: true
};
var JournalingSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Continuous Journaling Settings" });
    new import_obsidian.Setting(containerEl).setName("Journal Folder").setDesc("Specify the folder where journal entries will be stored").addText((text) => text.setPlaceholder("journals").setValue(this.plugin.settings.journalFolder).onChange(async (value) => {
      this.plugin.settings.journalFolder = value.replace(/^\/+|\/+$/g, "");
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Date Format").setDesc("Format for journal filenames (YYYY-MM-DD recommended)").addText((text) => text.setPlaceholder("YYYY-MM-DD").setValue(this.plugin.settings.dateFormat).onChange(async (value) => {
      this.plugin.settings.dateFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Sort Direction").setDesc("How to sort journal entries in the continuous view").addDropdown((dropdown) => dropdown.addOption("newest-first", "Newest entries first").addOption("oldest-first", "Oldest entries first").setValue(this.plugin.settings.sortDirection).onChange(async (value) => {
      this.plugin.settings.sortDirection = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Default Expand Entries").setDesc("Automatically expand entries when opening the journals view").addToggle((toggle) => toggle.setValue(this.plugin.settings.defaultExpandEntries).onChange(async (value) => {
      this.plugin.settings.defaultExpandEntries = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/journal-view.ts
var import_obsidian3 = require("obsidian");

// src/utils/date-utils.ts
function getTodayDate() {
  const today = new Date();
  return formatDateString(today);
}
function formatDateString(date) {
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, "0");
  const day = String(date.getDate()).padStart(2, "0");
  return `${year}-${month}-${day}`;
}
function formatDateForDisplay(dateString) {
  const date = new Date(dateString);
  const dateFormatOptions = {
    month: "short",
    year: "numeric",
    day: "numeric"
  };
  const formattedDate = new Intl.DateTimeFormat("en-US", dateFormatOptions).format(date);
  const day = date.getDate();
  const daySuffix = getDaySuffix(day);
  const parts = formattedDate.split(" ");
  return `${parts[0]} ${day}${daySuffix}, ${parts[2]}`;
}
function getDaySuffix(day) {
  if (day > 3 && day < 21)
    return "th";
  switch (day % 10) {
    case 1:
      return "st";
    case 2:
      return "nd";
    case 3:
      return "rd";
    default:
      return "th";
  }
}
function isDateFormat(text) {
  return /^\d{4}-\d{2}-\d{2}$/.test(text);
}

// src/utils/file-utils.ts
var import_obsidian2 = require("obsidian");
async function ensureFolder(app, folderPath) {
  if (!folderPath) {
    return true;
  }
  const folderExists = app.vault.getAbstractFileByPath(folderPath);
  if (folderExists && !(folderExists instanceof import_obsidian2.TFolder)) {
    new import_obsidian2.Notice(`Cannot create journal folder: "${folderPath}" exists but is not a folder`);
    return false;
  }
  if (!folderExists) {
    try {
      await app.vault.createFolder(folderPath);
      new import_obsidian2.Notice(`Created journal folder: ${folderPath}`);
      return true;
    } catch (error) {
      new import_obsidian2.Notice(`Failed to create journal folder: ${error}`);
      console.error("Failed to create journal folder:", error);
      return false;
    }
  }
  return true;
}
function getFilePath(folder, filename) {
  if (folder) {
    return `${folder}/${filename}`;
  }
  return filename;
}
function isJournalFile(file, journalFolder) {
  const isDateBasename = isDateFormat(file.basename);
  if (journalFolder) {
    return isDateBasename && file.path.startsWith(journalFolder + "/");
  }
  return isDateBasename;
}
function getJournalFiles(app, journalFolder) {
  const files = app.vault.getMarkdownFiles();
  return files.filter((file) => isJournalFile(file, journalFolder));
}
function sortJournalFiles(files, sortDirection) {
  return files.sort((a, b) => {
    if (sortDirection === "newest-first") {
      return b.basename.localeCompare(a.basename);
    } else {
      return a.basename.localeCompare(b.basename);
    }
  });
}
async function getOrCreateJournalFile(app, journalFolder, filename, initialContent = "") {
  await ensureFolder(app, journalFolder);
  const filePath = getFilePath(journalFolder, filename);
  let file = app.vault.getAbstractFileByPath(filePath);
  if (file instanceof import_obsidian2.TFile) {
    return file;
  }
  try {
    file = await app.vault.create(filePath, initialContent);
    new import_obsidian2.Notice(`Created journal entry: ${filename}`);
    return file;
  } catch (error) {
    new import_obsidian2.Notice(`Failed to create journal entry: ${error}`);
    console.error("Failed to create journal entry:", error);
    return null;
  }
}

// src/journal-view.ts
var JournalView = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Opens the continuous journal view in a new leaf
   */
  async open() {
    const leaf = this.plugin.app.workspace.getLeaf(true);
    await leaf.setViewState({
      type: "markdown",
      active: true
    });
    const contentEl = leaf.view.containerEl;
    contentEl.empty();
    const panel = contentEl.createDiv({ cls: "custom-journal-panel" });
    const journalFiles = getJournalFiles(this.plugin.app, this.plugin.settings.journalFolder);
    if (journalFiles.length === 0) {
      new import_obsidian3.Notice("No journal entries found.");
      panel.createEl("div", {
        cls: "journal-empty-state",
        text: "No journal entries found. Create one by clicking the journals icon in the ribbon."
      });
      return;
    }
    const sortedFiles = sortJournalFiles(journalFiles, this.plugin.settings.sortDirection);
    for (const file of sortedFiles) {
      try {
        const fileContent = await this.plugin.app.vault.read(file);
        this.addJournalEntry(panel, file, fileContent);
      } catch (error) {
        console.error(`Error reading file ${file.path}:`, error);
        this.addErrorMessage(panel, file.basename, error);
      }
    }
  }
  /**
   * Adds an error message to the panel when file reading fails
   */
  addErrorMessage(panel, filename, error) {
    const errorDiv = panel.createDiv({ cls: "journal-entry journal-error" });
    const errorHeader = errorDiv.createDiv({ cls: "journal-entry-header" });
    errorHeader.createEl("h3", {
      cls: "journal-entry-title",
      text: `${filename} - Error`
    });
    const errorContent = errorDiv.createDiv({ cls: "journal-error-content" });
    errorContent.textContent = `Failed to load journal: ${error.message || error}`;
  }
  /**
   * Adds a journal entry to the panel
   */
  addJournalEntry(panel, file, content) {
    const journalDate = file.basename;
    const journalEntry = panel.createDiv({ cls: "journal-entry" });
    const header = journalEntry.createDiv({ cls: "journal-entry-header" });
    const toggleButton = header.createEl("button", { cls: "collapsible-toggle" });
    if (this.plugin.settings.defaultExpandEntries) {
      toggleButton.addClass("toggle-expanded");
    }
    const title = header.createEl("h3", { cls: "journal-entry-title" });
    const titleLink = title.createEl("a", {
      cls: "journal-entry-link",
      text: formatDateForDisplay(journalDate)
    });
    titleLink.addEventListener("click", (event) => {
      event.preventDefault();
      this.plugin.app.workspace.openLinkText(file.basename, file.path);
    });
    const contentArea = journalEntry.createDiv({
      cls: "collapsible-content" + (this.plugin.settings.defaultExpandEntries ? " content-expanded" : "")
    });
    let currentContent = content;
    const renderedContent = contentArea.createDiv({
      cls: "rendered-content active-view"
    });
    const editableContent = contentArea.createEl("textarea", {
      cls: "editable-content",
      value: currentContent
    });
    const saveIndicator = contentArea.createDiv({
      cls: "journal-save-indicator",
      text: "Saving..."
    });
    window.requestAnimationFrame(() => {
      editableContent.style.height = editableContent.scrollHeight + "px";
    });
    let isDragging = false;
    const renderContent = () => {
      renderedContent.empty();
      import_obsidian3.MarkdownRenderer.render(this.plugin.app, currentContent, renderedContent, file.path, this.plugin);
    };
    renderContent();
    const enterEditMode = () => {
      editableContent.value = currentContent;
      renderedContent.classList.remove("active-view");
      editableContent.classList.add("active-view");
      editableContent.style.height = "auto";
      editableContent.style.height = editableContent.scrollHeight + "px";
      editableContent.focus();
    };
    const exitEditMode = async () => {
      if (isDragging) {
        return;
      }
      currentContent = editableContent.value;
      await this.saveContentToFile(file, currentContent);
      renderContent();
      editableContent.classList.remove("active-view");
      renderedContent.classList.add("active-view");
    };
    renderedContent.addEventListener("click", (event) => {
      const target = event.target;
      if (target.tagName === "A" || target.closest("a") || target.classList.contains("cm-hashtag") || target.closest(".cm-hashtag")) {
        return;
      }
      enterEditMode();
    });
    editableContent.addEventListener("blur", () => {
      setTimeout(() => {
        exitEditMode();
      }, 100);
    });
    editableContent.addEventListener("keydown", (event) => {
      if (event.key === "Escape") {
        editableContent.blur();
      }
    });
    editableContent.addEventListener("dragenter", (event) => {
      isDragging = true;
      event.preventDefault();
      editableContent.classList.add("is-dragging-over");
    });
    editableContent.addEventListener("dragover", (event) => {
      event.preventDefault();
    });
    editableContent.addEventListener("dragleave", () => {
      editableContent.classList.remove("is-dragging-over");
    });
    editableContent.addEventListener("drop", async (event) => {
      event.preventDefault();
      editableContent.classList.remove("is-dragging-over");
      if (event.dataTransfer && event.dataTransfer.files && event.dataTransfer.files.length > 0) {
        try {
          for (let i = 0; i < event.dataTransfer.files.length; i++) {
            const file2 = event.dataTransfer.files[i];
            if (file2.type.startsWith("image/")) {
              await this.handleImageDrop(file2, editableContent, this.plugin.settings.journalFolder);
            }
          }
        } catch (error) {
          console.error("Error handling dropped files:", error);
          new import_obsidian3.Notice(`Error handling dropped files: ${error}`);
        }
      }
      setTimeout(() => {
        isDragging = false;
      }, 200);
    });
    editableContent.addEventListener("input", () => {
      editableContent.style.height = "auto";
      editableContent.style.height = editableContent.scrollHeight + "px";
      currentContent = editableContent.value;
    });
    let saveTimeout = null;
    editableContent.addEventListener("input", () => {
      saveIndicator.classList.remove("saved");
      saveIndicator.classList.add("saving");
      saveIndicator.textContent = "Saving...";
      if (saveTimeout) {
        clearTimeout(saveTimeout);
      }
      saveTimeout = setTimeout(async () => {
        await this.saveContentToFile(file, currentContent);
        saveIndicator.classList.remove("saving");
        saveIndicator.classList.add("saved");
        saveIndicator.textContent = "Saved";
      }, 500);
    });
    toggleButton.addEventListener("click", () => {
      toggleButton.classList.toggle("toggle-expanded");
      contentArea.classList.toggle("content-expanded");
    });
  }
  /**
   * Handles an image drop operation
   */
  async handleImageDrop(file, textarea, journalFolder) {
    const reader = new FileReader();
    reader.onload = async (event) => {
      if (event.target && event.target.result) {
        try {
          const buffer = await this.fileToArrayBuffer(file);
          const timestamp = Date.now();
          const sanitizedFileName = file.name.replace(/[^a-zA-Z0-9-_.]/g, "_");
          const imageName = `journal-img-${timestamp}-${sanitizedFileName}`;
          let imageFolderPath = journalFolder ? `${journalFolder}/images` : "images";
          try {
            await this.plugin.app.vault.createFolder(imageFolderPath);
          } catch (error) {
          }
          const imagePath = `${imageFolderPath}/${imageName}`;
          await this.plugin.app.vault.createBinary(imagePath, buffer);
          const imageMarkdown = `![${file.name}](${imagePath})`;
          this.insertTextAtCursor(textarea, imageMarkdown);
          const inputEvent = new Event("input", { bubbles: true, cancelable: true });
          textarea.dispatchEvent(inputEvent);
          new import_obsidian3.Notice(`Image "${file.name}" added`);
        } catch (error) {
          console.error("Error saving image:", error);
          new import_obsidian3.Notice(`Error saving image: ${error}`);
        }
      }
    };
    reader.readAsDataURL(file);
  }
  /**
   * Converts a File to ArrayBuffer
   */
  fileToArrayBuffer(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => resolve(reader.result);
      reader.onerror = reject;
      reader.readAsArrayBuffer(file);
    });
  }
  /**
   * Inserts text at the cursor position in a textarea
   */
  insertTextAtCursor(textarea, text) {
    const cursorPos = textarea.selectionStart;
    const textBefore = textarea.value.substring(0, cursorPos);
    const textAfter = textarea.value.substring(textarea.selectionEnd);
    const newText = textBefore + "\n\n" + text + "\n\n" + textAfter;
    textarea.value = newText;
    const newCursorPos = cursorPos + text.length + 4;
    textarea.setSelectionRange(newCursorPos, newCursorPos);
  }
  /**
   * Saves the content to the file
   */
  async saveContentToFile(file, content) {
    try {
      await this.plugin.app.vault.modify(file, content);
    } catch (error) {
      new import_obsidian3.Notice(`Failed to save changes: ${error}`);
      console.error("Failed to save changes:", error);
    }
  }
};

// src/main.ts
var JournalingPlugin = class extends import_obsidian4.Plugin {
  async onload() {
    await this.loadSettings();
    this.journalView = new JournalView(this);
    const ribbonIconEl = this.addRibbonIcon(
      "notebook-text",
      "Open Journals",
      async (evt) => {
        await this.openJournalView();
      }
    );
    ribbonIconEl.addClass("journaling-ribbon-icon");
    this.addCommand({
      id: "open-journal-view",
      name: "Open Journal View",
      callback: () => {
        this.openJournalView();
      }
    });
    this.addCommand({
      id: "create-todays-journal",
      name: "Create/Open Today's Journal",
      callback: () => {
        this.createTodaysJournal();
      }
    });
    this.addSettingTab(new JournalingSettingTab(this.app, this));
  }
  /**
   * Opens the continuous journal view
   */
  async openJournalView() {
    await this.createTodaysJournal();
    await this.journalView.open();
  }
  /**
   * Creates or opens today's journal entry
   */
  async createTodaysJournal() {
    const date = getTodayDate();
    const fileName = `${date}.md`;
    const file = await getOrCreateJournalFile(
      this.app,
      this.settings.journalFolder,
      fileName
    );
    if (!file) {
      new import_obsidian4.Notice("Failed to create or open today's journal");
      return;
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9qb3VybmFsLXZpZXcudHMiLCAic3JjL3V0aWxzL2RhdGUtdXRpbHMudHMiLCAic3JjL3V0aWxzL2ZpbGUtdXRpbHMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgREVGQVVMVF9TRVRUSU5HUywgSm91cm5hbGluZ1NldHRpbmdzLCBKb3VybmFsaW5nU2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgSm91cm5hbFZpZXcgfSBmcm9tICcuL2pvdXJuYWwtdmlldyc7XG5pbXBvcnQgeyBnZXRUb2RheURhdGUgfSBmcm9tICcuL3V0aWxzL2RhdGUtdXRpbHMnO1xuaW1wb3J0IHsgZ2V0T3JDcmVhdGVKb3VybmFsRmlsZSB9IGZyb20gJy4vdXRpbHMvZmlsZS11dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEpvdXJuYWxpbmdQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBKb3VybmFsaW5nU2V0dGluZ3M7XG4gICAgam91cm5hbFZpZXc6IEpvdXJuYWxWaWV3O1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICAvLyBMb2FkIHNldHRpbmdzXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbml0aWFsaXplIGpvdXJuYWwgdmlld1xuICAgICAgICB0aGlzLmpvdXJuYWxWaWV3ID0gbmV3IEpvdXJuYWxWaWV3KHRoaXMpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHJpYmJvbiBpY29uXG4gICAgICAgIGNvbnN0IHJpYmJvbkljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbihcbiAgICAgICAgICAgICdub3RlYm9vay10ZXh0JywgXG4gICAgICAgICAgICAnT3BlbiBKb3VybmFscycsIFxuICAgICAgICAgICAgYXN5bmMgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub3BlbkpvdXJuYWxWaWV3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIHJpYmJvbkljb25FbC5hZGRDbGFzcygnam91cm5hbGluZy1yaWJib24taWNvbicpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIGNvbW1hbmRcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnb3Blbi1qb3VybmFsLXZpZXcnLFxuICAgICAgICAgICAgbmFtZTogJ09wZW4gSm91cm5hbCBWaWV3JyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuSm91cm5hbFZpZXcoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIGFub3RoZXIgY29tbWFuZCBzcGVjaWZpY2FsbHkgZm9yIGNyZWF0aW5nIHRvZGF5J3Mgam91cm5hbFxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdjcmVhdGUtdG9kYXlzLWpvdXJuYWwnLFxuICAgICAgICAgICAgbmFtZTogJ0NyZWF0ZS9PcGVuIFRvZGF5XFwncyBKb3VybmFsJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVUb2RheXNKb3VybmFsKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFJlZ2lzdGVyIHNldHRpbmdzIHRhYlxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IEpvdXJuYWxpbmdTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIGNvbnRpbnVvdXMgam91cm5hbCB2aWV3XG4gICAgICovXG4gICAgYXN5bmMgb3BlbkpvdXJuYWxWaWV3KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBGaXJzdCwgZW5zdXJlIHRvZGF5J3Mgam91cm5hbCBleGlzdHNcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVUb2RheXNKb3VybmFsKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBUaGVuIG9wZW4gdGhlIGNvbnRpbnVvdXMgdmlld1xuICAgICAgICBhd2FpdCB0aGlzLmpvdXJuYWxWaWV3Lm9wZW4oKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBvciBvcGVucyB0b2RheSdzIGpvdXJuYWwgZW50cnlcbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVUb2RheXNKb3VybmFsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VG9kYXlEYXRlKCk7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7ZGF0ZX0ubWRgO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IGdldE9yQ3JlYXRlSm91cm5hbEZpbGUoXG4gICAgICAgICAgICB0aGlzLmFwcCwgXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmpvdXJuYWxGb2xkZXIsIFxuICAgICAgICAgICAgZmlsZU5hbWVcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghZmlsZSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGNyZWF0ZSBvciBvcGVuIHRvZGF5XFwncyBqb3VybmFsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgSm91cm5hbGluZ1BsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEpvdXJuYWxpbmdTZXR0aW5ncyB7XG4gICAgam91cm5hbEZvbGRlcjogc3RyaW5nO1xuICAgIGRhdGVGb3JtYXQ6IHN0cmluZztcbiAgICBzb3J0RGlyZWN0aW9uOiAnbmV3ZXN0LWZpcnN0JyB8ICdvbGRlc3QtZmlyc3QnO1xuICAgIGRlZmF1bHRFeHBhbmRFbnRyaWVzOiBib29sZWFuO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogSm91cm5hbGluZ1NldHRpbmdzID0ge1xuICAgIGpvdXJuYWxGb2xkZXI6ICdqb3VybmFscycsXG4gICAgZGF0ZUZvcm1hdDogJ1lZWVktTU0tREQnLFxuICAgIHNvcnREaXJlY3Rpb246ICduZXdlc3QtZmlyc3QnLFxuICAgIGRlZmF1bHRFeHBhbmRFbnRyaWVzOiB0cnVlLFxufTtcblxuZXhwb3J0IGNsYXNzIEpvdXJuYWxpbmdTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBKb3VybmFsaW5nUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogSm91cm5hbGluZ1BsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ29udGludW91cyBKb3VybmFsaW5nIFNldHRpbmdzJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdKb3VybmFsIEZvbGRlcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnU3BlY2lmeSB0aGUgZm9sZGVyIHdoZXJlIGpvdXJuYWwgZW50cmllcyB3aWxsIGJlIHN0b3JlZCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2pvdXJuYWxzJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbEZvbGRlcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzIGZvciBjb25zaXN0ZW5jeVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5qb3VybmFsRm9sZGVyID0gdmFsdWUucmVwbGFjZSgvXlxcLyt8XFwvKyQvZywgJycpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGF0ZSBGb3JtYXQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Zvcm1hdCBmb3Igam91cm5hbCBmaWxlbmFtZXMgKFlZWVktTU0tREQgcmVjb21tZW5kZWQpJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignWVlZWS1NTS1ERCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRhdGVGb3JtYXQpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTb3J0IERpcmVjdGlvbicpXG4gICAgICAgICAgICAuc2V0RGVzYygnSG93IHRvIHNvcnQgam91cm5hbCBlbnRyaWVzIGluIHRoZSBjb250aW51b3VzIHZpZXcnKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbmV3ZXN0LWZpcnN0JywgJ05ld2VzdCBlbnRyaWVzIGZpcnN0JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdvbGRlc3QtZmlyc3QnLCAnT2xkZXN0IGVudHJpZXMgZmlyc3QnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb3J0RGlyZWN0aW9uKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICduZXdlc3QtZmlyc3QnIHwgJ29sZGVzdC1maXJzdCcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydERpcmVjdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVmYXVsdCBFeHBhbmQgRW50cmllcycpXG4gICAgICAgICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBleHBhbmQgZW50cmllcyB3aGVuIG9wZW5pbmcgdGhlIGpvdXJuYWxzIHZpZXcnKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRFeHBhbmRFbnRyaWVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEV4cGFuZEVudHJpZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgTWFya2Rvd25SZW5kZXJlciwgTm90aWNlLCBURmlsZSwgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBKb3VybmFsaW5nUGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBmb3JtYXREYXRlRm9yRGlzcGxheSB9IGZyb20gJy4vdXRpbHMvZGF0ZS11dGlscyc7XG5pbXBvcnQgeyBnZXRKb3VybmFsRmlsZXMsIHNvcnRKb3VybmFsRmlsZXMgfSBmcm9tICcuL3V0aWxzL2ZpbGUtdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgSm91cm5hbFZpZXcge1xuICAgIHBsdWdpbjogSm91cm5hbGluZ1BsdWdpbjtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEpvdXJuYWxpbmdQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIE9wZW5zIHRoZSBjb250aW51b3VzIGpvdXJuYWwgdmlldyBpbiBhIG5ldyBsZWFmXG4gICAgICovXG4gICAgYXN5bmMgb3BlbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGxlYWYgKG9wZW5zIGEgbmV3IHRhYilcbiAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCB0aGUgdmlldyBzdGF0ZSB0byBNYXJrZG93biB0byBhY2Nlc3MgY29udGFpbmVyRWxcbiAgICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgdHlwZTogXCJtYXJrZG93blwiLFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbWFpbiBjb250YWluZXJcbiAgICAgICAgY29uc3QgY29udGVudEVsID0gbGVhZi52aWV3LmNvbnRhaW5lckVsO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBhIHNjcm9sbGFibGUgcGFuZWwgZm9yIGpvdXJuYWwgZW50cmllc1xuICAgICAgICBjb25zdCBwYW5lbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdjdXN0b20tam91cm5hbC1wYW5lbCcgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgYWxsIGpvdXJuYWwgZmlsZXNcbiAgICAgICAgY29uc3Qgam91cm5hbEZpbGVzID0gZ2V0Sm91cm5hbEZpbGVzKHRoaXMucGx1Z2luLmFwcCwgdGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbEZvbGRlcik7XG4gICAgICAgIFxuICAgICAgICBpZiAoam91cm5hbEZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gam91cm5hbCBlbnRyaWVzIGZvdW5kLicpO1xuICAgICAgICAgICAgcGFuZWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICAgICAgICAgICAgY2xzOiAnam91cm5hbC1lbXB0eS1zdGF0ZScsXG4gICAgICAgICAgICAgICAgdGV4dDogJ05vIGpvdXJuYWwgZW50cmllcyBmb3VuZC4gQ3JlYXRlIG9uZSBieSBjbGlja2luZyB0aGUgam91cm5hbHMgaWNvbiBpbiB0aGUgcmliYm9uLicgXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU29ydCB0aGUgZmlsZXMgYWNjb3JkaW5nIHRvIHVzZXIgcHJlZmVyZW5jZVxuICAgICAgICBjb25zdCBzb3J0ZWRGaWxlcyA9IHNvcnRKb3VybmFsRmlsZXMoam91cm5hbEZpbGVzLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb3J0RGlyZWN0aW9uKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBlYWNoIGZpbGUgdG8gdGhlIHBhbmVsXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBzb3J0ZWRGaWxlcykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkSm91cm5hbEVudHJ5KHBhbmVsLCBmaWxlLCBmaWxlQ29udGVudCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlYWRpbmcgZmlsZSAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkRXJyb3JNZXNzYWdlKHBhbmVsLCBmaWxlLmJhc2VuYW1lLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBlcnJvciBtZXNzYWdlIHRvIHRoZSBwYW5lbCB3aGVuIGZpbGUgcmVhZGluZyBmYWlsc1xuICAgICAqL1xuICAgIHByaXZhdGUgYWRkRXJyb3JNZXNzYWdlKHBhbmVsOiBIVE1MRWxlbWVudCwgZmlsZW5hbWU6IHN0cmluZywgZXJyb3I6IGFueSk6IHZvaWQge1xuICAgICAgICBjb25zdCBlcnJvckRpdiA9IHBhbmVsLmNyZWF0ZURpdih7IGNsczogJ2pvdXJuYWwtZW50cnkgam91cm5hbC1lcnJvcicgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBlcnJvckhlYWRlciA9IGVycm9yRGl2LmNyZWF0ZURpdih7IGNsczogJ2pvdXJuYWwtZW50cnktaGVhZGVyJyB9KTtcbiAgICAgICAgZXJyb3JIZWFkZXIuY3JlYXRlRWwoJ2gzJywgeyBcbiAgICAgICAgICAgIGNsczogJ2pvdXJuYWwtZW50cnktdGl0bGUnLFxuICAgICAgICAgICAgdGV4dDogYCR7ZmlsZW5hbWV9IC0gRXJyb3JgIFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGVycm9yQ29udGVudCA9IGVycm9yRGl2LmNyZWF0ZURpdih7IGNsczogJ2pvdXJuYWwtZXJyb3ItY29udGVudCcgfSk7XG4gICAgICAgIGVycm9yQ29udGVudC50ZXh0Q29udGVudCA9IGBGYWlsZWQgdG8gbG9hZCBqb3VybmFsOiAke2Vycm9yLm1lc3NhZ2UgfHwgZXJyb3J9YDtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQWRkcyBhIGpvdXJuYWwgZW50cnkgdG8gdGhlIHBhbmVsXG4gICAgICovXG4gICAgcHJpdmF0ZSBhZGRKb3VybmFsRW50cnkocGFuZWw6IEhUTUxFbGVtZW50LCBmaWxlOiBURmlsZSwgY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGpvdXJuYWxEYXRlID0gZmlsZS5iYXNlbmFtZTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbWFpbiBjb250YWluZXIgZm9yIHRoaXMgZW50cnlcbiAgICAgICAgY29uc3Qgam91cm5hbEVudHJ5ID0gcGFuZWwuY3JlYXRlRGl2KHsgY2xzOiAnam91cm5hbC1lbnRyeScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIGhlYWRlciBzZWN0aW9uXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IGpvdXJuYWxFbnRyeS5jcmVhdGVEaXYoeyBjbHM6ICdqb3VybmFsLWVudHJ5LWhlYWRlcicgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgdG9nZ2xlIGJ1dHRvbiBmb3IgY29sbGFwc2luZy9leHBhbmRpbmdcbiAgICAgICAgY29uc3QgdG9nZ2xlQnV0dG9uID0gaGVhZGVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IGNsczogJ2NvbGxhcHNpYmxlLXRvZ2dsZScgfSk7XG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0RXhwYW5kRW50cmllcykge1xuICAgICAgICAgICAgdG9nZ2xlQnV0dG9uLmFkZENsYXNzKCd0b2dnbGUtZXhwYW5kZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHRpdGxlIHdpdGggbGluayB0byB0aGUgb3JpZ2luYWwgZmlsZVxuICAgICAgICBjb25zdCB0aXRsZSA9IGhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IGNsczogJ2pvdXJuYWwtZW50cnktdGl0bGUnIH0pO1xuICAgICAgICBjb25zdCB0aXRsZUxpbmsgPSB0aXRsZS5jcmVhdGVFbCgnYScsIHsgXG4gICAgICAgICAgICBjbHM6ICdqb3VybmFsLWVudHJ5LWxpbmsnLFxuICAgICAgICAgICAgdGV4dDogZm9ybWF0RGF0ZUZvckRpc3BsYXkoam91cm5hbERhdGUpXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGNsaWNrIG9uIHRoZSB0aXRsZSB0byBvcGVuIHRoZSBmaWxlXG4gICAgICAgIHRpdGxlTGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGUuYmFzZW5hbWUsIGZpbGUucGF0aCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBjb250ZW50IGFyZWFcbiAgICAgICAgY29uc3QgY29udGVudEFyZWEgPSBqb3VybmFsRW50cnkuY3JlYXRlRGl2KHsgXG4gICAgICAgICAgICBjbHM6ICdjb2xsYXBzaWJsZS1jb250ZW50JyArICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWZhdWx0RXhwYW5kRW50cmllcyA/ICcgY29udGVudC1leHBhbmRlZCcgOiAnJylcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBUcmFjayB0aGUgY3VycmVudCBjb250ZW50XG4gICAgICAgIGxldCBjdXJyZW50Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIHJlbmRlcmVkIGNvbnRlbnQgdmlld1xuICAgICAgICBjb25zdCByZW5kZXJlZENvbnRlbnQgPSBjb250ZW50QXJlYS5jcmVhdGVEaXYoeyBcbiAgICAgICAgICAgIGNsczogJ3JlbmRlcmVkLWNvbnRlbnQgYWN0aXZlLXZpZXcnIFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZWRpdGFibGUgdGV4dGFyZWFcbiAgICAgICAgY29uc3QgZWRpdGFibGVDb250ZW50ID0gY29udGVudEFyZWEuY3JlYXRlRWwoJ3RleHRhcmVhJywgeyBcbiAgICAgICAgICAgIGNsczogJ2VkaXRhYmxlLWNvbnRlbnQnLFxuICAgICAgICAgICAgdmFsdWU6IGN1cnJlbnRDb250ZW50XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHNhdmUgaW5kaWNhdG9yXG4gICAgICAgIGNvbnN0IHNhdmVJbmRpY2F0b3IgPSBjb250ZW50QXJlYS5jcmVhdGVEaXYoeyBcbiAgICAgICAgICAgIGNsczogJ2pvdXJuYWwtc2F2ZS1pbmRpY2F0b3InLFxuICAgICAgICAgICAgdGV4dDogJ1NhdmluZy4uLidcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGp1c3QgdGV4dGFyZWEgaGVpZ2h0IHRvIGNvbnRlbnRcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gZWRpdGFibGVDb250ZW50LnNjcm9sbEhlaWdodCArICdweCc7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRmxhZyB0byB0cmFjayBpZiB3ZSdyZSBpbiBhIGRyYWcgb3BlcmF0aW9uXG4gICAgICAgIGxldCBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICAvLyBGdW5jdGlvbiB0byByZW5kZXIgdGhlIG1hcmtkb3duIGNvbnRlbnRcbiAgICAgICAgY29uc3QgcmVuZGVyQ29udGVudCA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlbmRlcmVkQ29udGVudC5lbXB0eSgpO1xuICAgICAgICAgICAgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIodGhpcy5wbHVnaW4uYXBwLCBjdXJyZW50Q29udGVudCwgcmVuZGVyZWRDb250ZW50LCBmaWxlLnBhdGgsIHRoaXMucGx1Z2luKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaXRpYWwgcmVuZGVyXG4gICAgICAgIHJlbmRlckNvbnRlbnQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZ1bmN0aW9uIHRvIGVudGVyIGVkaXQgbW9kZVxuICAgICAgICBjb25zdCBlbnRlckVkaXRNb2RlID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRleHRhcmVhIGhhcyBjdXJyZW50IGNvbnRlbnRcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC52YWx1ZSA9IGN1cnJlbnRDb250ZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIaWRlIHJlbmRlcmVkIHZpZXcsIHNob3cgZWRpdGFibGUgdmlld1xuICAgICAgICAgICAgcmVuZGVyZWRDb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZS12aWV3Jyk7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLXZpZXcnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWRqdXN0IHRleHRhcmVhIGhlaWdodFxuICAgICAgICAgICAgZWRpdGFibGVDb250ZW50LnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQgPSBlZGl0YWJsZUNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gZXhpdCBlZGl0IG1vZGVcbiAgICAgICAgY29uc3QgZXhpdEVkaXRNb2RlID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gSWYgd2UncmUgY3VycmVudGx5IGRyYWdnaW5nLCBkb24ndCBleGl0IGVkaXQgbW9kZVxuICAgICAgICAgICAgaWYgKGlzRHJhZ2dpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEdldCBjdXJyZW50IGNvbnRlbnQgZnJvbSB0ZXh0YXJlYVxuICAgICAgICAgICAgY3VycmVudENvbnRlbnQgPSBlZGl0YWJsZUNvbnRlbnQudmFsdWU7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNhdmUgY2hhbmdlc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQ29udGVudFRvRmlsZShmaWxlLCBjdXJyZW50Q29udGVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlLXJlbmRlciBjb250ZW50XG4gICAgICAgICAgICByZW5kZXJDb250ZW50KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEhpZGUgZWRpdGFibGUgdmlldywgc2hvdyByZW5kZXJlZCB2aWV3XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlLXZpZXcnKTtcbiAgICAgICAgICAgIHJlbmRlcmVkQ29udGVudC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUtdmlldycpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xpY2sgb24gcmVuZGVyZWQgY29udGVudCB0byBlZGl0XG4gICAgICAgIHJlbmRlcmVkQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEb24ndCBlbnRlciBlZGl0IG1vZGUgaWYgY2xpY2tpbmcgb24gbGlua3Mgb3IgaGFzaHRhZ3NcbiAgICAgICAgICAgIGlmICh0YXJnZXQudGFnTmFtZSA9PT0gJ0EnIHx8IHRhcmdldC5jbG9zZXN0KCdhJykgfHwgXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY20taGFzaHRhZycpIHx8IHRhcmdldC5jbG9zZXN0KCcuY20taGFzaHRhZycpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFbnRlciBlZGl0IG1vZGVcbiAgICAgICAgICAgIGVudGVyRWRpdE1vZGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBFeGl0IGVkaXQgbW9kZSB3aGVuIHRleHRhcmVhIGxvc2VzIGZvY3VzIChidXQgbm90IGR1cmluZyBkcmFnIG9wZXJhdGlvbnMpXG4gICAgICAgIGVkaXRhYmxlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQWRkIGEgc21hbGwgZGVsYXkgdG8gY2hlY2sgaWYgd2UncmUgaW4gYSBkcmFnIG9wZXJhdGlvblxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZXhpdEVkaXRNb2RlKCk7XG4gICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBFc2NhcGUga2V5IHRvIGV4aXQgZWRpdCBtb2RlXG4gICAgICAgIGVkaXRhYmxlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5ibHVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRHJhZyBldmVudHMgZm9yIGhhbmRsaW5nIGltYWdlIGRyb3BzXG4gICAgICAgIGVkaXRhYmxlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW50ZXInLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlzRHJhZ2dpbmcgPSB0cnVlO1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5jbGFzc0xpc3QuYWRkKCdpcy1kcmFnZ2luZy1vdmVyJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgZWRpdGFibGVDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGVkaXRhYmxlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICBlZGl0YWJsZUNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnaXMtZHJhZ2dpbmctb3ZlcicpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGVkaXRhYmxlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZWRpdGFibGVDb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWRyYWdnaW5nLW92ZXInKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSGFuZGxlIGZpbGUgZHJvcHMgKGltYWdlcylcbiAgICAgICAgICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIgJiYgZXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzICYmIGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBlYWNoIGRyb3BwZWQgZmlsZVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQncyBhbiBpbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUudHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuaGFuZGxlSW1hZ2VEcm9wKGZpbGUsIGVkaXRhYmxlQ29udGVudCwgdGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbEZvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBoYW5kbGluZyBkcm9wcGVkIGZpbGVzOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgaGFuZGxpbmcgZHJvcHBlZCBmaWxlczogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlc2V0IGRyYWdnaW5nIHN0YXRlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEF1dG8tYWRqdXN0IHRleHRhcmVhIGhlaWdodCB3aGlsZSB0eXBpbmdcbiAgICAgICAgZWRpdGFibGVDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgZWRpdGFibGVDb250ZW50LnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQgPSBlZGl0YWJsZUNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIGN1cnJlbnQgY29udGVudCB3aGlsZSB0eXBpbmdcbiAgICAgICAgICAgIGN1cnJlbnRDb250ZW50ID0gZWRpdGFibGVDb250ZW50LnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEF1dG8tc2F2ZSBjb250ZW50IHdoaWxlIHR5cGluZ1xuICAgICAgICBsZXQgc2F2ZVRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGVkaXRhYmxlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgIC8vIFNob3cgJ1NhdmluZy4uLicgaW5kaWNhdG9yXG4gICAgICAgICAgICBzYXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3NhdmVkJyk7XG4gICAgICAgICAgICBzYXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ3NhdmluZycpO1xuICAgICAgICAgICAgc2F2ZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdTYXZpbmcuLi4nO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDbGVhciBwcmV2aW91cyB0aW1lb3V0XG4gICAgICAgICAgICBpZiAoc2F2ZVRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc2F2ZVRpbWVvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZXQgYSBuZXcgdGltZW91dCB0byBzYXZlIGFmdGVyIDUwMG1zIG9mIGluYWN0aXZpdHlcbiAgICAgICAgICAgIHNhdmVUaW1lb3V0ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlQ29udGVudFRvRmlsZShmaWxlLCBjdXJyZW50Q29udGVudCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvciB0byAnU2F2ZWQnXG4gICAgICAgICAgICAgICAgc2F2ZUluZGljYXRvci5jbGFzc0xpc3QucmVtb3ZlKCdzYXZpbmcnKTtcbiAgICAgICAgICAgICAgICBzYXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ3NhdmVkJyk7XG4gICAgICAgICAgICAgICAgc2F2ZUluZGljYXRvci50ZXh0Q29udGVudCA9ICdTYXZlZCc7XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRvZ2dsZSBleHBhbmQvY29sbGFwc2Ugb24gYnV0dG9uIGNsaWNrXG4gICAgICAgIHRvZ2dsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRvZ2dsZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKCd0b2dnbGUtZXhwYW5kZWQnKTtcbiAgICAgICAgICAgIGNvbnRlbnRBcmVhLmNsYXNzTGlzdC50b2dnbGUoJ2NvbnRlbnQtZXhwYW5kZWQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgYW4gaW1hZ2UgZHJvcCBvcGVyYXRpb25cbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUltYWdlRHJvcChmaWxlOiBGaWxlLCB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgam91cm5hbEZvbGRlcjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIC8vIENyZWF0ZSBhIHJlYWRlciB0byByZWFkIHRoZSBpbWFnZVxuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIHJlYWRlciBsb2FkXG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgJiYgZXZlbnQudGFyZ2V0LnJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIGZpbGUgdG8gYW4gQXJyYXlCdWZmZXJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgdGhpcy5maWxlVG9BcnJheUJ1ZmZlcihmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGZpbGUgbmFtZSBmb3IgdGhlIGltYWdlIGJhc2VkIG9uIHRpbWVzdGFtcCBhbmQgb3JpZ2luYWwgbmFtZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzYW5pdGl6ZWRGaWxlTmFtZSA9IGZpbGUubmFtZS5yZXBsYWNlKC9bXmEtekEtWjAtOS1fLl0vZywgJ18nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VOYW1lID0gYGpvdXJuYWwtaW1nLSR7dGltZXN0YW1wfS0ke3Nhbml0aXplZEZpbGVOYW1lfWA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGZvbGRlciBwYXRoIGZvciB0aGUgaW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlRm9sZGVyUGF0aCA9IGpvdXJuYWxGb2xkZXIgPyBgJHtqb3VybmFsRm9sZGVyfS9pbWFnZXNgIDogJ2ltYWdlcyc7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGhlIGltYWdlcyBmb2xkZXIgZXhpc3RzXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGltYWdlRm9sZGVyUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb2xkZXIgcHJvYmFibHkgYWxyZWFkeSBleGlzdHMsIHdlIGNhbiBpZ25vcmUgdGhpcyBlcnJvclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBQYXRoIGZvciB0aGUgbmV3IGltYWdlIGZpbGVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW1hZ2VQYXRoID0gYCR7aW1hZ2VGb2xkZXJQYXRofS8ke2ltYWdlTmFtZX1gO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbWFnZSBmaWxlIGluIHRoZSB2YXVsdFxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuY3JlYXRlQmluYXJ5KGltYWdlUGF0aCwgYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgbWFya2Rvd24gZm9yIHRoZSBpbWFnZSBhdCB0aGUgY3Vyc29yIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlTWFya2Rvd24gPSBgIVske2ZpbGUubmFtZX1dKCR7aW1hZ2VQYXRofSlgO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluc2VydFRleHRBdEN1cnNvcih0ZXh0YXJlYSwgaW1hZ2VNYXJrZG93bik7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIGFuIGlucHV0IGV2ZW50IHRvIGVuc3VyZSBjb250ZW50IGlzIHNhdmVkXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0RXZlbnQgPSBuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0YXJlYS5kaXNwYXRjaEV2ZW50KGlucHV0RXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgSW1hZ2UgXCIke2ZpbGUubmFtZX1cIiBhZGRlZGApO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBpbWFnZTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHNhdmluZyBpbWFnZTogJHtlcnJvcn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBTdGFydCByZWFkaW5nIHRoZSBmaWxlXG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIEZpbGUgdG8gQXJyYXlCdWZmZXJcbiAgICAgKi9cbiAgICBwcml2YXRlIGZpbGVUb0FycmF5QnVmZmVyKGZpbGU6IEZpbGUpOiBQcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUocmVhZGVyLnJlc3VsdCBhcyBBcnJheUJ1ZmZlcik7XG4gICAgICAgICAgICByZWFkZXIub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEluc2VydHMgdGV4dCBhdCB0aGUgY3Vyc29yIHBvc2l0aW9uIGluIGEgdGV4dGFyZWFcbiAgICAgKi9cbiAgICBwcml2YXRlIGluc2VydFRleHRBdEN1cnNvcih0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCwgdGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGN1cnNvclBvcyA9IHRleHRhcmVhLnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICBjb25zdCB0ZXh0QmVmb3JlID0gdGV4dGFyZWEudmFsdWUuc3Vic3RyaW5nKDAsIGN1cnNvclBvcyk7XG4gICAgICAgIGNvbnN0IHRleHRBZnRlciA9IHRleHRhcmVhLnZhbHVlLnN1YnN0cmluZyh0ZXh0YXJlYS5zZWxlY3Rpb25FbmQpO1xuICAgICAgICBcbiAgICAgICAgLy8gSW5zZXJ0IHRleHQgYXQgY3Vyc29yIHBvc2l0aW9uIHdpdGggbmV3bGluZXMgZm9yIGZvcm1hdHRpbmdcbiAgICAgICAgY29uc3QgbmV3VGV4dCA9IHRleHRCZWZvcmUgKyAnXFxuXFxuJyArIHRleHQgKyAnXFxuXFxuJyArIHRleHRBZnRlcjtcbiAgICAgICAgdGV4dGFyZWEudmFsdWUgPSBuZXdUZXh0O1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0IGN1cnNvciBwb3NpdGlvbiBhZnRlciB0aGUgaW5zZXJ0ZWQgdGV4dFxuICAgICAgICBjb25zdCBuZXdDdXJzb3JQb3MgPSBjdXJzb3JQb3MgKyB0ZXh0Lmxlbmd0aCArIDQ7IC8vICs0IGZvciB0aGUgbmV3bGluZXNcbiAgICAgICAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UobmV3Q3Vyc29yUG9zLCBuZXdDdXJzb3JQb3MpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBTYXZlcyB0aGUgY29udGVudCB0byB0aGUgZmlsZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgc2F2ZUNvbnRlbnRUb0ZpbGUoZmlsZTogVEZpbGUsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBzYXZlIGNoYW5nZXM6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBjaGFuZ2VzOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiLyoqXG4gKiBGb3JtYXRzIHRoZSBjdXJyZW50IGRhdGUgaW4gWVlZWS1NTS1ERCBmb3JtYXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvZGF5RGF0ZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICByZXR1cm4gZm9ybWF0RGF0ZVN0cmluZyh0b2RheSk7XG59XG5cbi8qKlxuICogRm9ybWF0cyBhIGRhdGUgYXMgWVlZWS1NTS1ERFxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZVN0cmluZyhkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gO1xufVxuXG4vKipcbiAqIEZvcm1hdHMgYSBkYXRlIHN0cmluZyBpbiBhIGh1bWFuLXJlYWRhYmxlIGZvcm1hdCB3aXRoIG9yZGluYWwgc3VmZml4XG4gKiBAcGFyYW0gZGF0ZVN0cmluZyBTdHJpbmcgaW4gWVlZWS1NTS1ERCBmb3JtYXRcbiAqIEByZXR1cm5zIEZvcm1hdHRlZCBkYXRlIHN0cmluZyAoZS5nLiwgXCJGZWIgMTV0aCwgMjAyM1wiKVxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZUZvckRpc3BsYXkoZGF0ZVN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cmluZyk7XG4gICAgY29uc3QgZGF0ZUZvcm1hdE9wdGlvbnM6IEludGwuRGF0ZVRpbWVGb3JtYXRPcHRpb25zID0geyBcbiAgICAgICAgbW9udGg6ICdzaG9ydCcsIFxuICAgICAgICB5ZWFyOiAnbnVtZXJpYycsIFxuICAgICAgICBkYXk6ICdudW1lcmljJyBcbiAgICB9O1xuXG4gICAgLy8gRm9ybWF0IGRhdGUgdXNpbmcgSW50bC5EYXRlVGltZUZvcm1hdFxuICAgIGNvbnN0IGZvcm1hdHRlZERhdGUgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4tVVMnLCBkYXRlRm9ybWF0T3B0aW9ucykuZm9ybWF0KGRhdGUpO1xuXG4gICAgLy8gRXh0cmFjdCBkYXkgYW5kIGFkZCBvcmRpbmFsIHN1ZmZpeCAoZS5nLiwgJ3N0JywgJ25kJywgJ3JkJywgJ3RoJylcbiAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcbiAgICBjb25zdCBkYXlTdWZmaXggPSBnZXREYXlTdWZmaXgoZGF5KTtcblxuICAgIC8vIEJ1aWxkIHRoZSBmaW5hbCBmb3JtYXR0ZWQgc3RyaW5nXG4gICAgY29uc3QgcGFydHMgPSBmb3JtYXR0ZWREYXRlLnNwbGl0KCcgJyk7XG4gICAgcmV0dXJuIGAke3BhcnRzWzBdfSAke2RheX0ke2RheVN1ZmZpeH0sICR7cGFydHNbMl19YDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBhcHByb3ByaWF0ZSBvcmRpbmFsIHN1ZmZpeCBmb3IgYSBkYXkgbnVtYmVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXlTdWZmaXgoZGF5OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmIChkYXkgPiAzICYmIGRheSA8IDIxKSByZXR1cm4gJ3RoJzsgLy8gU3BlY2lhbCBjYXNlIGZvciAxMXRoLTE5dGhcbiAgICBzd2l0Y2ggKGRheSAlIDEwKSB7XG4gICAgICAgIGNhc2UgMTogcmV0dXJuICdzdCc7XG4gICAgICAgIGNhc2UgMjogcmV0dXJuICduZCc7XG4gICAgICAgIGNhc2UgMzogcmV0dXJuICdyZCc7XG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiAndGgnO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBzdHJpbmcgbWF0Y2hlcyB0aGUgWVlZWS1NTS1ERCBwYXR0ZXJuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RhdGVGb3JtYXQodGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIC9eXFxkezR9LVxcZHsyfS1cXGR7Mn0kLy50ZXN0KHRleHQpO1xufSIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSwgVEZpbGUsIFRGb2xkZXIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBpc0RhdGVGb3JtYXQgfSBmcm9tICcuL2RhdGUtdXRpbHMnO1xuXG4vKipcbiAqIEVuc3VyZXMgdGhhdCB0aGUgc3BlY2lmaWVkIGZvbGRlciBleGlzdHMsIGNyZWF0aW5nIGl0IGlmIG5lY2Vzc2FyeVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5zdXJlRm9sZGVyKGFwcDogQXBwLCBmb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBJZiBubyBmb2xkZXIgaXMgc3BlY2lmaWVkLCBub3RoaW5nIHRvIGNyZWF0ZVxuICAgIGlmICghZm9sZGVyUGF0aCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBmb2xkZXIgZXhpc3RzXG4gICAgY29uc3QgZm9sZGVyRXhpc3RzID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKTtcbiAgICBcbiAgICAvLyBJZiBpdCBleGlzdHMsIG1ha2Ugc3VyZSBpdCdzIGEgZm9sZGVyXG4gICAgaWYgKGZvbGRlckV4aXN0cyAmJiAhKGZvbGRlckV4aXN0cyBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYENhbm5vdCBjcmVhdGUgam91cm5hbCBmb2xkZXI6IFwiJHtmb2xkZXJQYXRofVwiIGV4aXN0cyBidXQgaXMgbm90IGEgZm9sZGVyYCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIGZvbGRlciBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgaWYgKCFmb2xkZXJFeGlzdHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBDcmVhdGVkIGpvdXJuYWwgZm9sZGVyOiAke2ZvbGRlclBhdGh9YCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBjcmVhdGUgam91cm5hbCBmb2xkZXI6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGpvdXJuYWwgZm9sZGVyOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBmdWxsIHBhdGggZm9yIGEgZmlsZSB3aXRoaW4gdGhlIHNwZWNpZmllZCBmb2xkZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZpbGVQYXRoKGZvbGRlcjogc3RyaW5nLCBmaWxlbmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoZm9sZGVyKSB7XG4gICAgICAgIHJldHVybiBgJHtmb2xkZXJ9LyR7ZmlsZW5hbWV9YDtcbiAgICB9XG4gICAgcmV0dXJuIGZpbGVuYW1lO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGZpbGUgaXMgYSBqb3VybmFsIGZpbGUgYmFzZWQgb24gaXRzIG5hbWUgcGF0dGVybiBhbmQgbG9jYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSm91cm5hbEZpbGUoZmlsZTogVEZpbGUsIGpvdXJuYWxGb2xkZXI/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBDaGVjayBpZiBiYXNlbmFtZSBtYXRjaGVzIFlZWVktTU0tREQgcGF0dGVyblxuICAgIGNvbnN0IGlzRGF0ZUJhc2VuYW1lID0gaXNEYXRlRm9ybWF0KGZpbGUuYmFzZW5hbWUpO1xuICAgIFxuICAgIC8vIElmIGZvbGRlciBpcyBzcGVjaWZpZWQsIGFsc28gY2hlY2sgaWYgdGhlIGZpbGUgaXMgaW4gdGhhdCBmb2xkZXJcbiAgICBpZiAoam91cm5hbEZvbGRlcikge1xuICAgICAgICByZXR1cm4gaXNEYXRlQmFzZW5hbWUgJiYgZmlsZS5wYXRoLnN0YXJ0c1dpdGgoam91cm5hbEZvbGRlciArICcvJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIG5vIGZvbGRlciBpcyBzcGVjaWZpZWQsIGp1c3QgY2hlY2sgdGhlIGJhc2VuYW1lXG4gICAgcmV0dXJuIGlzRGF0ZUJhc2VuYW1lO1xufVxuXG4vKipcbiAqIEdldHMgYWxsIGpvdXJuYWwgZmlsZXMgaW4gdGhlIHZhdWx0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRKb3VybmFsRmlsZXMoYXBwOiBBcHAsIGpvdXJuYWxGb2xkZXI/OiBzdHJpbmcpOiBURmlsZVtdIHtcbiAgICAvLyBHZXQgYWxsIG1hcmtkb3duIGZpbGVzIGluIHRoZSB2YXVsdFxuICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIC8vIEZpbHRlciBmaWxlcyB0aGF0IGZvbGxvdyBhIGRhaWx5IG5vdGUgcGF0dGVybiBhbmQgYXJlIGluIHRoZSBjb3JyZWN0IGZvbGRlclxuICAgIHJldHVybiBmaWxlcy5maWx0ZXIoKGZpbGUpID0+IGlzSm91cm5hbEZpbGUoZmlsZSwgam91cm5hbEZvbGRlcikpO1xufVxuXG4vKipcbiAqIFNvcnRzIGpvdXJuYWwgZmlsZXMgYnkgZGF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc29ydEpvdXJuYWxGaWxlcyhmaWxlczogVEZpbGVbXSwgc29ydERpcmVjdGlvbjogJ25ld2VzdC1maXJzdCcgfCAnb2xkZXN0LWZpcnN0Jyk6IFRGaWxlW10ge1xuICAgIHJldHVybiBmaWxlcy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmIChzb3J0RGlyZWN0aW9uID09PSAnbmV3ZXN0LWZpcnN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIGIuYmFzZW5hbWUubG9jYWxlQ29tcGFyZShhLmJhc2VuYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBhLmJhc2VuYW1lLmxvY2FsZUNvbXBhcmUoYi5iYXNlbmFtZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIG9yIGdldHMgYSBqb3VybmFsIGZpbGUgZm9yIHRoZSBzcGVjaWZpZWQgZGF0ZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JDcmVhdGVKb3VybmFsRmlsZShcbiAgICBhcHA6IEFwcCwgXG4gICAgam91cm5hbEZvbGRlcjogc3RyaW5nLCBcbiAgICBmaWxlbmFtZTogc3RyaW5nLFxuICAgIGluaXRpYWxDb250ZW50OiBzdHJpbmcgPSAnJ1xuKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcbiAgICBhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBqb3VybmFsRm9sZGVyKTtcbiAgICBcbiAgICBjb25zdCBmaWxlUGF0aCA9IGdldEZpbGVQYXRoKGpvdXJuYWxGb2xkZXIsIGZpbGVuYW1lKTtcbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGUgZmlsZSBhbHJlYWR5IGV4aXN0c1xuICAgIGxldCBmaWxlID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgXG4gICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICByZXR1cm4gZmlsZTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIHRoZSBmaWxlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICB0cnkge1xuICAgICAgICBmaWxlID0gYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgaW5pdGlhbENvbnRlbnQpO1xuICAgICAgICBuZXcgTm90aWNlKGBDcmVhdGVkIGpvdXJuYWwgZW50cnk6ICR7ZmlsZW5hbWV9YCk7XG4gICAgICAgIHJldHVybiBmaWxlIGFzIFRGaWxlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBjcmVhdGUgam91cm5hbCBlbnRyeTogJHtlcnJvcn1gKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBqb3VybmFsIGVudHJ5OicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBK0I7OztBQ0EvQixzQkFBK0M7QUFVeEMsSUFBTSxtQkFBdUM7QUFBQSxFQUNoRCxlQUFlO0FBQUEsRUFDZixZQUFZO0FBQUEsRUFDWixlQUFlO0FBQUEsRUFDZixzQkFBc0I7QUFDMUI7QUFFTyxJQUFNLHVCQUFOLGNBQW1DLGlDQUFpQjtBQUFBLEVBR3ZELFlBQVksS0FBVSxRQUEwQjtBQUM1QyxVQUFNLEtBQUssTUFBTTtBQUNqQixTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRUEsVUFBZ0I7QUFDWixVQUFNLEVBQUUsWUFBWSxJQUFJO0FBQ3hCLGdCQUFZLE1BQU07QUFFbEIsZ0JBQVksU0FBUyxNQUFNLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUVyRSxRQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSxnQkFBZ0IsRUFDeEIsUUFBUSx5REFBeUQsRUFDakUsUUFBUSxVQUFRLEtBQ1osZUFBZSxVQUFVLEVBQ3pCLFNBQVMsS0FBSyxPQUFPLFNBQVMsYUFBYSxFQUMzQyxTQUFTLE9BQU8sVUFBVTtBQUV2QixXQUFLLE9BQU8sU0FBUyxnQkFBZ0IsTUFBTSxRQUFRLGNBQWMsRUFBRTtBQUNuRSxZQUFNLEtBQUssT0FBTyxhQUFhO0FBQUEsSUFDbkMsQ0FBQyxDQUFDO0FBRVYsUUFBSSx3QkFBUSxXQUFXLEVBQ2xCLFFBQVEsYUFBYSxFQUNyQixR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QU07QUFBQSxNQUNOLFVBQVUsTUFBTTtBQUNaLGFBQUssb0JBQW9CO0FBQUEsTUFDN0I7QUFBQSxJQUNKLENBQUM7QUFHRCxTQUFLLGNBQWMsSUFBSSxxQkFBcUIsS0FBSyxLQUFLLElBQUksQ0FBQztBQUFBLEVBQy9EO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFLQSxNQUFNLGtCQUFpQztBQUVuQyxVQUFNLEtBQUssb0JBQW9CO0FBRy9CLFVBQU0sS0FBSyxZQUFZLEtBQUs7QUFBQSxFQUNoQztBQUFBO0FBQUE7QUFBQTtBQUFBLEVBS0EsTUFBTSxzQkFBcUM7QUFDdkMsVUFBTSxPQUFPLGFBQWE7QUFDMUIsVUFBTSxXQUFXLEdBQUc7QUFFcEIsVUFBTSxPQUFPLE1BQU07QUFBQSxNQUNmLEtBQUs7QUFBQSxNQUNMLEtBQUssU0FBUztBQUFBLE1BQ2Q7QUFBQSxJQUNKO0FBRUEsUUFBSSxDQUFDLE1BQU07QUFDUCxVQUFJLHdCQUFPLDBDQUEyQztBQUN0RDtBQUFBLElBQ0o7QUFBQSxFQUNKO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDakIsU0FBSyxXQUFXLE9BQU8sT0FBTyxDQUFDLEdBQUcsa0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUM3RTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ2pCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ3JDO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImZpbGUiXQp9Cg==
