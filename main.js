/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => JournalingPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  journalFolder: "journals",
  dateFormat: "YYYY-MM-DD",
  sortDirection: "newest-first",
  defaultExpandEntries: true,
  folderFormat: ""
};
var JournalingSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Continuous Journaling Settings" });
    new import_obsidian.Setting(containerEl).setName("Journal Folder").setDesc("Specify the folder where journal entries will be stored").addText((text) => text.setPlaceholder("journals").setValue(this.plugin.settings.journalFolder).onChange(async (value) => {
      this.plugin.settings.journalFolder = value.replace(/^\/+|\/+$/g, "");
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Date Format").setDesc("Format for journal filenames (YYYY-MM-DD recommended)").addText((text) => text.setPlaceholder("YYYY-MM-DD").setValue(this.plugin.settings.dateFormat).onChange(async (value) => {
      this.plugin.settings.dateFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Sort Direction").setDesc("How to sort journal entries in the continuous view").addDropdown((dropdown) => dropdown.addOption("newest-first", "Newest entries first").addOption("oldest-first", "Oldest entries first").setValue(this.plugin.settings.sortDirection).onChange(async (value) => {
      this.plugin.settings.sortDirection = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Default Expand Entries").setDesc("Automatically expand entries when opening the journals view").addToggle((toggle) => toggle.setValue(this.plugin.settings.defaultExpandEntries).onChange(async (value) => {
      this.plugin.settings.defaultExpandEntries = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Folder Structure Format").setDesc('Format pattern for organizing journal entries in subfolders. Examples: empty for flat structure, "YYYY" for yearly folders, "YYYY/MM" for monthly folders.').addText((text) => text.setPlaceholder("YYYY/MM").setValue(this.plugin.settings.folderFormat).onChange(async (value) => {
      this.plugin.settings.folderFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Migrate Journal Entries").setDesc("Move existing journal entries to the folder structure defined by the folder format pattern.").addButton((button) => button.setButtonText("Migrate Entries").setCta().onClick(async () => {
      await this.plugin.migrateJournalEntries();
    }));
    new import_obsidian.Setting(containerEl).setName("Delete Empty Journal Entries").setDesc("Delete all EMPTY journal entries. This action cannot be undone.").addButton((button) => button.setButtonText("Delete Empty Entries").setCta().setClass("journal-delete-button").onClick(async () => {
      await this.plugin.deleteEmptyJournalEntries();
    }));
  }
};

// src/journal-view.ts
var import_obsidian3 = require("obsidian");

// src/utils/date-utils.ts
function getTodayDate() {
  const today = new Date();
  return formatDateString(today);
}
function formatDateString(date) {
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, "0");
  const day = String(date.getDate()).padStart(2, "0");
  return `${year}-${month}-${day}`;
}
function formatDateForDisplay(dateString) {
  const date = new Date(dateString);
  const dateFormatOptions = {
    month: "short",
    year: "numeric",
    day: "numeric"
  };
  const formattedDate = new Intl.DateTimeFormat("en-US", dateFormatOptions).format(date);
  const day = date.getDate();
  const daySuffix = getDaySuffix(day);
  const parts = formattedDate.split(" ");
  return `${parts[0]} ${day}${daySuffix}, ${parts[2]}`;
}
function getDaySuffix(day) {
  if (day > 3 && day < 21)
    return "th";
  switch (day % 10) {
    case 1:
      return "st";
    case 2:
      return "nd";
    case 3:
      return "rd";
    default:
      return "th";
  }
}
function isDateFormat(text) {
  return /^\d{4}-\d{2}-\d{2}$/.test(text);
}

// src/utils/file-utils.ts
var import_obsidian2 = require("obsidian");
function getFilePath(folder, filename) {
  if (folder) {
    return `${folder}/${filename}`;
  }
  return filename;
}
async function ensureFolder(app, folderPath) {
  if (!folderPath) {
    return true;
  }
  const folderExists = app.vault.getAbstractFileByPath(folderPath);
  if (folderExists && !(folderExists instanceof import_obsidian2.TFolder)) {
    new import_obsidian2.Notice(`Cannot create folder: "${folderPath}" exists but is not a folder`);
    return false;
  }
  if (!folderExists) {
    try {
      await app.vault.createFolder(folderPath);
      new import_obsidian2.Notice(`Created folder: ${folderPath}`);
      return true;
    } catch (error) {
      new import_obsidian2.Notice(`Failed to create folder: ${error}`);
      console.error("Failed to create folder:", error);
      return false;
    }
  }
  return true;
}
function getJournalFilePath(journalFolder, filename, folderFormat = "") {
  if (!folderFormat) {
    return getFilePath(journalFolder, filename);
  }
  const datePart = filename.split(".")[0];
  if (!isDateFormat(datePart)) {
    return getFilePath(journalFolder, filename);
  }
  const [year, month, day] = datePart.split("-").map((part) => parseInt(part));
  let formattedPath = folderFormat;
  formattedPath = formattedPath.replace("YYYY", year.toString());
  formattedPath = formattedPath.replace("MM", month.toString().padStart(2, "0"));
  formattedPath = formattedPath.replace("DD", day.toString().padStart(2, "0"));
  if (journalFolder) {
    return `${journalFolder}/${formattedPath}/${filename}`;
  }
  return `${formattedPath}/${filename}`;
}
async function ensureAllFolders(app, filePath) {
  const pathParts = filePath.split("/");
  const fileNameIndex = pathParts.length - 1;
  let currentFolder = "";
  for (let i = 0; i < fileNameIndex; i++) {
    if (currentFolder) {
      currentFolder += "/";
    }
    currentFolder += pathParts[i];
    if (!currentFolder)
      continue;
    if (!await ensureFolder(app, currentFolder)) {
      return false;
    }
  }
  return true;
}
async function getOrCreateJournalFile(app, journalFolder, filename, folderFormat = "", initialContent = "") {
  const filePath = getJournalFilePath(journalFolder, filename, folderFormat);
  if (!await ensureAllFolders(app, filePath)) {
    return null;
  }
  let file = app.vault.getAbstractFileByPath(filePath);
  if (file instanceof import_obsidian2.TFile) {
    return file;
  }
  try {
    file = await app.vault.create(filePath, initialContent);
    new import_obsidian2.Notice(`Created journal entry: ${filename}`);
    return file;
  } catch (error) {
    new import_obsidian2.Notice(`Failed to create journal entry: ${error}`);
    console.error("Failed to create journal entry:", error);
    return null;
  }
}
function isJournalFile(file, journalFolder, folderFormat) {
  const isDateBasename = isDateFormat(file.basename);
  if (!isDateBasename) {
    return false;
  }
  if (!journalFolder) {
    return true;
  }
  if (folderFormat) {
    const dateStr = file.basename.split(".")[0];
    const [year, month, day] = dateStr.split("-");
    let expectedPath = folderFormat;
    expectedPath = expectedPath.replace("YYYY", year);
    expectedPath = expectedPath.replace("MM", month);
    expectedPath = expectedPath.replace("DD", day);
    const expectedFullPath = `${journalFolder}/${expectedPath}`;
    return file.path.startsWith(expectedFullPath);
  }
  return file.path.startsWith(journalFolder + "/");
}
function getJournalFiles(app, journalFolder, folderFormat) {
  const files = app.vault.getMarkdownFiles();
  return files.filter((file) => isJournalFile(file, journalFolder, folderFormat));
}
function sortJournalFiles(files, sortDirection) {
  return files.sort((a, b) => {
    if (sortDirection === "newest-first") {
      return b.basename.localeCompare(a.basename);
    } else {
      return a.basename.localeCompare(b.basename);
    }
  });
}

// src/journal-view.ts
var JournalView = class {
  constructor(plugin) {
    this.activeEditor = null;
    // Simple lazy loading properties
    this.allFiles = [];
    this.batchSize = 10;
    this.currentBatch = 0;
    this.loadMoreButton = null;
    this.plugin = plugin;
    this.registerCleanup();
  }
  // Opens the continuous journal view in a new leaf
  async open() {
    const leaf = this.plugin.app.workspace.getLeaf(true);
    await leaf.setViewState({
      type: "markdown",
      active: true
    });
    const contentEl = leaf.view.containerEl;
    contentEl.empty();
    const panel = contentEl.createDiv({ cls: "custom-journal-panel" });
    const journalFiles = getJournalFiles(
      this.plugin.app,
      this.plugin.settings.journalFolder,
      this.plugin.settings.folderFormat
    );
    if (journalFiles.length === 0) {
      new import_obsidian3.Notice("No journal entries found.");
      panel.createEl("div", {
        cls: "journal-empty-state",
        text: "No journal entries found. Create one by clicking the journals icon in the ribbon."
      });
      return;
    }
    this.allFiles = sortJournalFiles(journalFiles, this.plugin.settings.sortDirection);
    this.currentBatch = 0;
    await this.loadBatch(panel);
    if (this.currentBatch * this.batchSize < this.allFiles.length) {
      this.addLoadMoreButton(panel);
    }
  }
  // Load a batch of entries
  async loadBatch(panel) {
    const start = this.currentBatch * this.batchSize;
    const end = Math.min(start + this.batchSize, this.allFiles.length);
    panel.querySelectorAll(".journal-load-more-button").forEach((btn) => btn.remove());
    this.loadMoreButton = null;
    const filesToLoad = this.allFiles.slice(start, end);
    for (const file of filesToLoad) {
      try {
        const fileContent = await this.plugin.app.vault.read(file);
        this.addJournalEntry(panel, file, fileContent);
      } catch (error) {
        console.error(`Error reading file ${file.path}:`, error);
        this.addErrorMessage(panel, file.basename, error);
      }
    }
    this.currentBatch++;
    panel.querySelectorAll(".journal-load-more-button").forEach((btn) => btn.remove());
    if (this.currentBatch * this.batchSize < this.allFiles.length) {
      this.addLoadMoreButton(panel);
    }
  }
  // Add a "Load More" button
  addLoadMoreButton(panel) {
    panel.querySelectorAll(".journal-load-more-button").forEach((btn) => btn.remove());
    this.loadMoreButton = panel.createEl("button", {
      cls: "journal-load-more-button",
      text: "Load More Entries"
    });
    panel.appendChild(this.loadMoreButton);
    this.loadMoreButton.addEventListener("click", async () => {
      if (this.loadMoreButton) {
        this.loadMoreButton.textContent = "Loading...";
        this.loadMoreButton.setAttr("disabled", "true");
      }
      await this.loadBatch(panel);
    });
  }
  // Adds an error message to the panel when file reading fails
  addErrorMessage(panel, filename, error) {
    const errorDiv = panel.createDiv({ cls: "journal-entry journal-error" });
    const errorHeader = errorDiv.createDiv({ cls: "journal-entry-header" });
    errorHeader.createEl("h3", {
      cls: "journal-entry-title",
      text: `${filename} - Error`
    });
    const errorContent = errorDiv.createDiv({ cls: "journal-error-content" });
    errorContent.textContent = `Failed to load journal: ${error.message || error}`;
  }
  // Adds a journal entry to the panel
  addJournalEntry(panel, file, content) {
    const journalDate = file.basename;
    const journalEntry = panel.createDiv({ cls: "journal-entry" });
    const header = journalEntry.createDiv({ cls: "journal-entry-header" });
    const toggleButton = header.createEl("button", { cls: "collapsible-toggle" });
    if (this.plugin.settings.defaultExpandEntries) {
      toggleButton.addClass("toggle-expanded");
    }
    const title = header.createEl("h3", { cls: "journal-entry-title" });
    const titleLink = title.createEl("a", {
      cls: "journal-entry-link",
      text: formatDateForDisplay(journalDate)
    });
    titleLink.addEventListener("click", (event) => {
      event.preventDefault();
      this.plugin.app.workspace.openLinkText(file.basename, file.path);
    });
    const contentArea = journalEntry.createDiv({
      cls: "collapsible-content" + (this.plugin.settings.defaultExpandEntries ? " content-expanded" : "")
    });
    let currentContent = content;
    let isEditing = false;
    const renderedContent = contentArea.createDiv({
      cls: "rendered-content active-view"
    });
    const editableContent = contentArea.createEl("textarea", {
      cls: "editable-content",
      value: currentContent
    });
    const closeButton = contentArea.createEl("button", {
      cls: "journal-close-button",
      text: "Close"
    });
    closeButton.style.display = "none";
    const saveIndicator = contentArea.createDiv({
      cls: "journal-save-indicator",
      text: "Saved"
    });
    saveIndicator.style.display = "none";
    window.requestAnimationFrame(() => {
      editableContent.style.height = editableContent.scrollHeight + "px";
    });
    const renderContent = () => {
      renderedContent.empty();
      import_obsidian3.MarkdownRenderer.render(this.plugin.app, currentContent, renderedContent, file.path, this.plugin);
      this.makeHashtagsClickable(renderedContent);
    };
    renderContent();
    const enterEditMode = () => {
      isEditing = true;
      this.activeEditor = editableContent;
      editableContent.value = currentContent;
      renderedContent.classList.remove("active-view");
      editableContent.classList.add("active-view");
      closeButton.style.display = "block";
      editableContent.style.height = "auto";
      editableContent.style.height = editableContent.scrollHeight + "px";
      editableContent.focus();
    };
    const exitEditMode = async () => {
      if (isEditing) {
        currentContent = editableContent.value;
        await this.saveContentToFile(file, currentContent);
        renderContent();
        editableContent.classList.remove("active-view");
        closeButton.style.display = "none";
        renderedContent.classList.add("active-view");
        isEditing = false;
        if (this.activeEditor === editableContent) {
          this.activeEditor = null;
        }
      }
    };
    renderedContent.addEventListener("click", (event) => {
      const target = event.target;
      if (target.tagName === "A" || target.closest("a") || target.classList.contains("cm-hashtag") || target.closest(".cm-hashtag")) {
        return;
      }
      enterEditMode();
    });
    closeButton.addEventListener("click", () => {
      exitEditMode();
    });
    editableContent.addEventListener("keydown", (event) => {
      if (event.key === "Escape") {
        exitEditMode();
      }
    });
    editableContent.addEventListener("input", () => {
      editableContent.style.height = "auto";
      editableContent.style.height = editableContent.scrollHeight + "px";
      currentContent = editableContent.value;
    });
    let saveTimeout = null;
    editableContent.addEventListener("input", () => {
      saveIndicator.style.display = "block";
      saveIndicator.classList.remove("saved");
      saveIndicator.classList.add("saving");
      saveIndicator.textContent = "Saving...";
      if (saveTimeout) {
        clearTimeout(saveTimeout);
      }
      saveTimeout = setTimeout(async () => {
        await this.saveContentToFile(file, currentContent);
        saveIndicator.classList.remove("saving");
        saveIndicator.classList.add("saved");
        saveIndicator.textContent = "Saved";
        setTimeout(() => {
          if (saveIndicator.classList.contains("saved")) {
            saveIndicator.style.display = "none";
          }
        }, 2e3);
      }, 500);
    });
    toggleButton.addEventListener("click", () => {
      toggleButton.classList.toggle("toggle-expanded");
      contentArea.classList.toggle("content-expanded");
    });
  }
  /**
   * Saves the content to the file
   */
  async saveContentToFile(file, content) {
    try {
      await this.plugin.app.vault.modify(file, content);
    } catch (error) {
      new import_obsidian3.Notice(`Failed to save changes: ${error}`);
      console.error("Failed to save changes:", error);
    }
  }
  /**
   * Inserts a reference to a file into the active journal entry
   */
  insertFileReference(filePath) {
    if (!this.activeEditor) {
      new import_obsidian3.Notice("No active journal entry to insert file into");
      return;
    }
    const file = this.plugin.app.vault.getAbstractFileByPath(filePath);
    if (!(file instanceof import_obsidian3.TFile)) {
      new import_obsidian3.Notice("Invalid file");
      return;
    }
    let fileReference;
    if (this.isImageFile(file)) {
      fileReference = `![[${file.name}]]`;
    } else if (this.isMarkdownFile(file)) {
      fileReference = `![[${file.name}]]`;
    } else {
      fileReference = `![[${file.name}]]`;
    }
    this.activeEditor.focus();
    const cursorPos = this.activeEditor.selectionStart;
    const textBefore = this.activeEditor.value.substring(0, cursorPos);
    const textAfter = this.activeEditor.value.substring(this.activeEditor.selectionEnd);
    const newText = textBefore + fileReference + textAfter;
    this.activeEditor.value = newText;
    const newCursorPos = cursorPos + fileReference.length;
    this.activeEditor.setSelectionRange(newCursorPos, newCursorPos);
    const inputEvent = new Event("input", { bubbles: true, cancelable: true });
    this.activeEditor.dispatchEvent(inputEvent);
    new import_obsidian3.Notice(`Inserted reference to ${file.name}`);
  }
  /**
   * Check if a file is an image
   */
  isImageFile(file) {
    const imageExtensions = ["png", "jpg", "jpeg", "gif", "svg", "webp"];
    const ext = file.extension.toLowerCase();
    return imageExtensions.includes(ext);
  }
  /**
   * Check if a file is a markdown file
   */
  isMarkdownFile(file) {
    const ext = file.extension.toLowerCase();
    return ext === "md" || ext === "markdown";
  }
  registerCleanup() {
    this.plugin.registerEvent(
      this.plugin.app.workspace.on("layout-change", () => {
        if (this.activeEditor) {
          const journalEntry = this.activeEditor.closest(".journal-entry");
          if (journalEntry) {
            const event = new KeyboardEvent("keydown", { key: "Escape" });
            this.activeEditor.dispatchEvent(event);
          }
          this.activeEditor = null;
        }
      })
    );
  }
  makeHashtagsClickable(contentEl) {
    const hashtags = contentEl.querySelectorAll(".cm-hashtag, .tag");
    hashtags.forEach((tag) => {
      var _a;
      if (tag instanceof HTMLElement) {
        const newTag = tag.cloneNode(true);
        (_a = tag.parentNode) == null ? void 0 : _a.replaceChild(newTag, tag);
        newTag.addEventListener("click", (e) => {
          var _a2;
          e.preventDefault();
          e.stopPropagation();
          const hashtagText = ((_a2 = newTag.textContent) == null ? void 0 : _a2.trim()) || "";
          this.openSearchWithHashtag(hashtagText);
        });
        newTag.style.cursor = "pointer";
      }
    });
  }
  openSearchWithHashtag(hashtag) {
    var _a, _b, _c, _d;
    const searchTerm = hashtag.startsWith("#") ? hashtag : `#${hashtag}`;
    try {
      const app = this.plugin.app;
      if ((_b = (_a = app.internalPlugins) == null ? void 0 : _a.getPluginById("global-search")) == null ? void 0 : _b.instance.openGlobalSearch) {
        (_c = app.internalPlugins.getPluginById("global-search")) == null ? void 0 : _c.instance.openGlobalSearch(searchTerm);
        return;
      }
      if ((_d = app.commands) == null ? void 0 : _d.executeCommandById("global-search:open")) {
        setTimeout(() => {
          const searchInput = document.querySelector(".search-input-container input");
          if (searchInput instanceof HTMLInputElement) {
            searchInput.value = searchTerm;
            searchInput.dispatchEvent(new Event("input", { bubbles: true }));
          }
        }, 100);
        return;
      }
      const searchLeaf = this.plugin.app.workspace.getLeavesOfType("search")[0];
      if (searchLeaf) {
        this.plugin.app.workspace.setActiveLeaf(searchLeaf, { focus: true });
        setTimeout(() => {
          const searchInput = document.querySelector(".search-input-container input");
          if (searchInput instanceof HTMLInputElement) {
            searchInput.value = searchTerm;
            searchInput.dispatchEvent(new Event("input", { bubbles: true }));
          }
        }, 100);
        return;
      }
      new import_obsidian3.Notice(`Search for: ${searchTerm}`);
    } catch (error) {
      console.error("Error opening search:", error);
      new import_obsidian3.Notice(`Could not open search. Please search for: ${searchTerm}`);
    }
  }
};

// src/main.ts
var JournalingPlugin = class extends import_obsidian4.Plugin {
  async onload() {
    await this.loadSettings();
    this.journalView = new JournalView(this);
    const ribbonIconEl = this.addRibbonIcon(
      "notebook-text",
      "Open Journals",
      async (evt) => {
        await this.openJournalView();
      }
    );
    ribbonIconEl.addClass("journaling-ribbon-icon");
    this.addCommand({
      id: "open-journal-view",
      name: "Open Journal View",
      callback: () => {
        this.openJournalView();
      }
    });
    this.addCommand({
      id: "create-todays-journal",
      name: "Create/Open Today's Journal",
      callback: () => {
        this.createTodaysJournal();
      }
    });
    this.addSettingTab(new JournalingSettingTab(this.app, this));
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        if (file instanceof import_obsidian4.TFile) {
          menu.addItem((item) => {
            item.setTitle("Insert into Journal").setIcon("text-cursor-input").onClick(() => {
              const journalView = this.journalView;
              if (journalView) {
                journalView.insertFileReference(file.path);
              } else {
                new import_obsidian4.Notice("Open the journal view first to insert file reference");
              }
            });
          });
        }
      })
    );
  }
  // Opens the continuous journal view
  async openJournalView() {
    await this.createTodaysJournal();
    await this.journalView.open();
  }
  // Creates or opens today's journal entry
  async createTodaysJournal() {
    const date = getTodayDate();
    const fileName = `${date}.md`;
    const file = await getOrCreateJournalFile(
      this.app,
      this.settings.journalFolder,
      fileName,
      this.settings.folderFormat
      // Pass the folder format setting
    );
    if (!file) {
      new import_obsidian4.Notice("Failed to create or open today's journal");
      return;
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Migrates existing journal entries to the new folder structure
   */
  async migrateJournalEntries() {
    const journalFiles = getJournalFiles(
      this.app,
      this.settings.journalFolder,
      ""
      // Use empty folder format to get all files regardless of structure
    );
    if (journalFiles.length === 0) {
      new import_obsidian4.Notice("No journal entries found to migrate.");
      return;
    }
    if (!this.settings.folderFormat) {
      new import_obsidian4.Notice("Please set a folder format in settings before migrating.");
      return;
    }
    const confirmMessage = `Migrate ${journalFiles.length} journal entries to new folder structure? This will:
    1. Move files to folders based on the pattern: ${this.settings.folderFormat}
    2. Create any necessary folders
    3. Keep the original filename
    
    This operation cannot be undone automatically.`;
    if (!confirm(confirmMessage)) {
      return;
    }
    const modal = new MigrationModal(this.app, journalFiles.length);
    modal.open();
    let migratedCount = 0;
    let errorCount = 0;
    for (const file of journalFiles) {
      try {
        modal.updateStatus(`Migrating ${file.name}...`);
        const newPath = getJournalFilePath(
          this.settings.journalFolder,
          file.name,
          this.settings.folderFormat
        );
        if (file.path === newPath) {
          migratedCount++;
          modal.updateProgress(migratedCount);
          continue;
        }
        const content = await this.app.vault.read(file);
        await ensureAllFolders(this.app, newPath);
        await this.app.vault.create(newPath, content);
        await this.app.vault.delete(file);
        migratedCount++;
        modal.updateProgress(migratedCount);
      } catch (error) {
        console.error(`Error migrating file ${file.path}:`, error);
        modal.updateStatus(`Error migrating ${file.name}: ${error}`);
        errorCount++;
      }
    }
    modal.updateStatus(`Migration complete! Migrated ${migratedCount} files with ${errorCount} errors.`);
    setTimeout(() => {
      modal.close();
      new import_obsidian4.Notice(`Migration complete! Migrated ${migratedCount} files with ${errorCount} errors.`);
    }, 3e3);
  }
  async deleteEmptyJournalEntries() {
    const journalFiles = getJournalFiles(
      this.app,
      this.settings.journalFolder,
      this.settings.folderFormat
    );
    if (journalFiles.length === 0) {
      new import_obsidian4.Notice("No journal entries found to check.");
      return;
    }
    const confirmMessage = `Do you want to proceed with scanning ${journalFiles.length} journal entries?`;
    if (!confirm(confirmMessage)) {
      return;
    }
    new import_obsidian4.Notice("Scanning for empty journal entries...");
    let emptyFiles = [];
    let errorCount = 0;
    const isFileEmpty = (content) => {
      return content.trim().length === 0;
    };
    for (const file of journalFiles) {
      try {
        const content = await this.app.vault.read(file);
        if (isFileEmpty(content)) {
          emptyFiles.push(file);
        }
      } catch (error) {
        console.error(`Error scanning file ${file.path}:`, error);
        errorCount++;
      }
    }
    if (emptyFiles.length === 0) {
      new import_obsidian4.Notice("No empty journal entries found.");
      return;
    }
    const deleteConfirmMessage = `${emptyFiles.length} empty journal ${emptyFiles.length === 1 ? "entry was" : "entries were"} found.
        
        Do you want to proceed with the deletion? This operation cannot be undone.`;
    if (!confirm(deleteConfirmMessage)) {
      return;
    }
    new import_obsidian4.Notice(`Deleting ${emptyFiles.length} empty journal entries...`);
    let deletedCount = 0;
    errorCount = 0;
    for (const file of emptyFiles) {
      try {
        await this.app.vault.delete(file);
        deletedCount++;
      } catch (error) {
        console.error(`Error deleting file ${file.path}:`, error);
        errorCount++;
      }
    }
    if (errorCount > 0) {
      new import_obsidian4.Notice(`Deleted ${deletedCount} out of ${emptyFiles.length} empty journal entries. ${errorCount} errors occurred.`, 5e3);
    } else {
      new import_obsidian4.Notice(`Successfully deleted ${deletedCount} empty journal entries.`, 5e3);
    }
    if (deletedCount > 0 && this.journalView) {
      this.journalView.open();
    }
  }
};
var MigrationModal = class extends import_obsidian4.Modal {
  constructor(app, totalFiles) {
    super(app);
    this.totalFiles = totalFiles;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Migrating Journal Entries" });
    this.progressEl = contentEl.createEl("div", {
      cls: "migration-progress",
      text: "0/" + this.totalFiles
    });
    this.statusEl = contentEl.createEl("div", {
      cls: "migration-status",
      text: "Starting migration..."
    });
  }
  updateProgress(completed) {
    this.progressEl.textContent = `${completed}/${this.totalFiles}`;
  }
  updateStatus(message) {
    this.statusEl.textContent = message;
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9qb3VybmFsLXZpZXcudHMiLCAic3JjL3V0aWxzL2RhdGUtdXRpbHMudHMiLCAic3JjL3V0aWxzL2ZpbGUtdXRpbHMudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgUGx1Z2luLCBOb3RpY2UsIFRGaWxlLCBNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MsIEpvdXJuYWxpbmdTZXR0aW5ncywgSm91cm5hbGluZ1NldHRpbmdUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IEpvdXJuYWxWaWV3IH0gZnJvbSAnLi9qb3VybmFsLXZpZXcnO1xuaW1wb3J0IHsgZ2V0VG9kYXlEYXRlIH0gZnJvbSAnLi91dGlscy9kYXRlLXV0aWxzJztcbmltcG9ydCB7IGdldE9yQ3JlYXRlSm91cm5hbEZpbGUsIGdldEpvdXJuYWxGaWxlcywgZ2V0Sm91cm5hbEZpbGVQYXRoLCBlbnN1cmVBbGxGb2xkZXJzIH0gZnJvbSAnLi91dGlscy9maWxlLXV0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSm91cm5hbGluZ1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IEpvdXJuYWxpbmdTZXR0aW5ncztcbiAgICBqb3VybmFsVmlldzogSm91cm5hbFZpZXc7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIC8vIExvYWQgc2V0dGluZ3NcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaXRpYWxpemUgam91cm5hbCB2aWV3XG4gICAgICAgIHRoaXMuam91cm5hbFZpZXcgPSBuZXcgSm91cm5hbFZpZXcodGhpcyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgcmliYm9uIGljb25cbiAgICAgICAgY29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKFxuICAgICAgICAgICAgJ25vdGVib29rLXRleHQnLCBcbiAgICAgICAgICAgICdPcGVuIEpvdXJuYWxzJywgXG4gICAgICAgICAgICBhc3luYyAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vcGVuSm91cm5hbFZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgcmliYm9uSWNvbkVsLmFkZENsYXNzKCdqb3VybmFsaW5nLXJpYmJvbi1pY29uJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgY29tbWFuZCB0byBvcGVuIGpvdXJuYWwgdmlld1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdvcGVuLWpvdXJuYWwtdmlldycsXG4gICAgICAgICAgICBuYW1lOiAnT3BlbiBKb3VybmFsIFZpZXcnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5Kb3VybmFsVmlldygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgY29tbWFuZCBmb3IgY3JlYXRpbmcgdG9kYXkncyBqb3VybmFsXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ2NyZWF0ZS10b2RheXMtam91cm5hbCcsXG4gICAgICAgICAgICBuYW1lOiAnQ3JlYXRlL09wZW4gVG9kYXlcXCdzIEpvdXJuYWwnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVRvZGF5c0pvdXJuYWwoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVnaXN0ZXIgc2V0dGluZ3MgdGFiXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgSm91cm5hbGluZ1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICAvLyBBZGQgY29udGV4dCBtZW51IG9wdGlvbiBmb3IgZmlsZXMgdG8gaW5zZXJ0IGludG8gam91cm5hbHNcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdmaWxlLW1lbnUnLCAobWVudSwgZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBmaWxlIGlzIGEgVEZpbGUgKGFjdHVhbCBmaWxlKVxuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKCdJbnNlcnQgaW50byBKb3VybmFsJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbigndGV4dC1jdXJzb3ItaW5wdXQnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgYWN0aXZlIGpvdXJuYWwgdmlldyBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgam91cm5hbFZpZXcgPSB0aGlzLmpvdXJuYWxWaWV3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoam91cm5hbFZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgZmlsZSByZWZlcmVuY2UgaW50byB0aGUgYWN0aXZlIGVkaXRvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam91cm5hbFZpZXcuaW5zZXJ0RmlsZVJlZmVyZW5jZShmaWxlLnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnT3BlbiB0aGUgam91cm5hbCB2aWV3IGZpcnN0IHRvIGluc2VydCBmaWxlIHJlZmVyZW5jZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gT3BlbnMgdGhlIGNvbnRpbnVvdXMgam91cm5hbCB2aWV3XG4gICAgYXN5bmMgb3BlbkpvdXJuYWxWaWV3KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICAvLyBGaXJzdCwgZW5zdXJlIHRvZGF5J3Mgam91cm5hbCBleGlzdHNcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVUb2RheXNKb3VybmFsKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBUaGVuIG9wZW4gdGhlIGNvbnRpbnVvdXMgdmlld1xuICAgICAgICBhd2FpdCB0aGlzLmpvdXJuYWxWaWV3Lm9wZW4oKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlcyBvciBvcGVucyB0b2RheSdzIGpvdXJuYWwgZW50cnlcbiAgICBhc3luYyBjcmVhdGVUb2RheXNKb3VybmFsKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VG9kYXlEYXRlKCk7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID0gYCR7ZGF0ZX0ubWRgO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZmlsZSA9IGF3YWl0IGdldE9yQ3JlYXRlSm91cm5hbEZpbGUoXG4gICAgICAgICAgICB0aGlzLmFwcCwgXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmpvdXJuYWxGb2xkZXIsIFxuICAgICAgICAgICAgZmlsZU5hbWUsXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmZvbGRlckZvcm1hdCAvLyBQYXNzIHRoZSBmb2xkZXIgZm9ybWF0IHNldHRpbmdcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghZmlsZSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGNyZWF0ZSBvciBvcGVuIHRvZGF5XFwncyBqb3VybmFsJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICB9XG5cbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWlncmF0ZXMgZXhpc3Rpbmcgam91cm5hbCBlbnRyaWVzIHRvIHRoZSBuZXcgZm9sZGVyIHN0cnVjdHVyZVxuICAgICAqL1xuICAgIGFzeW5jIG1pZ3JhdGVKb3VybmFsRW50cmllcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgam91cm5hbEZpbGVzID0gZ2V0Sm91cm5hbEZpbGVzKFxuICAgICAgICAgICAgdGhpcy5hcHAsIFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5qb3VybmFsRm9sZGVyLFxuICAgICAgICAgICAgJycgLy8gVXNlIGVtcHR5IGZvbGRlciBmb3JtYXQgdG8gZ2V0IGFsbCBmaWxlcyByZWdhcmRsZXNzIG9mIHN0cnVjdHVyZVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGpvdXJuYWxGaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGpvdXJuYWwgZW50cmllcyBmb3VuZCB0byBtaWdyYXRlLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBubyBmb2xkZXIgZm9ybWF0IGlzIHNldCwgbm90aGluZyB0byBtaWdyYXRlXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5mb2xkZXJGb3JtYXQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBzZXQgYSBmb2xkZXIgZm9ybWF0IGluIHNldHRpbmdzIGJlZm9yZSBtaWdyYXRpbmcuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENvbmZpcm1hdGlvbiBkaWFsb2dcbiAgICAgICAgY29uc3QgY29uZmlybU1lc3NhZ2UgPSBgTWlncmF0ZSAke2pvdXJuYWxGaWxlcy5sZW5ndGh9IGpvdXJuYWwgZW50cmllcyB0byBuZXcgZm9sZGVyIHN0cnVjdHVyZT8gVGhpcyB3aWxsOlxuICAgIDEuIE1vdmUgZmlsZXMgdG8gZm9sZGVycyBiYXNlZCBvbiB0aGUgcGF0dGVybjogJHt0aGlzLnNldHRpbmdzLmZvbGRlckZvcm1hdH1cbiAgICAyLiBDcmVhdGUgYW55IG5lY2Vzc2FyeSBmb2xkZXJzXG4gICAgMy4gS2VlcCB0aGUgb3JpZ2luYWwgZmlsZW5hbWVcbiAgICBcbiAgICBUaGlzIG9wZXJhdGlvbiBjYW5ub3QgYmUgdW5kb25lIGF1dG9tYXRpY2FsbHkuYDtcbiAgICAgICAgXG4gICAgICAgIGlmICghY29uZmlybShjb25maXJtTWVzc2FnZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGFuZCBvcGVuIG1vZGFsXG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1pZ3JhdGlvbk1vZGFsKHRoaXMuYXBwLCBqb3VybmFsRmlsZXMubGVuZ3RoKTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICBcbiAgICAgICAgLy8gVHJhY2sgcHJvZ3Jlc3NcbiAgICAgICAgbGV0IG1pZ3JhdGVkQ291bnQgPSAwO1xuICAgICAgICBsZXQgZXJyb3JDb3VudCA9IDA7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2Ygam91cm5hbEZpbGVzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzdGF0dXNcbiAgICAgICAgICAgICAgICBtb2RhbC51cGRhdGVTdGF0dXMoYE1pZ3JhdGluZyAke2ZpbGUubmFtZX0uLi5gKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSB0aGUgbmV3IHBhdGggYmFzZWQgb24gdGhlIGN1cnJlbnQgZm9sZGVyIGZvcm1hdFxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhdGggPSBnZXRKb3VybmFsRmlsZVBhdGgoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muam91cm5hbEZvbGRlcixcbiAgICAgICAgICAgICAgICAgICAgZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmZvbGRlckZvcm1hdFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gU2tpcCBpZiBmaWxlIGlzIGFscmVhZHkgaW4gdGhlIGNvcnJlY3QgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBpZiAoZmlsZS5wYXRoID09PSBuZXdQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pZ3JhdGVkQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwudXBkYXRlUHJvZ3Jlc3MobWlncmF0ZWRDb3VudCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBSZWFkIGZpbGUgY29udGVudFxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBhbGwgZm9sZGVycyBpbiB0aGUgcGF0aCBleGlzdFxuICAgICAgICAgICAgICAgIGF3YWl0IGVuc3VyZUFsbEZvbGRlcnModGhpcy5hcHAsIG5ld1BhdGgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgZmlsZSBhdCB0aGUgbmV3IGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKG5ld1BhdGgsIGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgb3JpZ2luYWwgZmlsZVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmRlbGV0ZShmaWxlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBtaWdyYXRlZENvdW50Kys7XG4gICAgICAgICAgICAgICAgbW9kYWwudXBkYXRlUHJvZ3Jlc3MobWlncmF0ZWRDb3VudCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIG1pZ3JhdGluZyBmaWxlICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgbW9kYWwudXBkYXRlU3RhdHVzKGBFcnJvciBtaWdyYXRpbmcgJHtmaWxlLm5hbWV9OiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgIGVycm9yQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGZpbmFsIHN0YXR1c1xuICAgICAgICBtb2RhbC51cGRhdGVTdGF0dXMoYE1pZ3JhdGlvbiBjb21wbGV0ZSEgTWlncmF0ZWQgJHttaWdyYXRlZENvdW50fSBmaWxlcyB3aXRoICR7ZXJyb3JDb3VudH0gZXJyb3JzLmApO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xvc2UgbW9kYWwgYWZ0ZXIgYSBkZWxheVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBNaWdyYXRpb24gY29tcGxldGUhIE1pZ3JhdGVkICR7bWlncmF0ZWRDb3VudH0gZmlsZXMgd2l0aCAke2Vycm9yQ291bnR9IGVycm9ycy5gKTtcbiAgICAgICAgfSwgMzAwMCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlRW1wdHlKb3VybmFsRW50cmllcygpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gR2V0IGFsbCBqb3VybmFsIGZpbGVzXG4gICAgICAgIGNvbnN0IGpvdXJuYWxGaWxlcyA9IGdldEpvdXJuYWxGaWxlcyhcbiAgICAgICAgICAgIHRoaXMuYXBwLCBcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muam91cm5hbEZvbGRlcixcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZm9sZGVyRm9ybWF0XG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoam91cm5hbEZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gam91cm5hbCBlbnRyaWVzIGZvdW5kIHRvIGNoZWNrLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBGaXJzdCBjb25maXJtYXRpb24gZGlhbG9nXG4gICAgICAgIGNvbnN0IGNvbmZpcm1NZXNzYWdlID0gYERvIHlvdSB3YW50IHRvIHByb2NlZWQgd2l0aCBzY2FubmluZyAke2pvdXJuYWxGaWxlcy5sZW5ndGh9IGpvdXJuYWwgZW50cmllcz9gO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFjb25maXJtKGNvbmZpcm1NZXNzYWdlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTaG93IGEgc2Nhbm5pbmcgbm90aWZpY2F0aW9uXG4gICAgICAgIG5ldyBOb3RpY2UoJ1NjYW5uaW5nIGZvciBlbXB0eSBqb3VybmFsIGVudHJpZXMuLi4nKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyYWNrIHByb2dyZXNzXG4gICAgICAgIGxldCBlbXB0eUZpbGVzOiBURmlsZVtdID0gW107XG4gICAgICAgIGxldCBlcnJvckNvdW50ID0gMDtcbiAgICAgICAgXG4gICAgICAgIC8vIERlZmluZSB3aGF0IFwiZW1wdHlcIiBtZWFuc1xuICAgICAgICBjb25zdCBpc0ZpbGVFbXB0eSA9IChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICAgICAgICAgIHJldHVybiBjb250ZW50LnRyaW0oKS5sZW5ndGggPT09IDA7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBTY2FuIGVhY2ggZmlsZVxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2Ygam91cm5hbEZpbGVzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFJlYWQgZmlsZSBjb250ZW50XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZmlsZSBpcyBlbXB0eVxuICAgICAgICAgICAgICAgIGlmIChpc0ZpbGVFbXB0eShjb250ZW50KSkge1xuICAgICAgICAgICAgICAgICAgICBlbXB0eUZpbGVzLnB1c2goZmlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBzY2FubmluZyBmaWxlICR7ZmlsZS5wYXRofTpgLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgZXJyb3JDb3VudCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBubyBlbXB0eSBmaWxlcyB3ZXJlIGZvdW5kXG4gICAgICAgIGlmIChlbXB0eUZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gZW1wdHkgam91cm5hbCBlbnRyaWVzIGZvdW5kLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTZWNvbmQgY29uZmlybWF0aW9uIGRpYWxvZyB3aXRoIGFjdHVhbCBjb3VudFxuICAgICAgICBjb25zdCBkZWxldGVDb25maXJtTWVzc2FnZSA9IGAke2VtcHR5RmlsZXMubGVuZ3RofSBlbXB0eSBqb3VybmFsICR7ZW1wdHlGaWxlcy5sZW5ndGggPT09IDEgPyAnZW50cnkgd2FzJyA6ICdlbnRyaWVzIHdlcmUnfSBmb3VuZC5cbiAgICAgICAgXG4gICAgICAgIERvIHlvdSB3YW50IHRvIHByb2NlZWQgd2l0aCB0aGUgZGVsZXRpb24/IFRoaXMgb3BlcmF0aW9uIGNhbm5vdCBiZSB1bmRvbmUuYDtcbiAgICAgICAgXG4gICAgICAgIGlmICghY29uZmlybShkZWxldGVDb25maXJtTWVzc2FnZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2hvdyBhIGRlbGV0aW5nIG5vdGlmaWNhdGlvblxuICAgICAgICBuZXcgTm90aWNlKGBEZWxldGluZyAke2VtcHR5RmlsZXMubGVuZ3RofSBlbXB0eSBqb3VybmFsIGVudHJpZXMuLi5gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIERlbGV0ZSB0aGUgZW1wdHkgZmlsZXNcbiAgICAgICAgbGV0IGRlbGV0ZWRDb3VudCA9IDA7XG4gICAgICAgIGVycm9yQ291bnQgPSAwOyAvLyBSZXNldCBlcnJvciBjb3VudCBmb3IgZGVsZXRpb24gcGhhc2VcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBlbXB0eUZpbGVzKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIERlbGV0ZSB0aGUgZmlsZVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmRlbGV0ZShmaWxlKTtcbiAgICAgICAgICAgICAgICBkZWxldGVkQ291bnQrKztcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZGVsZXRpbmcgZmlsZSAke2ZpbGUucGF0aH06YCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIGVycm9yQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2hvdyBjb21wbGV0aW9uIG5vdGlmaWNhdGlvblxuICAgICAgICBpZiAoZXJyb3JDb3VudCA+IDApIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYERlbGV0ZWQgJHtkZWxldGVkQ291bnR9IG91dCBvZiAke2VtcHR5RmlsZXMubGVuZ3RofSBlbXB0eSBqb3VybmFsIGVudHJpZXMuICR7ZXJyb3JDb3VudH0gZXJyb3JzIG9jY3VycmVkLmAsIDUwMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgU3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgJHtkZWxldGVkQ291bnR9IGVtcHR5IGpvdXJuYWwgZW50cmllcy5gLCA1MDAwKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gUmVmcmVzaCBqb3VybmFsIHZpZXcgaWYgaXQncyBvcGVuXG4gICAgICAgIGlmIChkZWxldGVkQ291bnQgPiAwICYmIHRoaXMuam91cm5hbFZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMuam91cm5hbFZpZXcub3BlbigpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBNaWdyYXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICB0b3RhbEZpbGVzOiBudW1iZXI7XG4gICAgcHJvZ3Jlc3NFbDogSFRNTEVsZW1lbnQ7XG4gICAgc3RhdHVzRWw6IEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0b3RhbEZpbGVzOiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy50b3RhbEZpbGVzID0gdG90YWxGaWxlcztcbiAgICB9XG4gICAgXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ01pZ3JhdGluZyBKb3VybmFsIEVudHJpZXMnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHByb2dyZXNzIGRpc3BsYXlcbiAgICAgICAgdGhpcy5wcm9ncmVzc0VsID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgICAgICAgY2xzOiAnbWlncmF0aW9uLXByb2dyZXNzJyxcbiAgICAgICAgICAgIHRleHQ6ICcwLycgKyB0aGlzLnRvdGFsRmlsZXNcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgc3RhdHVzIG1lc3NhZ2VcbiAgICAgICAgdGhpcy5zdGF0dXNFbCA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnbWlncmF0aW9uLXN0YXR1cycsXG4gICAgICAgICAgICB0ZXh0OiAnU3RhcnRpbmcgbWlncmF0aW9uLi4uJ1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgdXBkYXRlUHJvZ3Jlc3MoY29tcGxldGVkOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzc0VsLnRleHRDb250ZW50ID0gYCR7Y29tcGxldGVkfS8ke3RoaXMudG90YWxGaWxlc31gO1xuICAgIH1cbiAgICBcbiAgICB1cGRhdGVTdGF0dXMobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc3RhdHVzRWwudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIH1cbiAgICBcbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG5jbGFzcyBEZWxldGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHRvdGFsRmlsZXM6IG51bWJlcjtcbiAgICBwcm9ncmVzc0VsOiBIVE1MRWxlbWVudDtcbiAgICBzdGF0dXNFbDogSFRNTEVsZW1lbnQ7XG4gICAgZGVsZXRlZENvdW50RWw6IEhUTUxFbGVtZW50O1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0b3RhbEZpbGVzOiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy50b3RhbEZpbGVzID0gdG90YWxGaWxlcztcbiAgICB9XG4gICAgXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0RlbGV0aW5nIEVtcHR5IEpvdXJuYWwgRW50cmllcycgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgcHJvZ3Jlc3MgZGlzcGxheVxuICAgICAgICB0aGlzLnByb2dyZXNzRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHsgXG4gICAgICAgICAgICBjbHM6ICdtaWdyYXRpb24tcHJvZ3Jlc3MnLCAvLyBSZXVzaW5nIHRoZSBzYW1lIENTUyBjbGFzc1xuICAgICAgICAgICAgdGV4dDogJzAvJyArIHRoaXMudG90YWxGaWxlcyArICcgc2Nhbm5lZCdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgZGVsZXRlZCBjb3VudCBkaXNwbGF5XG4gICAgICAgIHRoaXMuZGVsZXRlZENvdW50RWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGNsczogJ21pZ3JhdGlvbi1wcm9ncmVzcycsXG4gICAgICAgICAgICB0ZXh0OiAnMCBlbnRyaWVzIGRlbGV0ZWQnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHN0YXR1cyBtZXNzYWdlXG4gICAgICAgIHRoaXMuc3RhdHVzRWwgPSBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGNsczogJ21pZ3JhdGlvbi1zdGF0dXMnLFxuICAgICAgICAgICAgdGV4dDogJ1N0YXJ0aW5nIHNjYW4uLi4nXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICB1cGRhdGVQcm9ncmVzcyhjb21wbGV0ZWQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLnByb2dyZXNzRWwudGV4dENvbnRlbnQgPSBgJHtjb21wbGV0ZWR9LyR7dGhpcy50b3RhbEZpbGVzfSBzY2FubmVkYDtcbiAgICB9XG4gICAgXG4gICAgdXBkYXRlRGVsZXRlZENvdW50KGNvdW50OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5kZWxldGVkQ291bnRFbC50ZXh0Q29udGVudCA9IGAke2NvdW50fSBlbnRyaWVzIGRlbGV0ZWRgO1xuICAgIH1cbiAgICBcbiAgICB1cGRhdGVTdGF0dXMobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc3RhdHVzRWwudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIH1cbiAgICBcbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE1vZGFsIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEpvdXJuYWxpbmdQbHVnaW4gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGludGVyZmFjZSBKb3VybmFsaW5nU2V0dGluZ3Mge1xuICAgIGpvdXJuYWxGb2xkZXI6IHN0cmluZztcbiAgICBkYXRlRm9ybWF0OiBzdHJpbmc7XG4gICAgc29ydERpcmVjdGlvbjogJ25ld2VzdC1maXJzdCcgfCAnb2xkZXN0LWZpcnN0JztcbiAgICBkZWZhdWx0RXhwYW5kRW50cmllczogYm9vbGVhbjtcbiAgICBmb2xkZXJGb3JtYXQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEpvdXJuYWxpbmdTZXR0aW5ncyA9IHtcbiAgICBqb3VybmFsRm9sZGVyOiAnam91cm5hbHMnLFxuICAgIGRhdGVGb3JtYXQ6ICdZWVlZLU1NLUREJyxcbiAgICBzb3J0RGlyZWN0aW9uOiAnbmV3ZXN0LWZpcnN0JyxcbiAgICBkZWZhdWx0RXhwYW5kRW50cmllczogdHJ1ZSxcbiAgICBmb2xkZXJGb3JtYXQ6ICcnLFxufTtcblxuZXhwb3J0IGNsYXNzIEpvdXJuYWxpbmdTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBKb3VybmFsaW5nUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogSm91cm5hbGluZ1BsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQ29udGludW91cyBKb3VybmFsaW5nIFNldHRpbmdzJyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdKb3VybmFsIEZvbGRlcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnU3BlY2lmeSB0aGUgZm9sZGVyIHdoZXJlIGpvdXJuYWwgZW50cmllcyB3aWxsIGJlIHN0b3JlZCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2pvdXJuYWxzJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muam91cm5hbEZvbGRlcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzIGZvciBjb25zaXN0ZW5jeVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5qb3VybmFsRm9sZGVyID0gdmFsdWUucmVwbGFjZSgvXlxcLyt8XFwvKyQvZywgJycpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGF0ZSBGb3JtYXQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0Zvcm1hdCBmb3Igam91cm5hbCBmaWxlbmFtZXMgKFlZWVktTU0tREQgcmVjb21tZW5kZWQpJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignWVlZWS1NTS1ERCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRhdGVGb3JtYXQpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXRlRm9ybWF0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTb3J0IERpcmVjdGlvbicpXG4gICAgICAgICAgICAuc2V0RGVzYygnSG93IHRvIHNvcnQgam91cm5hbCBlbnRyaWVzIGluIHRoZSBjb250aW51b3VzIHZpZXcnKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbignbmV3ZXN0LWZpcnN0JywgJ05ld2VzdCBlbnRyaWVzIGZpcnN0JylcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdvbGRlc3QtZmlyc3QnLCAnT2xkZXN0IGVudHJpZXMgZmlyc3QnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zb3J0RGlyZWN0aW9uKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICduZXdlc3QtZmlyc3QnIHwgJ29sZGVzdC1maXJzdCcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydERpcmVjdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVmYXVsdCBFeHBhbmQgRW50cmllcycpXG4gICAgICAgICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBleHBhbmQgZW50cmllcyB3aGVuIG9wZW5pbmcgdGhlIGpvdXJuYWxzIHZpZXcnKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRFeHBhbmRFbnRyaWVzKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGVmYXVsdEV4cGFuZEVudHJpZXMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0ZvbGRlciBTdHJ1Y3R1cmUgRm9ybWF0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdGb3JtYXQgcGF0dGVybiBmb3Igb3JnYW5pemluZyBqb3VybmFsIGVudHJpZXMgaW4gc3ViZm9sZGVycy4gRXhhbXBsZXM6IGVtcHR5IGZvciBmbGF0IHN0cnVjdHVyZSwgXCJZWVlZXCIgZm9yIHllYXJseSBmb2xkZXJzLCBcIllZWVkvTU1cIiBmb3IgbW9udGhseSBmb2xkZXJzLicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1lZWVkvTU0nKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJGb3JtYXQpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJGb3JtYXQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdNaWdyYXRlIEpvdXJuYWwgRW50cmllcycpXG4gICAgICAgICAgICAuc2V0RGVzYygnTW92ZSBleGlzdGluZyBqb3VybmFsIGVudHJpZXMgdG8gdGhlIGZvbGRlciBzdHJ1Y3R1cmUgZGVmaW5lZCBieSB0aGUgZm9sZGVyIGZvcm1hdCBwYXR0ZXJuLicpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnTWlncmF0ZSBFbnRyaWVzJylcbiAgICAgICAgICAgICAgICAuc2V0Q3RhKCkgLy8gTWFrZSBpdCBhIGNhbGwtdG8tYWN0aW9uIGJ1dHRvblxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ubWlncmF0ZUpvdXJuYWxFbnRyaWVzKCk7XG4gICAgICAgIH0pKTtcblxuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAuc2V0TmFtZSgnRGVsZXRlIEVtcHR5IEpvdXJuYWwgRW50cmllcycpXG4gICAgICAgIC5zZXREZXNjKCdEZWxldGUgYWxsIEVNUFRZIGpvdXJuYWwgZW50cmllcy4gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZS4nKVxuICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdEZWxldGUgRW1wdHkgRW50cmllcycpXG4gICAgICAgICAgICAuc2V0Q3RhKCkgLy8gTWFrZSBpdCBhIGNhbGwtdG8tYWN0aW9uIGJ1dHRvblxuICAgICAgICAgICAgLnNldENsYXNzKCdqb3VybmFsLWRlbGV0ZS1idXR0b24nKVxuICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmRlbGV0ZUVtcHR5Sm91cm5hbEVudHJpZXMoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICB9XG59IiwgImltcG9ydCB7IE1hcmtkb3duUmVuZGVyZXIsIE5vdGljZSwgVEZpbGUsIFdvcmtzcGFjZUxlYWYsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBKb3VybmFsaW5nUGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBmb3JtYXREYXRlRm9yRGlzcGxheSB9IGZyb20gJy4vdXRpbHMvZGF0ZS11dGlscyc7XG5pbXBvcnQgeyBnZXRKb3VybmFsRmlsZXMsIHNvcnRKb3VybmFsRmlsZXMgfSBmcm9tICcuL3V0aWxzL2ZpbGUtdXRpbHMnO1xuXG4vLyBEZWZpbmUgYW4gaW50ZXJmYWNlIHRvIGV4dGVuZCB0aGUgT2JzaWRpYW4gQXBwIHR5cGUgd2l0aCB0aGUgbWlzc2luZyBwcm9wZXJ0aWVzXG5pbnRlcmZhY2UgRXh0ZW5kZWRBcHAgZXh0ZW5kcyBBcHAge1xuICAgIGludGVybmFsUGx1Z2luczoge1xuICAgICAgICBnZXRQbHVnaW5CeUlkKGlkOiBzdHJpbmcpOiB7XG4gICAgICAgICAgICBpbnN0YW5jZToge1xuICAgICAgICAgICAgICAgIG9wZW5HbG9iYWxTZWFyY2gocXVlcnk6IHN0cmluZyk6IHZvaWQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IHwgdW5kZWZpbmVkO1xuICAgIH07XG4gICAgY29tbWFuZHM6IHtcbiAgICAgICAgZXhlY3V0ZUNvbW1hbmRCeUlkKGlkOiBzdHJpbmcpOiBib29sZWFuO1xuICAgIH07XG59XG5cbmV4cG9ydCBjbGFzcyBKb3VybmFsVmlldyB7XG4gICAgcGx1Z2luOiBKb3VybmFsaW5nUGx1Z2luO1xuICAgIGFjdGl2ZUVkaXRvcjogSFRNTFRleHRBcmVhRWxlbWVudCB8IG51bGwgPSBudWxsO1xuICAgIFxuICAgIC8vIFNpbXBsZSBsYXp5IGxvYWRpbmcgcHJvcGVydGllc1xuICAgIHByaXZhdGUgYWxsRmlsZXM6IFRGaWxlW10gPSBbXTtcbiAgICBwcml2YXRlIGJhdGNoU2l6ZTogbnVtYmVyID0gMTA7XG4gICAgcHJpdmF0ZSBjdXJyZW50QmF0Y2g6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBsb2FkTW9yZUJ1dHRvbjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihwbHVnaW46IEpvdXJuYWxpbmdQbHVnaW4pIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMucmVnaXN0ZXJDbGVhbnVwKCk7XG4gICAgfVxuICAgIFxuICAgIC8vIE9wZW5zIHRoZSBjb250aW51b3VzIGpvdXJuYWwgdmlldyBpbiBhIG5ldyBsZWFmXG4gICAgYXN5bmMgb3BlbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGxlYWYgKG9wZW5zIGEgbmV3IHRhYilcbiAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCB0aGUgdmlldyBzdGF0ZSB0byBNYXJrZG93biB0byBhY2Nlc3MgY29udGFpbmVyRWxcbiAgICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgdHlwZTogXCJtYXJrZG93blwiLFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbWFpbiBjb250YWluZXJcbiAgICAgICAgY29uc3QgY29udGVudEVsID0gbGVhZi52aWV3LmNvbnRhaW5lckVsO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBhIHNjcm9sbGFibGUgcGFuZWwgZm9yIGpvdXJuYWwgZW50cmllc1xuICAgICAgICBjb25zdCBwYW5lbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdjdXN0b20tam91cm5hbC1wYW5lbCcgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgYWxsIGpvdXJuYWwgZmlsZXMsIHBhc3NpbmcgdGhlIGZvbGRlciBmb3JtYXRcbiAgICAgICAgY29uc3Qgam91cm5hbEZpbGVzID0gZ2V0Sm91cm5hbEZpbGVzKFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLCBcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmpvdXJuYWxGb2xkZXIsXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkZXJGb3JtYXRcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChqb3VybmFsRmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBqb3VybmFsIGVudHJpZXMgZm91bmQuJyk7XG4gICAgICAgICAgICBwYW5lbC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgICAgICAgICAgICBjbHM6ICdqb3VybmFsLWVtcHR5LXN0YXRlJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiAnTm8gam91cm5hbCBlbnRyaWVzIGZvdW5kLiBDcmVhdGUgb25lIGJ5IGNsaWNraW5nIHRoZSBqb3VybmFscyBpY29uIGluIHRoZSByaWJib24uJyBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBTb3J0IHRoZSBmaWxlcyBhY2NvcmRpbmcgdG8gdXNlciBwcmVmZXJlbmNlXG4gICAgICAgIHRoaXMuYWxsRmlsZXMgPSBzb3J0Sm91cm5hbEZpbGVzKGpvdXJuYWxGaWxlcywgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc29ydERpcmVjdGlvbik7XG4gICAgICAgIFxuICAgICAgICAvLyBSZXNldCBiYXRjaCBjb3VudGVyXG4gICAgICAgIHRoaXMuY3VycmVudEJhdGNoID0gMDtcbiAgICAgICAgXG4gICAgICAgIC8vIExvYWQgdGhlIGZpcnN0IGJhdGNoIG9mIGVudHJpZXNcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQmF0Y2gocGFuZWwpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIFwiTG9hZCBNb3JlXCIgYnV0dG9uIGlmIHRoZXJlIGFyZSBtb3JlIGVudHJpZXNcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhdGNoICogdGhpcy5iYXRjaFNpemUgPCB0aGlzLmFsbEZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5hZGRMb2FkTW9yZUJ1dHRvbihwYW5lbCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gTG9hZCBhIGJhdGNoIG9mIGVudHJpZXNcbiAgICBwcml2YXRlIGFzeW5jIGxvYWRCYXRjaChwYW5lbDogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLmN1cnJlbnRCYXRjaCAqIHRoaXMuYmF0Y2hTaXplO1xuICAgICAgICBjb25zdCBlbmQgPSBNYXRoLm1pbihzdGFydCArIHRoaXMuYmF0Y2hTaXplLCB0aGlzLmFsbEZpbGVzLmxlbmd0aCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgQUxMIFwiTG9hZCBNb3JlXCIgYnV0dG9ucyB0byBlbnN1cmUgdGhlcmUgYXJlbid0IGR1cGxpY2F0ZXNcbiAgICAgICAgcGFuZWwucXVlcnlTZWxlY3RvckFsbCgnLmpvdXJuYWwtbG9hZC1tb3JlLWJ1dHRvbicpLmZvckVhY2goYnRuID0+IGJ0bi5yZW1vdmUoKSk7XG4gICAgICAgIHRoaXMubG9hZE1vcmVCdXR0b24gPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgLy8gR2V0IHRoZSBmaWxlcyBmb3IgdGhpcyBiYXRjaFxuICAgICAgICBjb25zdCBmaWxlc1RvTG9hZCA9IHRoaXMuYWxsRmlsZXMuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBMb2FkIGVhY2ggZmlsZSBhbmQgYWRkIGl0IHRvIHRoZSBwYW5lbFxuICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXNUb0xvYWQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEpvdXJuYWxFbnRyeShwYW5lbCwgZmlsZSwgZmlsZUNvbnRlbnQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciByZWFkaW5nIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEVycm9yTWVzc2FnZShwYW5lbCwgZmlsZS5iYXNlbmFtZSwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJbmNyZW1lbnQgdGhlIGJhdGNoIGNvdW50ZXJcbiAgICAgICAgdGhpcy5jdXJyZW50QmF0Y2grKztcbiAgICAgICAgXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSd2ZSByZW1vdmVkIGFsbCBsb2FkIG1vcmUgYnV0dG9ucyBhZ2FpbiAoanVzdCB0byBiZSBzYWZlKVxuICAgICAgICBwYW5lbC5xdWVyeVNlbGVjdG9yQWxsKCcuam91cm5hbC1sb2FkLW1vcmUtYnV0dG9uJykuZm9yRWFjaChidG4gPT4gYnRuLnJlbW92ZSgpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0aGUgXCJMb2FkIE1vcmVcIiBidXR0b24gYXQgdGhlIGVuZCBpZiB0aGVyZSBhcmUgbW9yZSBlbnRyaWVzIHRvIGxvYWRcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEJhdGNoICogdGhpcy5iYXRjaFNpemUgPCB0aGlzLmFsbEZpbGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5hZGRMb2FkTW9yZUJ1dHRvbihwYW5lbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgYSBcIkxvYWQgTW9yZVwiIGJ1dHRvblxuICAgIHByaXZhdGUgYWRkTG9hZE1vcmVCdXR0b24ocGFuZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBhbnkgZXhpc3RpbmcgYnV0dG9uIGlzIHJlbW92ZWQgZmlyc3RcbiAgICAgICAgcGFuZWwucXVlcnlTZWxlY3RvckFsbCgnLmpvdXJuYWwtbG9hZC1tb3JlLWJ1dHRvbicpLmZvckVhY2goYnRuID0+IGJ0bi5yZW1vdmUoKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIGJ1dHRvblxuICAgICAgICB0aGlzLmxvYWRNb3JlQnV0dG9uID0gcGFuZWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIGNsczogJ2pvdXJuYWwtbG9hZC1tb3JlLWJ1dHRvbicsXG4gICAgICAgICAgICB0ZXh0OiAnTG9hZCBNb3JlIEVudHJpZXMnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBidXR0b24gaXMgYXQgdGhlIGVuZCBvZiB0aGUgcGFuZWxcbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQodGhpcy5sb2FkTW9yZUJ1dHRvbik7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgY2xpY2sgZXZlbnRcbiAgICAgICAgdGhpcy5sb2FkTW9yZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIFNob3cgbG9hZGluZyBzdGF0ZVxuICAgICAgICAgICAgaWYgKHRoaXMubG9hZE1vcmVCdXR0b24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRNb3JlQnV0dG9uLnRleHRDb250ZW50ID0gJ0xvYWRpbmcuLi4nO1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZE1vcmVCdXR0b24uc2V0QXR0cignZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBMb2FkIHRoZSBuZXh0IGJhdGNoXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRCYXRjaChwYW5lbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZGRzIGFuIGVycm9yIG1lc3NhZ2UgdG8gdGhlIHBhbmVsIHdoZW4gZmlsZSByZWFkaW5nIGZhaWxzXG4gICAgcHJpdmF0ZSBhZGRFcnJvck1lc3NhZ2UocGFuZWw6IEhUTUxFbGVtZW50LCBmaWxlbmFtZTogc3RyaW5nLCBlcnJvcjogYW55KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGVycm9yRGl2ID0gcGFuZWwuY3JlYXRlRGl2KHsgY2xzOiAnam91cm5hbC1lbnRyeSBqb3VybmFsLWVycm9yJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGVycm9ySGVhZGVyID0gZXJyb3JEaXYuY3JlYXRlRGl2KHsgY2xzOiAnam91cm5hbC1lbnRyeS1oZWFkZXInIH0pO1xuICAgICAgICBlcnJvckhlYWRlci5jcmVhdGVFbCgnaDMnLCB7IFxuICAgICAgICAgICAgY2xzOiAnam91cm5hbC1lbnRyeS10aXRsZScsXG4gICAgICAgICAgICB0ZXh0OiBgJHtmaWxlbmFtZX0gLSBFcnJvcmAgXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZXJyb3JDb250ZW50ID0gZXJyb3JEaXYuY3JlYXRlRGl2KHsgY2xzOiAnam91cm5hbC1lcnJvci1jb250ZW50JyB9KTtcbiAgICAgICAgZXJyb3JDb250ZW50LnRleHRDb250ZW50ID0gYEZhaWxlZCB0byBsb2FkIGpvdXJuYWw6ICR7ZXJyb3IubWVzc2FnZSB8fCBlcnJvcn1gO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZGRzIGEgam91cm5hbCBlbnRyeSB0byB0aGUgcGFuZWxcbiAgICBwcml2YXRlIGFkZEpvdXJuYWxFbnRyeShwYW5lbDogSFRNTEVsZW1lbnQsIGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgam91cm5hbERhdGUgPSBmaWxlLmJhc2VuYW1lO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBtYWluIGNvbnRhaW5lciBmb3IgdGhpcyBlbnRyeVxuICAgICAgICBjb25zdCBqb3VybmFsRW50cnkgPSBwYW5lbC5jcmVhdGVEaXYoeyBjbHM6ICdqb3VybmFsLWVudHJ5JyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgaGVhZGVyIHNlY3Rpb25cbiAgICAgICAgY29uc3QgaGVhZGVyID0gam91cm5hbEVudHJ5LmNyZWF0ZURpdih7IGNsczogJ2pvdXJuYWwtZW50cnktaGVhZGVyJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0b2dnbGUgYnV0dG9uIGZvciBjb2xsYXBzaW5nL2V4cGFuZGluZ1xuICAgICAgICBjb25zdCB0b2dnbGVCdXR0b24gPSBoZWFkZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgY2xzOiAnY29sbGFwc2libGUtdG9nZ2xlJyB9KTtcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRFeHBhbmRFbnRyaWVzKSB7XG4gICAgICAgICAgICB0b2dnbGVCdXR0b24uYWRkQ2xhc3MoJ3RvZ2dsZS1leHBhbmRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgdGl0bGUgd2l0aCBsaW5rIHRvIHRoZSBvcmlnaW5hbCBmaWxlXG4gICAgICAgIGNvbnN0IHRpdGxlID0gaGVhZGVyLmNyZWF0ZUVsKCdoMycsIHsgY2xzOiAnam91cm5hbC1lbnRyeS10aXRsZScgfSk7XG4gICAgICAgIGNvbnN0IHRpdGxlTGluayA9IHRpdGxlLmNyZWF0ZUVsKCdhJywgeyBcbiAgICAgICAgICAgIGNsczogJ2pvdXJuYWwtZW50cnktbGluaycsXG4gICAgICAgICAgICB0ZXh0OiBmb3JtYXREYXRlRm9yRGlzcGxheShqb3VybmFsRGF0ZSlcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgY2xpY2sgb24gdGhlIHRpdGxlIHRvIG9wZW4gdGhlIGZpbGVcbiAgICAgICAgdGl0bGVMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vcGVuTGlua1RleHQoZmlsZS5iYXNlbmFtZSwgZmlsZS5wYXRoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIGNvbnRlbnQgYXJlYVxuICAgICAgICBjb25zdCBjb250ZW50QXJlYSA9IGpvdXJuYWxFbnRyeS5jcmVhdGVEaXYoeyBcbiAgICAgICAgICAgIGNsczogJ2NvbGxhcHNpYmxlLWNvbnRlbnQnICsgKHRoaXMucGx1Z2luLnNldHRpbmdzLmRlZmF1bHRFeHBhbmRFbnRyaWVzID8gJyBjb250ZW50LWV4cGFuZGVkJyA6ICcnKVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyYWNrIHRoZSBjdXJyZW50IGNvbnRlbnRcbiAgICAgICAgbGV0IGN1cnJlbnRDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgXG4gICAgICAgIC8vIEZsYWcgdG8gdHJhY2sgaWYgdGhlIGVudHJ5IGlzIGluIGVkaXQgbW9kZVxuICAgICAgICBsZXQgaXNFZGl0aW5nID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdGhlIHJlbmRlcmVkIGNvbnRlbnQgdmlld1xuICAgICAgICBjb25zdCByZW5kZXJlZENvbnRlbnQgPSBjb250ZW50QXJlYS5jcmVhdGVEaXYoeyBcbiAgICAgICAgICAgIGNsczogJ3JlbmRlcmVkLWNvbnRlbnQgYWN0aXZlLXZpZXcnIFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgZWRpdGFibGUgdGV4dGFyZWFcbiAgICAgICAgY29uc3QgZWRpdGFibGVDb250ZW50ID0gY29udGVudEFyZWEuY3JlYXRlRWwoJ3RleHRhcmVhJywgeyBcbiAgICAgICAgICAgIGNsczogJ2VkaXRhYmxlLWNvbnRlbnQnLFxuICAgICAgICAgICAgdmFsdWU6IGN1cnJlbnRDb250ZW50XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGNsb3NlIGJ1dHRvbiAobmV3IHJlcXVpcmVtZW50KVxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGNvbnRlbnRBcmVhLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICBjbHM6ICdqb3VybmFsLWNsb3NlLWJ1dHRvbicsXG4gICAgICAgICAgICB0ZXh0OiAnQ2xvc2UnXG4gICAgICAgIH0pO1xuICAgICAgICBjbG9zZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBIaWRlIGluaXRpYWxseVxuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHNhdmUgaW5kaWNhdG9yXG4gICAgICAgIGNvbnN0IHNhdmVJbmRpY2F0b3IgPSBjb250ZW50QXJlYS5jcmVhdGVEaXYoeyBcbiAgICAgICAgICAgIGNsczogJ2pvdXJuYWwtc2F2ZS1pbmRpY2F0b3InLFxuICAgICAgICAgICAgdGV4dDogJ1NhdmVkJ1xuICAgICAgICB9KTtcbiAgICAgICAgc2F2ZUluZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBIaWRlIGluaXRpYWxseVxuICAgICAgICBcbiAgICAgICAgLy8gQWRqdXN0IHRleHRhcmVhIGhlaWdodCB0byBjb250ZW50XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgZWRpdGFibGVDb250ZW50LnN0eWxlLmhlaWdodCA9IGVkaXRhYmxlQ29udGVudC5zY3JvbGxIZWlnaHQgKyAncHgnO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZ1bmN0aW9uIHRvIHJlbmRlciB0aGUgbWFya2Rvd24gY29udGVudFxuICAgICAgICBjb25zdCByZW5kZXJDb250ZW50ID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVuZGVyZWRDb250ZW50LmVtcHR5KCk7XG4gICAgICAgICAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlcih0aGlzLnBsdWdpbi5hcHAsIGN1cnJlbnRDb250ZW50LCByZW5kZXJlZENvbnRlbnQsIGZpbGUucGF0aCwgdGhpcy5wbHVnaW4pO1xuXG4gICAgICAgICAgICAvLyBNYWtlIGhhc2h0YWdzIGNsaWNrYWJsZVxuICAgICAgICAgICAgdGhpcy5tYWtlSGFzaHRhZ3NDbGlja2FibGUocmVuZGVyZWRDb250ZW50KTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaXRpYWwgcmVuZGVyXG4gICAgICAgIHJlbmRlckNvbnRlbnQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEZ1bmN0aW9uIHRvIGVudGVyIGVkaXQgbW9kZVxuICAgICAgICBjb25zdCBlbnRlckVkaXRNb2RlID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2V0IGVkaXRpbmcgZmxhZ1xuICAgICAgICAgICAgaXNFZGl0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlRWRpdG9yID0gZWRpdGFibGVDb250ZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGV4dGFyZWEgaGFzIGN1cnJlbnQgY29udGVudFxuICAgICAgICAgICAgZWRpdGFibGVDb250ZW50LnZhbHVlID0gY3VycmVudENvbnRlbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEhpZGUgcmVuZGVyZWQgdmlldywgc2hvdyBlZGl0YWJsZSB2aWV3IGFuZCBjbG9zZSBidXR0b25cbiAgICAgICAgICAgIHJlbmRlcmVkQ29udGVudC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUtdmlldycpO1xuICAgICAgICAgICAgZWRpdGFibGVDb250ZW50LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS12aWV3Jyk7XG4gICAgICAgICAgICBjbG9zZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWRqdXN0IHRleHRhcmVhIGhlaWdodFxuICAgICAgICAgICAgZWRpdGFibGVDb250ZW50LnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQgPSBlZGl0YWJsZUNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5mb2N1cygpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gZXhpdCBlZGl0IG1vZGVcbiAgICAgICAgY29uc3QgZXhpdEVkaXRNb2RlID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gRW5zdXJlIGNvbnRlbnQgaXMgc2F2ZWQgYmVmb3JlIGV4aXRpbmdcbiAgICAgICAgICAgIGlmIChpc0VkaXRpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBHZXQgY3VycmVudCBjb250ZW50IGZyb20gdGV4dGFyZWFcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29udGVudCA9IGVkaXRhYmxlQ29udGVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTYXZlIGNoYW5nZXNcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVDb250ZW50VG9GaWxlKGZpbGUsIGN1cnJlbnRDb250ZW50KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBSZS1yZW5kZXIgY29udGVudFxuICAgICAgICAgICAgICAgIHJlbmRlckNvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBIaWRlIGVkaXRhYmxlIHZpZXcgYW5kIGNsb3NlIGJ1dHRvbiwgc2hvdyByZW5kZXJlZCB2aWV3XG4gICAgICAgICAgICAgICAgZWRpdGFibGVDb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZS12aWV3Jyk7XG4gICAgICAgICAgICAgICAgY2xvc2VCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICByZW5kZXJlZENvbnRlbnQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlLXZpZXcnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDbGVhciBlZGl0aW5nIGZsYWcgYW5kIGFjdGl2ZSBlZGl0b3IgcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgaXNFZGl0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlRWRpdG9yID09PSBlZGl0YWJsZUNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3IgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBDbGljayBvbiByZW5kZXJlZCBjb250ZW50IHRvIGVkaXRcbiAgICAgICAgcmVuZGVyZWRDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERvbid0IGVudGVyIGVkaXQgbW9kZSBpZiBjbGlja2luZyBvbiBsaW5rcyBvciBoYXNodGFnc1xuICAgICAgICAgICAgaWYgKHRhcmdldC50YWdOYW1lID09PSAnQScgfHwgdGFyZ2V0LmNsb3Nlc3QoJ2EnKSB8fCBcbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbS1oYXNodGFnJykgfHwgdGFyZ2V0LmNsb3Nlc3QoJy5jbS1oYXNodGFnJykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGVudGVyRWRpdE1vZGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbG9zZSBidXR0b24gdG8gZXhpdCBlZGl0IG1vZGVcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBleGl0RWRpdE1vZGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBNYW51YWwgc2F2ZS9leGl0IHdoZW4gcHJlc3NpbmcgRXNjYXBlXG4gICAgICAgIGVkaXRhYmxlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgICAgIGV4aXRFZGl0TW9kZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEF1dG8tYWRqdXN0IHRleHRhcmVhIGhlaWdodCB3aGlsZSB0eXBpbmdcbiAgICAgICAgZWRpdGFibGVDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgZWRpdGFibGVDb250ZW50LnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgICAgICAgIGVkaXRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQgPSBlZGl0YWJsZUNvbnRlbnQuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIGN1cnJlbnQgY29udGVudCB3aGlsZSB0eXBpbmdcbiAgICAgICAgICAgIGN1cnJlbnRDb250ZW50ID0gZWRpdGFibGVDb250ZW50LnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBdXRvLXNhdmUgY29udGVudCB3aGlsZSB0eXBpbmdcbiAgICAgICAgbGV0IHNhdmVUaW1lb3V0OiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICAgICAgICBlZGl0YWJsZUNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBTaG93ICdTYXZpbmcuLi4nIGluZGljYXRvclxuICAgICAgICAgICAgc2F2ZUluZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHNhdmVJbmRpY2F0b3IuY2xhc3NMaXN0LnJlbW92ZSgnc2F2ZWQnKTtcbiAgICAgICAgICAgIHNhdmVJbmRpY2F0b3IuY2xhc3NMaXN0LmFkZCgnc2F2aW5nJyk7XG4gICAgICAgICAgICBzYXZlSW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ1NhdmluZy4uLic7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENsZWFyIHByZXZpb3VzIHRpbWVvdXRcbiAgICAgICAgICAgIGlmIChzYXZlVGltZW91dCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChzYXZlVGltZW91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNldCBhIG5ldyB0aW1lb3V0IHRvIHNhdmUgYWZ0ZXIgNTAwbXMgb2YgaW5hY3Rpdml0eVxuICAgICAgICAgICAgc2F2ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVDb250ZW50VG9GaWxlKGZpbGUsIGN1cnJlbnRDb250ZW50KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgaW5kaWNhdG9yIHRvICdTYXZlZCdcbiAgICAgICAgICAgICAgICBzYXZlSW5kaWNhdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ3NhdmluZycpO1xuICAgICAgICAgICAgICAgIHNhdmVJbmRpY2F0b3IuY2xhc3NMaXN0LmFkZCgnc2F2ZWQnKTtcbiAgICAgICAgICAgICAgICBzYXZlSW5kaWNhdG9yLnRleHRDb250ZW50ID0gJ1NhdmVkJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBIaWRlIHRoZSBpbmRpY2F0b3IgYWZ0ZXIgYSBkZWxheVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2F2ZUluZGljYXRvci5jbGFzc0xpc3QuY29udGFpbnMoJ3NhdmVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBUb2dnbGUgZXhwYW5kL2NvbGxhcHNlIG9uIGJ1dHRvbiBjbGlja1xuICAgICAgICB0b2dnbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0b2dnbGVCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgndG9nZ2xlLWV4cGFuZGVkJyk7XG4gICAgICAgICAgICBjb250ZW50QXJlYS5jbGFzc0xpc3QudG9nZ2xlKCdjb250ZW50LWV4cGFuZGVkJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBTYXZlcyB0aGUgY29udGVudCB0byB0aGUgZmlsZVxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgc2F2ZUNvbnRlbnRUb0ZpbGUoZmlsZTogVEZpbGUsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBzYXZlIGNoYW5nZXM6ICR7ZXJyb3J9YCk7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc2F2ZSBjaGFuZ2VzOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluc2VydHMgYSByZWZlcmVuY2UgdG8gYSBmaWxlIGludG8gdGhlIGFjdGl2ZSBqb3VybmFsIGVudHJ5XG4gICAgICovXG4gICAgaW5zZXJ0RmlsZVJlZmVyZW5jZShmaWxlUGF0aDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIC8vIEZpbmQgdGhlIGFjdGl2ZSBlZGl0b3JcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZUVkaXRvcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIGpvdXJuYWwgZW50cnkgdG8gaW5zZXJ0IGZpbGUgaW50bycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIEdldCB0aGUgZmlsZVxuICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCk7XG4gICAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0ludmFsaWQgZmlsZScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIENyZWF0ZSB0aGUgYXBwcm9wcmlhdGUgZmlsZSByZWZlcmVuY2VcbiAgICAgICAgbGV0IGZpbGVSZWZlcmVuY2U6IHN0cmluZztcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgZmlsZSB0eXBlc1xuICAgICAgICBpZiAodGhpcy5pc0ltYWdlRmlsZShmaWxlKSkge1xuICAgICAgICAgICAgZmlsZVJlZmVyZW5jZSA9IGAhW1ske2ZpbGUubmFtZX1dXWA7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc01hcmtkb3duRmlsZShmaWxlKSkge1xuICAgICAgICAgICAgZmlsZVJlZmVyZW5jZSA9IGAhW1ske2ZpbGUubmFtZX1dXWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaWxlUmVmZXJlbmNlID0gYCFbWyR7ZmlsZS5uYW1lfV1dYDtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICAvLyBGb2N1cyB0aGUgYWN0aXZlIGVkaXRvclxuICAgICAgICB0aGlzLmFjdGl2ZUVkaXRvci5mb2N1cygpO1xuICAgIFxuICAgICAgICAvLyBHZXQgY3Vyc29yIHBvc2l0aW9uXG4gICAgICAgIGNvbnN0IGN1cnNvclBvcyA9IHRoaXMuYWN0aXZlRWRpdG9yLnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICBjb25zdCB0ZXh0QmVmb3JlID0gdGhpcy5hY3RpdmVFZGl0b3IudmFsdWUuc3Vic3RyaW5nKDAsIGN1cnNvclBvcyk7XG4gICAgICAgIGNvbnN0IHRleHRBZnRlciA9IHRoaXMuYWN0aXZlRWRpdG9yLnZhbHVlLnN1YnN0cmluZyh0aGlzLmFjdGl2ZUVkaXRvci5zZWxlY3Rpb25FbmQpO1xuICAgIFxuICAgICAgICAvLyBJbnNlcnQgdGV4dCB3aXRob3V0IG5ld2xpbmVzXG4gICAgICAgIGNvbnN0IG5ld1RleHQgPSB0ZXh0QmVmb3JlICsgZmlsZVJlZmVyZW5jZSArIHRleHRBZnRlcjtcbiAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3IudmFsdWUgPSBuZXdUZXh0O1xuICAgIFxuICAgICAgICAvLyBTZXQgY3Vyc29yIHBvc2l0aW9uIGFmdGVyIHRoZSBpbnNlcnRlZCB0ZXh0XG4gICAgICAgIGNvbnN0IG5ld0N1cnNvclBvcyA9IGN1cnNvclBvcyArIGZpbGVSZWZlcmVuY2UubGVuZ3RoOyAvLyBQb3NpdGlvbiBhZnRlciB0aGUgcmVmZXJlbmNlXG4gICAgICAgIHRoaXMuYWN0aXZlRWRpdG9yLnNldFNlbGVjdGlvblJhbmdlKG5ld0N1cnNvclBvcywgbmV3Q3Vyc29yUG9zKTtcbiAgICBcbiAgICAgICAgLy8gVHJpZ2dlciBpbnB1dCBldmVudCB0byBlbnN1cmUgY29udGVudCBpcyBzYXZlZFxuICAgICAgICBjb25zdCBpbnB1dEV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSwgY2FuY2VsYWJsZTogdHJ1ZSB9KTtcbiAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3IuZGlzcGF0Y2hFdmVudChpbnB1dEV2ZW50KTtcbiAgICBcbiAgICAgICAgbmV3IE5vdGljZShgSW5zZXJ0ZWQgcmVmZXJlbmNlIHRvICR7ZmlsZS5uYW1lfWApO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIGZpbGUgaXMgYW4gaW1hZ2VcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzSW1hZ2VGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGltYWdlRXh0ZW5zaW9ucyA9IFsncG5nJywgJ2pwZycsICdqcGVnJywgJ2dpZicsICdzdmcnLCAnd2VicCddO1xuICAgICAgICBjb25zdCBleHQgPSBmaWxlLmV4dGVuc2lvbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgICByZXR1cm4gaW1hZ2VFeHRlbnNpb25zLmluY2x1ZGVzKGV4dCk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgZmlsZSBpcyBhIG1hcmtkb3duIGZpbGVcbiAgICAgKi9cbiAgICBwcml2YXRlIGlzTWFya2Rvd25GaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHJldHVybiBleHQgPT09ICdtZCcgfHwgZXh0ID09PSAnbWFya2Rvd24nO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0ZXJDbGVhbnVwKCk6IHZvaWQge1xuICAgICAgICAvLyBXYXRjaCBmb3Igd29ya3NwYWNlIGxheW91dCBjaGFuZ2VzICh3aGljaCBoYXBwZW4gd2hlbiBjaGFuZ2luZyBwYWdlcy90YWJzKVxuICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGFuIGFjdGl2ZSBlZGl0b3JcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVFZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgam91cm5hbCBlbnRyeSBjb250YWluaW5nIHRoaXMgZWRpdG9yXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpvdXJuYWxFbnRyeSA9IHRoaXMuYWN0aXZlRWRpdG9yLmNsb3Nlc3QoJy5qb3VybmFsLWVudHJ5Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChqb3VybmFsRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIGV4aXQgZWRpdCBtb2RlIGZ1bmN0aW9uIGZvciB0aGlzIGVudHJ5XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBLZXlib2FyZEV2ZW50KCdrZXlkb3duJywgeyBrZXk6ICdFc2NhcGUnIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVFZGl0b3IuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFyIHRoZSBhY3RpdmUgZWRpdG9yIHJlZmVyZW5jZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUVkaXRvciA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBtYWtlSGFzaHRhZ3NDbGlja2FibGUoY29udGVudEVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICAvLyBGaW5kIGFsbCBoYXNodGFnIGVsZW1lbnRzXG4gICAgICAgIGNvbnN0IGhhc2h0YWdzID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbS1oYXNodGFnLCAudGFnJyk7XG4gICAgICAgIFxuICAgICAgICBoYXNodGFncy5mb3JFYWNoKHRhZyA9PiB7XG4gICAgICAgICAgICBpZiAodGFnIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIHRoZSB0YWcgdG8gcmVtb3ZlIGFueSBleGlzdGluZyBsaXN0ZW5lcnNcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUYWcgPSB0YWcuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgICAgIHRhZy5wYXJlbnROb2RlPy5yZXBsYWNlQ2hpbGQobmV3VGFnLCB0YWcpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG5ld1RhZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhhc2h0YWdUZXh0ID0gbmV3VGFnLnRleHRDb250ZW50Py50cmltKCkgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3BlblNlYXJjaFdpdGhIYXNodGFnKGhhc2h0YWdUZXh0KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBuZXdUYWcuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcGVuU2VhcmNoV2l0aEhhc2h0YWcoaGFzaHRhZzogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSBoYXNodGFnLnN0YXJ0c1dpdGgoJyMnKSA/IGhhc2h0YWcgOiBgIyR7aGFzaHRhZ31gO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIE1ldGhvZCAxOiBEaXJlY3QgQVBJIGNhbGxcbiAgICAgICAgICAgIGNvbnN0IGFwcCA9IHRoaXMucGx1Z2luLmFwcCBhcyBFeHRlbmRlZEFwcDtcbiAgICAgICAgICAgIGlmIChhcHAuaW50ZXJuYWxQbHVnaW5zPy5nZXRQbHVnaW5CeUlkKCdnbG9iYWwtc2VhcmNoJyk/Lmluc3RhbmNlLm9wZW5HbG9iYWxTZWFyY2gpIHtcbiAgICAgICAgICAgICAgICBhcHAuaW50ZXJuYWxQbHVnaW5zLmdldFBsdWdpbkJ5SWQoJ2dsb2JhbC1zZWFyY2gnKT8uaW5zdGFuY2Uub3Blbkdsb2JhbFNlYXJjaChzZWFyY2hUZXJtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE1ldGhvZCAyOiBFeGVjdXRlIHNlYXJjaCBjb21tYW5kXG4gICAgICAgICAgICBpZiAoYXBwLmNvbW1hbmRzPy5leGVjdXRlQ29tbWFuZEJ5SWQoJ2dsb2JhbC1zZWFyY2g6b3BlbicpKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaC1pbnB1dC1jb250YWluZXIgaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlYXJjaElucHV0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoSW5wdXQudmFsdWUgPSBzZWFyY2hUZXJtO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoSW5wdXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ2lucHV0JywgeyBidWJibGVzOiB0cnVlIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNZXRob2QgMzogRm9jdXMgZXhpc3Rpbmcgc2VhcmNoIGxlYWZcbiAgICAgICAgICAgIGNvbnN0IHNlYXJjaExlYWYgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnc2VhcmNoJylbMF07XG4gICAgICAgICAgICBpZiAoc2VhcmNoTGVhZikge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihzZWFyY2hMZWFmLCB7IGZvY3VzOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtaW5wdXQtY29udGFpbmVyIGlucHV0Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWFyY2hJbnB1dCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaElucHV0LnZhbHVlID0gc2VhcmNoVGVybTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaElucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCdpbnB1dCcsIHsgYnViYmxlczogdHJ1ZSB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmFsbGJhY2tcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYFNlYXJjaCBmb3I6ICR7c2VhcmNoVGVybX1gKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igb3BlbmluZyBzZWFyY2g6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgQ291bGQgbm90IG9wZW4gc2VhcmNoLiBQbGVhc2Ugc2VhcmNoIGZvcjogJHtzZWFyY2hUZXJtfWApO1xuICAgICAgICB9XG4gICAgfVxufSIsICIvLyBGb3JtYXRzIHRoZSBjdXJyZW50IGRhdGUgaW4gWVlZWS1NTS1ERCBmb3JtYXRcbmV4cG9ydCBmdW5jdGlvbiBnZXRUb2RheURhdGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgcmV0dXJuIGZvcm1hdERhdGVTdHJpbmcodG9kYXkpO1xufVxuXG4vLyBGb3JtYXRzIGEgZGF0ZSBhcyBZWVlZLU1NLUREXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RGF0ZVN0cmluZyhkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKGRhdGUuZ2V0RGF0ZSgpKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gO1xufVxuXG4vLyBGb3JtYXRzIGEgZGF0ZSBzdHJpbmcgaW4gYSBodW1hbi1yZWFkYWJsZSBmb3JtYXQgd2l0aCBvcmRpbmFsIHN1ZmZpeFxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdERhdGVGb3JEaXNwbGF5KGRhdGVTdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHJpbmcpO1xuICAgIGNvbnN0IGRhdGVGb3JtYXRPcHRpb25zOiBJbnRsLkRhdGVUaW1lRm9ybWF0T3B0aW9ucyA9IHsgXG4gICAgICAgIG1vbnRoOiAnc2hvcnQnLCBcbiAgICAgICAgeWVhcjogJ251bWVyaWMnLCBcbiAgICAgICAgZGF5OiAnbnVtZXJpYycgXG4gICAgfTtcblxuICAgIC8vIEZvcm1hdCBkYXRlIHVzaW5nIEludGwuRGF0ZVRpbWVGb3JtYXRcbiAgICBjb25zdCBmb3JtYXR0ZWREYXRlID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuLVVTJywgZGF0ZUZvcm1hdE9wdGlvbnMpLmZvcm1hdChkYXRlKTtcblxuICAgIC8vIEV4dHJhY3QgZGF5IGFuZCBhZGQgb3JkaW5hbCBzdWZmaXggKGUuZy4sICdzdCcsICduZCcsICdyZCcsICd0aCcpXG4gICAgY29uc3QgZGF5ID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgY29uc3QgZGF5U3VmZml4ID0gZ2V0RGF5U3VmZml4KGRheSk7XG5cbiAgICAvLyBCdWlsZCB0aGUgZmluYWwgZm9ybWF0dGVkIHN0cmluZ1xuICAgIGNvbnN0IHBhcnRzID0gZm9ybWF0dGVkRGF0ZS5zcGxpdCgnICcpO1xuICAgIHJldHVybiBgJHtwYXJ0c1swXX0gJHtkYXl9JHtkYXlTdWZmaXh9LCAke3BhcnRzWzJdfWA7XG59XG5cbi8vIEdldHMgdGhlIGFwcHJvcHJpYXRlIG9yZGluYWwgc3VmZml4IGZvciBhIGRheSBudW1iZXJcbmV4cG9ydCBmdW5jdGlvbiBnZXREYXlTdWZmaXgoZGF5OiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmIChkYXkgPiAzICYmIGRheSA8IDIxKSByZXR1cm4gJ3RoJzsgLy8gU3BlY2lhbCBjYXNlIGZvciAxMXRoLTE5dGhcbiAgICBzd2l0Y2ggKGRheSAlIDEwKSB7XG4gICAgICAgIGNhc2UgMTogcmV0dXJuICdzdCc7XG4gICAgICAgIGNhc2UgMjogcmV0dXJuICduZCc7XG4gICAgICAgIGNhc2UgMzogcmV0dXJuICdyZCc7XG4gICAgICAgIGRlZmF1bHQ6IHJldHVybiAndGgnO1xuICAgIH1cbn1cblxuLy8gQ2hlY2tzIGlmIGEgc3RyaW5nIG1hdGNoZXMgdGhlIFlZWVktTU0tREQgcGF0dGVyblxuZXhwb3J0IGZ1bmN0aW9uIGlzRGF0ZUZvcm1hdCh0ZXh0OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gL15cXGR7NH0tXFxkezJ9LVxcZHsyfSQvLnRlc3QodGV4dCk7XG59IiwgImltcG9ydCB7IEFwcCwgTm90aWNlLCBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IGlzRGF0ZUZvcm1hdCB9IGZyb20gJy4vZGF0ZS11dGlscyc7XG5cbi8qKlxuICogR2V0cyB0aGUgZnVsbCBwYXRoIGZvciBhIGZpbGUgd2l0aGluIHRoZSBzcGVjaWZpZWQgZm9sZGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlUGF0aChmb2xkZXI6IHN0cmluZywgZmlsZW5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKGZvbGRlcikge1xuICAgICAgICByZXR1cm4gYCR7Zm9sZGVyfS8ke2ZpbGVuYW1lfWA7XG4gICAgfVxuICAgIHJldHVybiBmaWxlbmFtZTtcbn1cblxuLyoqXG4gKiBFbnN1cmVzIHRoYXQgdGhlIHNwZWNpZmllZCBmb2xkZXIgZXhpc3RzLCBjcmVhdGluZyBpdCBpZiBuZWNlc3NhcnlcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlcihhcHA6IEFwcCwgZm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgLy8gSWYgbm8gZm9sZGVyIGlzIHNwZWNpZmllZCwgbm90aGluZyB0byBjcmVhdGVcbiAgICBpZiAoIWZvbGRlclBhdGgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgZm9sZGVyIGV4aXN0c1xuICAgIGNvbnN0IGZvbGRlckV4aXN0cyA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgXG4gICAgLy8gSWYgaXQgZXhpc3RzLCBtYWtlIHN1cmUgaXQncyBhIGZvbGRlclxuICAgIGlmIChmb2xkZXJFeGlzdHMgJiYgIShmb2xkZXJFeGlzdHMgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xuICAgICAgICBuZXcgTm90aWNlKGBDYW5ub3QgY3JlYXRlIGZvbGRlcjogXCIke2ZvbGRlclBhdGh9XCIgZXhpc3RzIGJ1dCBpcyBub3QgYSBmb2xkZXJgKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhdGUgZm9sZGVyIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICBpZiAoIWZvbGRlckV4aXN0cykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihmb2xkZXJQYXRoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYENyZWF0ZWQgZm9sZGVyOiAke2ZvbGRlclBhdGh9YCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byBjcmVhdGUgZm9sZGVyOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBmb2xkZXI6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIGZpbGUgcGF0aCBmb3IgYSBqb3VybmFsIGVudHJ5IGJhc2VkIG9uIHRoZSBkYXRlIGFuZCBmb2xkZXIgZm9ybWF0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRKb3VybmFsRmlsZVBhdGgoam91cm5hbEZvbGRlcjogc3RyaW5nLCBmaWxlbmFtZTogc3RyaW5nLCBmb2xkZXJGb3JtYXQ6IHN0cmluZyA9ICcnKTogc3RyaW5nIHtcbiAgICAvLyBJZiBubyBmb2xkZXIgZm9ybWF0IGlzIHNwZWNpZmllZCwgdXNlIHRoZSBmbGF0IHN0cnVjdHVyZVxuICAgIGlmICghZm9sZGVyRm9ybWF0KSB7XG4gICAgICAgIHJldHVybiBnZXRGaWxlUGF0aChqb3VybmFsRm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEV4dHJhY3QgdGhlIGRhdGUgZnJvbSB0aGUgZmlsZW5hbWUgKGFzc3VtaW5nIFlZWVktTU0tREQubWQgZm9ybWF0KVxuICAgIGNvbnN0IGRhdGVQYXJ0ID0gZmlsZW5hbWUuc3BsaXQoJy4nKVswXTsgLy8gUmVtb3ZlIGZpbGUgZXh0ZW5zaW9uXG4gICAgaWYgKCFpc0RhdGVGb3JtYXQoZGF0ZVBhcnQpKSB7XG4gICAgICAgIC8vIElmIGZpbGVuYW1lIGRvZXNuJ3QgbWF0Y2ggZGF0ZSBwYXR0ZXJuLCBmYWxsIGJhY2sgdG8gZmxhdCBzdHJ1Y3R1cmVcbiAgICAgICAgcmV0dXJuIGdldEZpbGVQYXRoKGpvdXJuYWxGb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUGFyc2UgdGhlIGRhdGVcbiAgICBjb25zdCBbeWVhciwgbW9udGgsIGRheV0gPSBkYXRlUGFydC5zcGxpdCgnLScpLm1hcChwYXJ0ID0+IHBhcnNlSW50KHBhcnQpKTtcbiAgICBcbiAgICAvLyBGb3JtYXQgdGhlIGZvbGRlciBwYXRoIGJhc2VkIG9uIHRoZSBwYXR0ZXJuXG4gICAgbGV0IGZvcm1hdHRlZFBhdGggPSBmb2xkZXJGb3JtYXQ7XG4gICAgZm9ybWF0dGVkUGF0aCA9IGZvcm1hdHRlZFBhdGgucmVwbGFjZSgnWVlZWScsIHllYXIudG9TdHJpbmcoKSk7XG4gICAgZm9ybWF0dGVkUGF0aCA9IGZvcm1hdHRlZFBhdGgucmVwbGFjZSgnTU0nLCBtb250aC50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykpO1xuICAgIGZvcm1hdHRlZFBhdGggPSBmb3JtYXR0ZWRQYXRoLnJlcGxhY2UoJ0REJywgZGF5LnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSk7XG4gICAgXG4gICAgLy8gQ29tYmluZSB0aGUgYmFzZSBmb2xkZXIsIGZvcm1hdHRlZCBwYXRoLCBhbmQgZmlsZW5hbWVcbiAgICBpZiAoam91cm5hbEZvbGRlcikge1xuICAgICAgICByZXR1cm4gYCR7am91cm5hbEZvbGRlcn0vJHtmb3JtYXR0ZWRQYXRofS8ke2ZpbGVuYW1lfWA7XG4gICAgfVxuICAgIHJldHVybiBgJHtmb3JtYXR0ZWRQYXRofS8ke2ZpbGVuYW1lfWA7XG59XG5cbi8qKlxuICogRW5zdXJlcyBhbGwgZm9sZGVycyBpbiBhIHBhdGggZXhpc3RcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuc3VyZUFsbEZvbGRlcnMoYXBwOiBBcHAsIGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBTcGxpdCB0aGUgcGF0aCB0byBlbnN1cmUgYWxsIGZvbGRlcnMgZXhpc3RcbiAgICBjb25zdCBwYXRoUGFydHMgPSBmaWxlUGF0aC5zcGxpdCgnLycpO1xuICAgIGNvbnN0IGZpbGVOYW1lSW5kZXggPSBwYXRoUGFydHMubGVuZ3RoIC0gMTtcbiAgICBcbiAgICAvLyBFbnN1cmUgYWxsIGZvbGRlcnMgaW4gdGhlIHBhdGggZXhpc3RcbiAgICBsZXQgY3VycmVudEZvbGRlciA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZU5hbWVJbmRleDsgaSsrKSB7XG4gICAgICAgIGlmIChjdXJyZW50Rm9sZGVyKSB7XG4gICAgICAgICAgICBjdXJyZW50Rm9sZGVyICs9ICcvJztcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50Rm9sZGVyICs9IHBhdGhQYXJ0c1tpXTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNraXAgZW1wdHkgcGFydHNcbiAgICAgICAgaWYgKCFjdXJyZW50Rm9sZGVyKSBjb250aW51ZTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBmb2xkZXIgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgICBpZiAoIShhd2FpdCBlbnN1cmVGb2xkZXIoYXBwLCBjdXJyZW50Rm9sZGVyKSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIG9yIGdldHMgYSBqb3VybmFsIGZpbGUgZm9yIHRoZSBzcGVjaWZpZWQgZGF0ZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JDcmVhdGVKb3VybmFsRmlsZShcbiAgICBhcHA6IEFwcCwgXG4gICAgam91cm5hbEZvbGRlcjogc3RyaW5nLCBcbiAgICBmaWxlbmFtZTogc3RyaW5nLFxuICAgIGZvbGRlckZvcm1hdDogc3RyaW5nID0gJycsXG4gICAgaW5pdGlhbENvbnRlbnQ6IHN0cmluZyA9ICcnXG4pOiBQcm9taXNlPFRGaWxlIHwgbnVsbD4ge1xuICAgIC8vIEdlbmVyYXRlIHRoZSBmaWxlIHBhdGggdXNpbmcgdGhlIG5ldyBmdW5jdGlvblxuICAgIGNvbnN0IGZpbGVQYXRoID0gZ2V0Sm91cm5hbEZpbGVQYXRoKGpvdXJuYWxGb2xkZXIsIGZpbGVuYW1lLCBmb2xkZXJGb3JtYXQpO1xuICAgIFxuICAgIC8vIEVuc3VyZSBhbGwgbmVjZXNzYXJ5IGZvbGRlcnMgZXhpc3RcbiAgICBpZiAoIShhd2FpdCBlbnN1cmVBbGxGb2xkZXJzKGFwcCwgZmlsZVBhdGgpKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGZpbGUgYWxyZWFkeSBleGlzdHNcbiAgICBsZXQgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuICAgIFxuICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgcmV0dXJuIGZpbGU7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSB0aGUgZmlsZSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgdHJ5IHtcbiAgICAgICAgZmlsZSA9IGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGluaXRpYWxDb250ZW50KTtcbiAgICAgICAgbmV3IE5vdGljZShgQ3JlYXRlZCBqb3VybmFsIGVudHJ5OiAke2ZpbGVuYW1lfWApO1xuICAgICAgICByZXR1cm4gZmlsZSBhcyBURmlsZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gY3JlYXRlIGpvdXJuYWwgZW50cnk6ICR7ZXJyb3J9YCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgam91cm5hbCBlbnRyeTonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBmaWxlIGlzIGEgam91cm5hbCBmaWxlIGJhc2VkIG9uIGl0cyBuYW1lIHBhdHRlcm4gYW5kIGxvY2F0aW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0pvdXJuYWxGaWxlKGZpbGU6IFRGaWxlLCBqb3VybmFsRm9sZGVyPzogc3RyaW5nLCBmb2xkZXJGb3JtYXQ/OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAvLyBDaGVjayBpZiBiYXNlbmFtZSBtYXRjaGVzIFlZWVktTU0tREQgcGF0dGVyblxuICAgIGNvbnN0IGlzRGF0ZUJhc2VuYW1lID0gaXNEYXRlRm9ybWF0KGZpbGUuYmFzZW5hbWUpO1xuICAgIFxuICAgIGlmICghaXNEYXRlQmFzZW5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICAvLyBJZiBubyBmb2xkZXIgaXMgc3BlY2lmaWVkLCBqdXN0IGNoZWNrIHRoZSBiYXNlbmFtZVxuICAgIGlmICgham91cm5hbEZvbGRlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgXG4gICAgLy8gV2l0aCBmb2xkZXIgZm9ybWF0LCB3ZSBuZWVkIGEgbW9yZSBzb3BoaXN0aWNhdGVkIGNoZWNrXG4gICAgaWYgKGZvbGRlckZvcm1hdCkge1xuICAgICAgICAvLyBHZW5lcmF0ZSB0aGUgZXhwZWN0ZWQgYmFzZSBwYXRoXG4gICAgICAgIGNvbnN0IGRhdGVTdHIgPSBmaWxlLmJhc2VuYW1lLnNwbGl0KCcuJylbMF07XG4gICAgICAgIGNvbnN0IFt5ZWFyLCBtb250aCwgZGF5XSA9IGRhdGVTdHIuc3BsaXQoJy0nKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBleHBlY3RlZFBhdGggPSBmb2xkZXJGb3JtYXQ7XG4gICAgICAgIGV4cGVjdGVkUGF0aCA9IGV4cGVjdGVkUGF0aC5yZXBsYWNlKCdZWVlZJywgeWVhcik7XG4gICAgICAgIGV4cGVjdGVkUGF0aCA9IGV4cGVjdGVkUGF0aC5yZXBsYWNlKCdNTScsIG1vbnRoKTtcbiAgICAgICAgZXhwZWN0ZWRQYXRoID0gZXhwZWN0ZWRQYXRoLnJlcGxhY2UoJ0REJywgZGF5KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGV4cGVjdGVkRnVsbFBhdGggPSBgJHtqb3VybmFsRm9sZGVyfS8ke2V4cGVjdGVkUGF0aH1gO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpbGUncyBwYXRoIGNvbnRhaW5zIHRoZSBleHBlY3RlZCBwYXRoXG4gICAgICAgIHJldHVybiBmaWxlLnBhdGguc3RhcnRzV2l0aChleHBlY3RlZEZ1bGxQYXRoKTtcbiAgICB9XG4gICAgXG4gICAgLy8gV2l0aG91dCBmb2xkZXIgZm9ybWF0LCBqdXN0IGNoZWNrIGlmIGl0J3MgaW4gdGhlIGpvdXJuYWwgZm9sZGVyXG4gICAgcmV0dXJuIGZpbGUucGF0aC5zdGFydHNXaXRoKGpvdXJuYWxGb2xkZXIgKyAnLycpO1xufVxuXG4vKipcbiAqIEdldHMgYWxsIGpvdXJuYWwgZmlsZXMgaW4gdGhlIHZhdWx0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRKb3VybmFsRmlsZXMoYXBwOiBBcHAsIGpvdXJuYWxGb2xkZXI/OiBzdHJpbmcsIGZvbGRlckZvcm1hdD86IHN0cmluZyk6IFRGaWxlW10ge1xuICAgIC8vIEdldCBhbGwgbWFya2Rvd24gZmlsZXMgaW4gdGhlIHZhdWx0XG4gICAgY29uc3QgZmlsZXMgPSBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgLy8gRmlsdGVyIGZpbGVzIHRoYXQgZm9sbG93IGEgZGFpbHkgbm90ZSBwYXR0ZXJuIGFuZCBhcmUgaW4gdGhlIGNvcnJlY3QgZm9sZGVyIHN0cnVjdHVyZVxuICAgIHJldHVybiBmaWxlcy5maWx0ZXIoKGZpbGUpID0+IGlzSm91cm5hbEZpbGUoZmlsZSwgam91cm5hbEZvbGRlciwgZm9sZGVyRm9ybWF0KSk7XG59XG5cbi8qKlxuICogU29ydHMgam91cm5hbCBmaWxlcyBieSBkYXRlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzb3J0Sm91cm5hbEZpbGVzKGZpbGVzOiBURmlsZVtdLCBzb3J0RGlyZWN0aW9uOiAnbmV3ZXN0LWZpcnN0JyB8ICdvbGRlc3QtZmlyc3QnKTogVEZpbGVbXSB7XG4gICAgcmV0dXJuIGZpbGVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKHNvcnREaXJlY3Rpb24gPT09ICduZXdlc3QtZmlyc3QnKSB7XG4gICAgICAgICAgICByZXR1cm4gYi5iYXNlbmFtZS5sb2NhbGVDb21wYXJlKGEuYmFzZW5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGEuYmFzZW5hbWUubG9jYWxlQ29tcGFyZShiLmJhc2VuYW1lKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBa0Q7OztBQ0FsRCxzQkFBc0Q7QUFXL0MsSUFBTSxtQkFBdUM7QUFBQSxFQUNoRCxlQUFlO0FBQUEsRUFDZixZQUFZO0FBQUEsRUFDWixlQUFlO0FBQUEsRUFDZixzQkFBc0I7QUFBQSxFQUN0QixjQUFjO0FBQ2xCO0FBRU8sSUFBTSx1QkFBTixjQUFtQyxpQ0FBaUI7QUFBQSxFQUd2RCxZQUFZLEtBQVUsUUFBMEI7QUFDNUMsVUFB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
